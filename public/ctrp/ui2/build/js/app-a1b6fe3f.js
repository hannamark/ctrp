!function(){"use strict";angular.module("ctrp.app.user",["ngTouch","ngAnimate","ngSanitize","ctrp.module.routes","ctrp.module.constants","ctrp.module.common","LocalCacheModule","ctrpApp.widgets","ctrp.module.dataservices","ctrp.module.underscoreWrapper","ctrp.module.validators","ui.bootstrap","ngMaterial","toastr","ngFileUpload","angularMoment"])}(),function(){"use strict";function e(e,t,i,a,r,o,n,s){var l=this;l.userObj={local_user:{username:"",email:"",password:"",password_confirmation:"",role:""},type:l.type},l.updateUser=function(){s.upsertUserSignup(l.userObj)}}angular.module("ctrp.app.user").controller("userSignupCtrl",e),e.$inject=["$scope","$http","$window","toastr","$sce","$state","$timeout","UserService"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d,u){function m(){}function p(e,t){if(0==t.length)console.log("removing sorting"),g.searchParams.sort="",g.searchParams.order="";else switch(g.searchParams.sort=t[0].name,t[0].sort.direction){case c.ASC:g.searchParams.order="ASC";break;case c.DESC:g.searchParams.order="DESC";break;case void 0:}g.searchUsers()}var g=this;g.searchParams=l.getInitialUserSearchParams(),g.gridOptions=l.getGridOptions(),g.gridOptions.enableVerticalScrollbar=c.scrollbars.NEVER,g.gridOptions.enableHorizontalScrollbar=c.scrollbars.NEVER,g.gridOptions.onRegisterApi=function(t){g.gridApi=t,g.gridApi.core.on.sortChanged(e,p),g.gridApi.pagination.on.paginationChanged(e,function(e,t){g.searchParams.start=e,g.searchParams.rows=t,g.searchUsers()})},g.searchUsers=function(){l.searchUsers(g.searchParams).then(function(e){console.log("received search results data: "+JSON.stringify(e)),g.gridOptions.data=e.users,g.gridOptions.totalItems=e.users.total,d.hash("users_search_results")})["catch"](function(e){console.log("Search Users failed")})},g.resetSearch=function(){g.searchParams=l.getInitialUserSearchParams(),g.gridOptions.data.length=0,g.gridOptions.totalItems=null,Object.keys(g.searchParams).forEach(function(e,t){g.searchParams[e]=""})},m()}angular.module("ctrp.app.user").controller("userListCtrl",e),e.$inject=["$scope","$http","$window","toastr","$sce","$state","$timeout","LocalCacheService","UserService","uiGridConstants","$location","$anchorScroll"]}(),function(){"use strict";function e(e,t,i,a,r){function o(){if(null!=n.userDetails.organization_id){n.userDetails.organization_id;a.getOrgById(n.userDetails.organization_id).then(function(e){var t={id:n.userDetails.organization_id,name:e.name};n.savedSelection.push(t)})}}var n=this;console.log("curuser is "),n.userDetails=r,n.selectedOrgsArray=[],n.savedSelection=[],n.updateUser=function(){console.log("hello email changed ? "+n.userDetails.email),console.log("IN UPDATEUSER");var t={};t["new"]=n.userDetails["new"]||"",t.id=n.userDetails.id||"",n.selectedOrgsArray.length>0&&(n.userDetails.organization_id=n.selectedOrgsArray[0].id),t.user=n.userDetails,null!=n.selectedOrgsArray[0]&&console.log("orgs id is "+n.selectedOrgsArray[0].id),console.log("newUser is: "+JSON.stringify(t)),e.upsertUser(t).then(function(e){})["catch"](function(e){console.log("error in updating family "+JSON.stringify(n.userDetails))})},t.$watch(function(){return n.selectedOrgsArray},function(e){console.log("selected org:"+JSON.stringify(n.selectedOrgsArray))}),o()}angular.module("ctrp.app.user").controller("userDetailCtrl",e),e.$inject=["UserService","$scope","toastr","OrgService","userDetailObj"]}(),function(){"use strict";function e(e,t,i,a,r,o){var n=this;console.log("in user controller"),n.loginBulletin=o.login_bulletin||"",n.userObj={user:{username:"",password:"",source:"Angular"},type:n.type},n.authenticate=function(){return r.login(n.userObj)}}angular.module("ctrp.app.user").controller("userCtrl",e),e.$inject=["$scope","$state","$timeout","LocalCacheService","UserService","loginBulletin"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s){var l=this,c=s.getLoggedInUsername();a.success("User "+c),l.userObj={local_user:{username:c,password:"",password_confirmation:"",current_password:""},type:l.type},l.updateUser=function(){s.upsertUserChangePassword(l.userObj).then(function(e){})["catch"](function(e){console.log("Error in Changing the Password "+JSON.stringify(l.userObj))})}}angular.module("ctrp.app.user").controller("userChangePasswordCtrl",e),e.$inject=["$scope","$http","$window","toastr","$sce","$state","$timeout","UserService"]}(),function(){"use strict";function e(e){e.decorator("$state",["$delegate","$rootScope",function(e,t){return t.$on("$stateChangeSuccess",function(t,i,a,r,o){e.fromParams=o,e.fromState=r}),e}])}function t(e){e.defaults.headers.get||(e.defaults.headers.get={},e.defaults.headers.common={}),e.defaults.headers.get["If-Modified-Since"]="0",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}function i(e,t){t.otherwise("/main/welcome"),e.state("main",{"abstract":!0,url:"/main",views:{"":{templateUrl:"app/layout/mainContentFrame.html"},"rightPanel@main":{templateUrl:"app/layout/rightPanel.html"},"mainContent@main":{templateUrl:"app/layout/mainContent.html"}},ncyBreadcrumb:{label:"Home",skip:!0}}).state("main.defaultContent",{url:"/welcome",templateUrl:"app/layout/welcome/welcomeContent.html",controller:"headerNavigationCtrl as headerView",ncyBreadcrumb:{label:"Home"}})}angular.module("ctrp.module.routes",["ui.router","ncy-angular-breadcrumb","LocalCacheModule"]).config(t).config(i).config(e),e.$inject=["$provide"],t.$inject=["$httpProvider"],i.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){e.state("main.test_user",{url:"/user_test",templateUrl:"app/user/test_user.html"}).state("main.sign_in",{url:"/sign_in",templateUrl:"app/user/sign_in.html",controller:"userCtrl as userView",resolve:{UserService:"UserService",loginBulletin:["UserService","$q",function(e,t){return e.getLoginBulletin()}]},onEnter:["$state","UserService","toastr",function(e,t,i){t.isLoggedIn()&&(i.warning("Redirected ...","You are already signed in"),e.go("main.defaultContent"))}],ncyBreadcrumb:{parent:"",label:"CTRP Sign In",skip:!0}}).state("main.signup",{url:"/sign_up",templateUrl:"app/user/sign_up.html",controller:"userSignupCtrl as userView",resolve:{UserService:"UserService"}}).state("main.welcome_signup",{url:"/welcome_signup",templateUrl:"app/user/welcome_signup.html"}).state("main.gsa",{url:"/gsa",templateUrl:"app/user/gsa.html",controller:"gsaCtrl as gsaView",resolve:{UserService:"UserService",gsaObj:["UserService",function(e){return e.getGsa()}]}}).state("main.users",{url:"/users",templateUrl:"app/user/user_list.html",controller:"userListCtrl as userView",resolve:{UserService:"UserService"}}).state("main.changePassword",{url:"/change_password",templateUrl:"app/user/changePassword.html",controller:"userChangePasswordCtrl as userView",resolve:{UserService:"UserService"},username:function(e){return e.getLoggedInUsername()}}).state("main.userDetail",{url:"/userDetail/username",templateUrl:"app/user/userDetails.html",controller:"userDetailCtrl as userDetailView",resolve:{UserService:"UserService",GeoLocationService:"GeoLocationService",countryList:["GeoLocationService",function(e){return e.getCountryList()}],userDetailObj:["UserService",function(e){return e.getUserDetailsByUsername()}]},ncyBreadcrumb:{label:"User Profile"}})}angular.module("ctrp.module.routes").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";angular.module("ctrp.app.user").constant("user","user")}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d){var u=this;u.userType=l.getUserType(),u.accept=function(){console.log("ACCEPT"),s.cacheItem("gsaFlag","Accept"),d.close(),r.go("main.defaultContent")},u.reject=function(){console.log("REJECT"),s.cacheItem("gsaFlag","Reject"),d.dismiss("cancel"),l.logout()},u.renderGSAHtml=function(){var e=c.gsa;return e=e.replace(/(?:\r\n|\r|\n)/g,"<br />"),o.trustAsHtml(e)}}angular.module("ctrp.app.user").controller("gsaModalCtrl",e),e.$inject=["$scope","$http","$window","toastr","$state","$sce","$timeout","LocalCacheService","UserService","gsaObj","$modalInstance"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c){var d=this;d.gsa=c.gsa,d.userType=l.getUserType(),console.log("userType: "+JSON.stringify(d.userType)),d.accept=function(){console.log("ACCEPT"),r.go("main.defaultContent")},d.reject=function(){console.log("REJECT"),l.logout()}}angular.module("ctrp.app.user").controller("gsaCtrl",e),e.$inject=["$scope","$http","$window","toastr","$state","$sce","$timeout","LocalCacheService","UserService","gsaObj"]}(),function(){"use strict";angular.module("ctrp.app.po",["ngTouch","ngAnimate","ngSanitize","ctrp.module.routes","ctrp.module.constants","ctrp.module.common","ctrp.module.underscoreWrapper","LocalCacheModule","ctrpApp.widgets","ctrp.module.dataservices","ctrp.module.validators","ui.bootstrap","ngMaterial","toastr","ngFileUpload","angularMoment","ui.grid","ui.grid.pagination","ui.grid.selection","ui.scrollpoint"])}(),function(){"use strict";function e(e,t){function i(){a()}function a(){t.$watch("personSearchResults",function(e,i){t.personSearchResults=e},!0),t.$watch("selectedPersonsArray",function(e,i){t.selectedPersonsArray=e,console.log("received selectedPersonsArray: "+JSON.stringify(e))},!0)}t.personSearchResults={people:[],total:0,start:1,rows:10,sort:"name",order:"asc"},t.selectedPersonsArray=[],i()}angular.module("ctrp.app.po").controller("personSearchCtrl",e),e.$inject=["PersonService","$scope"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d,u,m,p){function g(){h(),f(),y(),w.curPerson.po_affiliations&&w.curPerson.po_affiliations.length>0&&b(),w.curPerson["new"]||_(),v()}function h(){c.$current.name.indexOf("add")>-1&&(w.curPerson["new"]=!0)}function f(){if(w.curPerson["new"])w.curPerson.cluster=[{context:"CTRP"}];else for(var e=0;e<w.curPerson.cluster.length;e++)w.curPerson.cluster[e].id==w.curPerson.id&&(w.tabIndex=e)}function v(){angular.copy(w.sourceContextArr);if(w.curPerson["new"]){w.curSourceContextName="CTRP";var e=p.findWhere(w.sourceContextArr,{code:"CTRP"});w.curPerson.source_context_id=e?e.id:""}else{var t=p.findWhere(w.sourceContextArr,{id:w.curPerson.source_context_id});w.curSourceContextName=t?t.name:""}w.sourceContextArr=p.without(w.sourceContextArr,p.findWhere(w.sourceContextArr,{name:"CTEP"})),w.sourceContextArr=p.without(w.sourceContextArr,p.findWhere(w.sourceContextArr,{name:"NLM"})),w.curPersonEditable="CTRP"===w.curSourceContextName||w.curPerson["new"]}function y(){o.$watchCollection(function(){return w.orgsArrayReceiver},function(e,t){p.each(e,function(e,t){-1==n.indexOfObjectInJsonArray(w.savedSelection,"id",e.id)&&w.savedSelection.unshift(u.initSelectedOrg(e))})},!0)}function b(){var e=function(e,t){u.getOrgById(e.organization_id).then(function(t){var i={id:e.organization_id,name:t.name};i.effective_date=a.convertISODateToLocaleDateStr(e.effective_date),i.expiration_date=a.convertISODateToLocaleDateStr(e.expiration_date),i.po_affiliation_status_id=e.po_affiliation_status_id,i.po_affiliation_id=e.id,i.lock_version=e.lock_version,i._destroy=e._destroy||!1,w.savedSelection.push(i)})["catch"](function(t){console.error("error in retrieving organization name with id: "+e.organization_id)}),t()},t=function(){return w.savedSelection};async.eachSeries(w.curPerson.po_affiliations,e,t)}function _(){w.confirmDelete=function(e){var t=d.open({animation:!0,templateUrl:"delete_confirm_template.html",controller:"ModalInstancePersonCtrl as vm",size:e,resolve:{personId:function(){return w.curPerson.id}}});t.result.then(function(e){console.log("about to delete the personDetail "+w.curPerson.id),c.go("main.people")},function(){console.log("operation canceled")})}}var w=this;w.curPerson=e||{lname:"",source_status_id:""},w.curPerson=w.curPerson.data||w.curPerson,w.masterCopy=angular.copy(w.curPerson),w.sourceStatusArr=s,w.sourceStatusArr.sort(n.a2zComparator()),w.sourceContextArr=l,w.savedSelection=[],w.orgsArrayReceiver=[],w.selectedOrgFilter="";var S=w.curPerson.source_status_id?p.findWhere(w.sourceStatusArr,{id:w.curPerson.source_status_id}):p.findWhere(w.sourceStatusArr,{code:"ACT"});w.curSourceStatusName=S?S.name:"",w.curPerson.source_status_id=S.id,w.updatePerson=function(){w.curPerson.po_affiliations_attributes=u.preparePOAffiliationArr(w.savedSelection),p.each(w.curPerson.po_affiliations_attributes,function(e,t){e.effective_date=e.effective_date?a.convertISODateToLocaleDateStr(e.effective_date):"",e.expiration_date=e.expiration_date?a.convertISODateToLocaleDateStr(e.expiration_date):"";var i=-1;e.effective_date&&!e.expiration_date?i=p.findIndex(m,{name:"Active"}):e.expiration_date&&(i=p.findIndex(m,{name:"Inactive"})),e.po_affiliation_status_id=-1==i?"":m[i].id,w.curPerson.po_affiliations_attributes[t]=e});var e={};e["new"]=w.curPerson["new"]||"",e.id=w.curPerson.id||"",e.person=w.curPerson,t.upsertPerson(e).then(function(t){console.log("response: "+JSON.stringify(t)),e["new"]?(w.clearForm(),c.go("main.personDetail",{personId:t.data.id})):(w.curPerson.updated_by=t.data.updated_by,w.curPerson.updated_at=t.data.updated_at),w.curPerson["new"]=!1,i.clear(),i.success("Person "+w.curPerson.lname+" has been recorded","Operation Successful!",{extendedTimeOut:1e3,timeOut:0})})["catch"](function(t){console.log("error in updating person "+JSON.stringify(e))})},w.clearForm=function(){o.person_form.$setPristine(),w.curPerson=angular.copy(w.masterCopy),w.curPerson.source_context_id=u.findContextId(w.sourceContextArr,"name","CTRP"),w.savedSelection=[],b()},w.toggleSelection=function(e){e<w.savedSelection.length&&(w.savedSelection[e]._destroy=!w.savedSelection[e]._destroy)},w.batchSelect=function(e,t){"selectAll"==e?async.each(t,function(e,t){-1==u.indexOfOrganization(w.savedSelection,e)&&w.savedSelection.unshift(u.initSelectedOrg(e)),t()},function(e){e&&console.log("an error occurred when iterating the organizations")}):p.each(w.savedSelection,function(e,t){w.savedSelection[t]._destroy=!0})},w.dateFormat=a.getFormats()[1],w.dateOptions=a.getDateOptions(),w.today=a.today(),w.openCalendar=function(e,t,i){e.preventDefault(),e.stopPropagation(),"effective"==i?w.savedSelection[t].opened_effective=!w.savedSelection[t].opened_effective:w.savedSelection[t].opened_expiration=!w.savedSelection[t].opened_expiration},o.$watch(function(){return w.tabIndex},function(e,i){w.curPerson["new"]||t.getPersonById(w.curPerson.cluster[e].id).then(function(e){w.curPerson=e.data,w.savedSelection=[],b(),w.masterCopy=angular.copy(w.curPerson)})["catch"](function(e){console.log("Error in retrieving person during tab change.")})}),g(),o.checkForNameUniqueness=function(){var i=0;angular.isObject(e)&&(i=w.curPerson.id);var a={person_fname:w.curPerson.fname,person_lname:w.curPerson.lname,source_context_id:w.curPerson.source_context_id,person_exists:angular.isObject(e),person_id:i};console.log("First name is "+w.curPerson.fname),console.log("Last name is "+w.curPerson.lname),console.log("Source context is "+w.curPerson.source_context_id),console.log("Person exists? "+angular.isObject(e)),console.log("Person ID "+w.curPerson.id),w.showUniqueWarning=!1;t.checkUniquePerson(a).then(function(e){w.name_unqiue=e.name_unique,!e.name_unique&&w.curPerson.lname.length>0&&w.curPerson.fname.length>0&&(w.showUniqueWarning=!0),console.log("Is person name unique: "+w.name_unqiue),console.log(JSON.stringify(e))})["catch"](function(e){console.log("error in checking for duplicate person name "+JSON.stringify(e))})}}angular.module("ctrp.app.po").controller("personDetailCtrl",e),e.$inject=["personDetailObj","PersonService","toastr","DateService","UserService","$scope","Common","sourceStatusObj","sourceContextObj","$state","$modal","OrgService","poAffStatuses","_"]}(),function(){"use strict";function e(e,t){function i(){}console.log("in person controller for list"),t.personSearchResults={people:[],total:0,start:1,rows:10,sort:"name",order:"asc"},t.selectedPersonsArray=[],i()}angular.module("ctrp.app.po").controller("personCtrl",e),e.$inject=["PersonService","$scope"]}(),function(){"use strict";function e(e){e.state("main.people",{url:"/people",templateUrl:"app/po/person/person_list.html",controller:"personCtrl as personView",ncyBreadcrumb:{parent:"main.defaultContent",label:"Search Persons"}}).state("main.personDetail",{url:"/people/:personId",templateUrl:"app/po/person/personDetails.html",controller:"personDetailCtrl as personDetailView",resolve:{OrgService:"OrgService",PersonService:"PersonService",sourceContextObj:["OrgService",function(e){return e.getSourceContexts()}],sourceStatusObj:["OrgService",function(e){return e.getSourceStatuses()}],personDetailObj:["$stateParams","PersonService",function(e,t){return t.getPersonById(e.personId)}],poAffStatuses:["PersonService",function(e){return e.getPoAffStatuses()}]},ncyBreadcrumb:{parent:"main.people",label:"Person Detail"}}).state("main.addPerson",{url:"/new_person",templateUrl:"app/po/person/personDetails.html",controller:"personDetailCtrl as personDetailView",resolve:{OrgService:"OrgService",PersonService:"PersonService",sourceContextObj:["OrgService",function(e){return e.getSourceContexts()}],sourceStatusObj:["OrgService",function(e){return e.getSourceStatuses()}],personDetailObj:["$q",function(e){var t=e.defer();return t.resolve(null),t.promise}],poAffStatuses:["PersonService",function(e){return e.getPoAffStatuses()}]},ncyBreadcrumb:{parent:"main.people",label:"Add Person"}}).state("main.testPerson",{url:"/person_directive",templateUrl:"app/po/person/person_search.html",controller:"personSearchCtrl as personSearchView"})}angular.module("ctrp.module.routes").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,i,a){function r(t,i){o.deletionStatus=JSON.stringify(t),console.log("deletion status = "+o.deletionStatus),console.log("httpstatusCode = "+i),a(function(){parseInt(i)>206?e.dismiss("cancel"):e.close("delete")},2500)}var o=this;o.modalTitle="Please confirm",o.deletionStatus="",o.ok=function(){var e="Permanently deleted",a="Fail to delete";t.deletePerson(i).then(function(t){console.log("delete data returned: "+JSON.stringify(t)),o.modalTitle="Deletion was successful";var i=204==t.status?e:a;o.modalTitle=204==t.status?o.modalTitle:"Deletion failed",r(i,t.status)})["catch"](function(e){o.modalTitle="Deletion failed",console.log("failed to delete the person, error code: "+e.status),r(e.data||"Failed to delete",e.status)})},o.cancel=function(){e.dismiss("cancel")}}angular.module("ctrp.app.po").controller("ModalInstancePersonCtrl",e),e.$inject=["$modalInstance","PersonService","personId","$timeout"]}(),function(){"use strict";function e(e,t,i,a,r){function o(e,i,a){t(i.contents())(e),console.log("in linkerFn for personAdvSearchModal Button")}function n(t,a){t.savedSelection=[],t.showGrid=!0,t.curationMode=!1,t.selectedPersonsArray=[],t.allowOverwrite=void 0==t.allowOverwrite?!0:t.allowOverwrite;var o=!1;t.searchPerson=function(a){if(!o){var n=e.open({animation:!0,templateUrl:"app/po/person/directives/advanced_person_search_form_modal.html",controller:"advancedPersonSearchModalCtrl as advPersonSearchModalView",size:a,resolve:{maxRowSelectable:function(){return t.maxRowSelectable}}});o=!0,n.result.then(function(e){angular.isArray(e)&&e.length>0&&(t.allowOverwrite?(console.log("overwring the previous person"),t.savedSelection=e,t.selectedPersonsArray=e):(i.each(e,function(e,i){-1==r.indexOfObjectInJsonArray(t.savedSelection,"id",e.id)&&t.savedSelection.push(e)}),t.selectedPersonsArray=t.savedSelection)),o=!1},function(){o=!1,console.log("operation canceled")})}},t.$watch("selectedPersonsArray",function(e){t.selectedPersonsArray=e}.bind(this)),t.toggleSelection=function(e){e<t.savedSelection.length&&t.savedSelection.splice(e,1)},t.batchSelect=function(e){"removeAll"==e&&(t.savedSelection.length=0)}}var s={restrict:"E",scope:{maxRowSelectable:"=?",useBuiltInTemplate:"=?",selectedPersonsArray:"=",allowOverwrite:"="},templateUrl:"app/po/person/directives/personAdvSearchModalButtonTemplate.html",link:o,controller:n};return s}function t(e,t,i){function a(){r(),o()}function r(){e.$watch("personSearchResults",function(t,i){e.personSearchResults=t},!0)}function o(){e.$watch("selectedPersonsArray",function(t,i){console.log("In Person search modal, selectedPersonsArray.length: "+e.selectedPersonsArray.length)},!0)}var n=this;n.maxRowSelectable=i,e.personSearchResults={people:[],total:0,start:1,rows:10,sort:"name",order:"asc"},e.selectedPersonsArray=[],n.cancel=function(){t.dismiss("canceled")},n.confirmSelection=function(){t.close(e.selectedPersonsArray)},a()}angular.module("ctrp.app.po").controller("advancedPersonSearchModalCtrl",t).directive("ctrpPersonAdvSearchModalButton",e),t.$inject=["$scope","$modalInstance","maxRowSelectable"],e.$inject=["$modal","$compile","_","$timeout","Common"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d,u,m,p){function g(e,t,i){}function h(a,r,o,n,c,d){function u(){f(),v(),"main.personDetail"!=D?a.resetSearch():a.searchPeople(),y(),p(),w(),S()}function p(){a.$watch("usedInModal",function(e,i){var r=t.indexOfObjectInJsonArray(a.gridOptions.columnDefs,"name","fname"),o=t.indexOfObjectInJsonArray(a.gridOptions.columnDefs,"name","mname"),n=t.indexOfObjectInJsonArray(a.gridOptions.columnDefs,"name","lname");e?r>-1&&(a.gridOptions.columnDefs[r].cellTemplate='<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>',a.gridOptions.columnDefs[o].cellTemplate='<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>',a.gridOptions.columnDefs[n].cellTemplate='<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'):(a.gridOptions.columnDefs[r].cellTemplate='<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.personDetail({personId : row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>',a.gridOptions.columnDefs[o].cellTemplate='<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.personDetail({personId : row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>',a.gridOptions.columnDefs[n].cellTemplate='<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.personDetail({personId : row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>')})}function g(e,t){if(0===t.length)a.searchParams.sort="",a.searchParams.order="";else switch(a.searchParams.sort=t[0].name,t[0].sort.direction){case r.ASC:a.searchParams.order="ASC";break;case r.DESC:a.searchParams.order="DESC";break;case"undefined":}a.searchPeople()}function h(e){if(a.maxRowSelectable>0&&a.curationShown||a.usedInModal)if(e.isSelected)if(a.selectedRows.length<a.maxRowSelectable)a.selectedRows.unshift(e),a.$parent.selectedPersonsArray.push(e.entity);else{var t=a.selectedRows.pop();t.isSelected=!1,a.nullifiedId=t.entity.id===a.nullifiedId?"":a.nullifiedId,a.selectedRows.unshift(e),a.gridApi.grid.refresh();var i=c.indexOfOrganization(a.$parent.selectedPersonsArray,t.entity);a.$parent.selectedPersonsArray.splice(i,1),a.$parent.selectedPersonsArray.push(e.entity)}else{var r=-1;if(s.each(a.selectedRows,function(t,i){return t.entity.id===e.entity.id?void(r=i):void 0}),r>-1){var o=a.selectedRows.splice(r,1);o[0].isSelected=!1,a.nullifiedId=o[0].entity.id===a.nullifiedId?"":a.nullifiedId,a.curationReady=!1}var i=c.indexOfOrganization(a.$parent.selectedPersonsArray,e.entity);a.$parent.selectedPersonsArray.splice(i,1)}else e.isSelected=!1}function f(){c.getSourceContexts().then(function(e){a.sourceContextArr=e.sort(t.a2zComparator())}),c.getSourceStatuses().then(function(e){a.sourceStatusArr=e.sort(t.a2zComparator())})}function v(){a.gridOptions=e.getGridOptions(),a.gridOptions.isRowSelectable=function(e){var t=e.entity.source_context&&e.entity.source_context.indexOf("CTEP")>-1;return t?!1:!0},a.gridOptions.enableVerticalScrollbar=2,a.gridOptions.enableHorizontalScrollbar=2,a.gridOptions.onRegisterApi=function(e){a.gridApi=e,a.gridApi.core.on.sortChanged(a,g),a.gridApi.pagination.on.paginationChanged(a,function(e,t){a.searchParams.start=e,a.searchParams.rows=t,a.searchPeople()}),a.gridApi.selection.on.rowSelectionChanged(a,h),a.gridApi.selection.on.rowSelectionChangedBatch(a,function(e){s.each(e,function(e,t){h(e)})})},a.toggleCurationMode=function(){a.curationShown=!a.curationShown},a.$watch("curationShown",function(e,t){if(a.gridOptions.columnDefs[0].visible=a.curationShown,e)a.nullifiedId="",a.warningMessage="";else{var i=_();i&&(a.nullifiedId=i.entity.id===a.nullifiedId?"":a.nullifiedId)}e!=t&&a.gridApi.grid.refresh()},!0)}function y(){a.$watch("nullifiedId",function(e,t){b(),a.toBeCurated.id_to_be_nullified=a.nullifiedId,a.selectedRows.length===a.maxRowSelectable&&a.nullifiedId&&s.each(a.selectedRows,function(e){e.entity.id===a.nullifiedId?a.nullifiedPerson=e.entity.lname+", "+e.entity.fname+" ( "+e.entity.id+" )":a.toBeCurated.id_to_be_retained=e.entity.id}),a.toBeCurated.id_to_be_nullified&&a.toBeCurated.id_to_be_retained&&(a.curationReady=!0)},!0)}function b(){a.toBeCurated={id_to_be_nullified:"",id_to_be_retained:""},a.curationReady=!1}function _(){for(var e=null;a.selectedRows.length>0;)e=a.selectedRows.shift(),e.isSelected=!1;return angular.isDefined(a.$parent.selectedPersonsArray)&&(a.$parent.selectedPersonsArray=[]),e}function w(){a.$on(m.CURATION_MODE_CHANGED,function(){S()})}function S(){a.curationShown=o.isCurationModeEnabled()||!1}var D=d.fromState.name||"";a.maxRowSelectable="undefined"===a.maxRowSelectable?Number.MAX_VALUE:a.maxRowSelectable,a.searchParams=e.getInitialPersonSearchParams(),a.sourceContextArr=[],a.sourceStatusArr=[],a.nullifiedId="",a.warningMessage="",a.selectedRows=[],a.curationShown=!1,a.curationModeEnabled=!1,a.dateFormat=n.getFormats()[1],a.dateOptions=n.getDateOptions(),a.startDateOpened="",a.endDateOpened="",a.searchWarningMessage="",console.log("in person search form directive"),a.maxRowSelectable>0?a.curationModeEnabled=!0:a.curationModeEnabled=!1,a.curationModeEnabled="undefined"===a.curationMode?a.curationModeEnabled:a.curationMode,a.usedInModal="undefined"===a.usedInModal?!1:a.usedInModal,a.showGrid="undefined"===a.showGrid?!1:a.showGrid,a.searchPeople=function(r){"fromStart"===r&&(a.searchParams.start=1),a.searchParams.date_range_arr=n.getDateRange(a.searchParams.startDate,a.searchParams.endDate),0===a.searchParams.date_range_arr.length&&delete a.searchParams.date_range_arr;var o=!0,l=["sort","order","rows","start","wc_search"];s.keys(a.searchParams).forEach(function(e){-1===l.indexOf(e)&&""!==a.searchParams[e]&&(o=!1)}),o&&"fromStart"===r?(a.searchWarningMessage="At least one selection value must be entered prior to running the search",a.warningMessage=""):a.searchWarningMessage="",o||e.searchPeople(a.searchParams).then(function(e){a.showGrid&&e.data.people&&(a.gridOptions.data=e.data.people,a.gridOptions.totalItems=e.data.total,s.each(a.selectedRows,function(e,i){var r=e.entity.id,o=t.indexOfObjectInJsonArray(a.gridOptions.data,"id",r);o>-1&&(a.gridOptions.data.splice(o,1),a.gridOptions.totalItems--),a.gridOptions.data.unshift(e.entity),a.gridOptions.totalItems++}),i.hash("people_search_results")),a.$parent.personSearchResults=e.data})["catch"](function(e){console.log("search people failed")})},a.getDateRange=function(e){var t=new Date;switch(e){case"today":a.searchParams.startDate=moment().subtract(0,"days").startOf("day").toDate(),a.searchParams.endDate=moment().subtract(0,"days").endOf("day").toDate();break;case"yesterday":a.searchParams.startDate=moment().subtract(1,"days").startOf("day").toDate(),a.searchParams.endDate=moment().subtract(1,"days").endOf("day").toDate();break;case"last7":a.searchParams.startDate=moment().add(-7,"days").toDate(),a.searchParams.endDate=moment().add(0,"days").toDate();break;case"last30":a.searchParams.startDate=moment().add(-30,"days").toDate(),a.searchParams.endDate=moment().add(0,"days").toDate();break;case"thisMonth":a.searchParams.startDate=moment([t.getFullYear(),t.getMonth()]).toDate(),a.searchParams.endDate=t;break;case"lastMonth":a.searchParams.startDate=moment([t.getFullYear(),t.getMonth()-1]).toDate(),a.searchParams.endDate=moment(t).subtract(1,"months").endOf("month").toDate();break;default:a.searchParams.startDate="",a.searchParams.endDate=""}},a.typeAheadNameSearch=function(){var e=a.searchParams.affiliated_org_name.indexOf("*")>-1?a.searchParams.affiliated_org_name:"*"+a.searchParams.affiliated_org_name+"*";return c.searchOrgs({name:e,source_context:"CTRP"}).then(function(e){var t=[],i=[];return i=e.orgs.map(function(e){return e.name}),t=i.filter(function(e){return-1===t.indexOf(e)})})},a.resetSearch=function(){a.searchParams=e.getInitialPersonSearchParams();var t=a.searchParams.wc_search;a.gridOptions.data=[],a.gridOptions.totalItems=null;var i=["wc_search"];s.keys(a.searchParams).forEach(function(e){-1===i.indexOf(e)&&(a.searchParams[e]="")}),a.searchParams.wc_search=t,a.searchWarningMessage="",angular.isDefined(a.$parent.personSearchResults)&&(a.$parent.personSearchResults={}),angular.isDefined(a.$parent.selectedPersonsArray)&&(a.$parent.selectedPersonsArray=[])},a.rowFormatter=function(e){var t=e.entity.source_context&&e.entity.source_context.indexOf("CTEP")>-1;return t},a.nullifyEntity=function(e){e.nullifiable?e.source_status&&e.source_status.indexOf("Act")>-1?(a.warningMessage="The PO ID: "+e.id+" has an Active source status, nullification is not allowed",a.nullifiedId=""):(a.warningMessage="",a.nullifiedId=e.id||""):a.warningMessage="The PO ID: "+e.id+" has an Active CTEP ID, nullification is prohibited"},a.commitNullification=function(){console.log("tobeCurated: "+JSON.stringify(a.toBeCurated)),e.curatePerson(a.toBeCurated).then(function(e){b(),_(),a.searchPeople(),l.success("Curation was successful","Curated!")})["catch"](function(e){l.error("There was an error in curation","Curation error")})},u(),a.openCalendar=function(e,t){"end"===t?a.endDateOpened=!0:a.startDateOpened=!0}}var f={restrict:"E",scope:{showGrid:"=?",usedInModal:"=?",maxRowSelectable:"=",curationMode:"=?",personSearchResults:"@personSearchResults",selectedPersonsArray:"@selectedPersonsArray"},templateUrl:"app/po/person/directives/advancedPersonSearchFormTemplate.html",link:g,controller:h};return f}angular.module("ctrp.app.po").directive("ctrpAdvancedPersonSearchForm",e),e.$inject=["PersonService","Common","$location","UserService","DateService","uiGridConstants","$timeout","_","toastr","$anchorScroll","OrgService","$compile","MESSAGES","$state"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d,u,m){function p(){w.curOrg.source_context_id=w.curOrg.source_context_id?w.curOrg.source_context_id:t.findContextId(w.sourceContextArr,"name","CTRP"),f(),v(),y(),w.curOrg["new"]||(b(),g()),h()}function g(){for(var e=0;e<w.curOrg.name_aliases.length;e++){var t={};t.id=w.curOrg.name_aliases[e].id,t.name=w.curOrg.name_aliases[e].name,t._destroy=!1,w.addedNameAliases.push(t)}}function h(){var e=angular.copy(w.sourceContextArr);if(w.curOrg["new"])w.curSourceContextName="CTRP",w.ctrpSourceContextIndex=l.indexOfObjectInJsonArray(w.sourceContextArr,"code","CTRP"),w.curOrg.source_context_id=w.ctrpSourceContextIndex>-1?w.sourceContextArr[w.ctrpSourceContextIndex].id:"";else{var t=l.indexOfObjectInJsonArray(e,"id",w.curOrg.source_context_id);w.curSourceContextName=t>-1?w.sourceContextArr[t].name:""}w.sourceContextArr=_.without(w.sourceContextArr,_.findWhere(w.sourceContextArr,{name:"CTEP"})),w.sourceContextArr=_.without(w.sourceContextArr,_.findWhere(w.sourceContextArr,{name:"NLM"})),w.curOrgEditable="CTRP"===w.curSourceContextName||w.curOrg["new"]}function f(){w.curOrg.country?w.watchCountrySelection(w.curOrg.country):(w.curOrg.country="United States",w.watchCountrySelection(w.curOrg.country)),n.$on(a.STATES_AVAIL,function(){w.states=t.getStatesOrProvinces()}),n.$on(a.STATES_UNAVAIL,function(){w.states=[]})}function v(){
u.$current.name.indexOf("add")>-1&&(w.curOrg["new"]=!0)}function y(){if(w.curOrg["new"])w.curOrg.cluster=[{context:"CTRP"}];else for(var e=0;e<w.curOrg.cluster.length;e++)w.curOrg.cluster[e].id==w.curOrg.id&&(w.tabIndex=e)}function b(){w.confirmDelete=function(e){var t=m.open({animation:!0,templateUrl:"delete_confirm_template.html",controller:"ModalInstanceCtrl as vm",size:e,resolve:{orgId:function(){return w.curOrg.id}}});t.result.then(function(e){console.log("about to delete the orgDetail "+w.curOrg.id),u.go("main.organizations")},function(){console.log("operation canceled")})}}var w=this;n.organization_form={},w.addedNameAliases=[],w.numbers=[1,2,3],w.states=[],w.watchCountrySelection=t.watchCountrySelection(),w.countriesArr=s,w.curOrg=e||{name:"",country:"",source_status_id:""},w.masterCopy=angular.copy(w.curOrg),w.sourceContextArr=c,w.sourceStatusArr=d,w.sourceStatusArr.sort(l.a2zComparator());var S=w.curOrg.source_status_id?_.findWhere(w.sourceStatusArr,{id:w.curOrg.source_status_id}):_.findWhere(w.sourceStatusArr,{code:"ACT"});w.curSourceStatusName=S?S.name:"",w.curOrg.source_status_id=S.id,w.alias="",w.curationReady=!1,n.showPhoneWarning=!1,w.updateOrg=function(){w.addedNameAliases.length>0&&(w.curOrg.name_aliases_attributes=[],_.each(w.addedNameAliases,function(e){w.curOrg.name_aliases_attributes.push(e)}));var e={};e["new"]=w.curOrg["new"],e.id=w.curOrg.id,e.organization=w.curOrg,t.upsertOrg(e).then(function(e){w.curOrg["new"]?(w.clearForm(),u.go("main.orgDetail",{orgId:e.id})):(w.curOrg.updated_by=e.updated_by,w.curOrg.updated_at=e.updated_at),w.curOrg["new"]=!1,i.clear(),i.success("Organization "+w.curOrg.name+" has been recorded","Operation Successful!",{extendedTimeOut:1e3,timeOut:0})})["catch"](function(e){console.log("error in updating organization "+JSON.stringify(w.curOrg))})},w.resetForm=function(){angular.copy(w.masterCopy,w.curOrg),w.addedNameAliases=[],g()},w.clearForm=function(){n.organization_form.$setPristine(),w.addedNameAliases=[],w.alias="";var e=["new","ctrp_id","id","state","country","source_status_id","cluster"];Object.keys(w.curOrg).forEach(function(i){-1==e.indexOf(i)&&(w.curOrg[i]=angular.isArray(w.curOrg[i])?[]:""),w.curOrg.source_context_id=t.findContextId(w.sourceContextArr,"name","CTRP")})},w.addNameAlias=function(){if(w.alias){var e=l.indexOfObjectInJsonArray(w.addedNameAliases,"name",w.alias);if(-1==e){var t={name:w.alias,_destroy:!1};w.addedNameAliases.unshift(t)}w.alias=""}},w.toggleSelection=function(e,t){"other_id"==t&&e<w.addedNameAliases.length&&(w.addedNameAliases[e]._destroy=!w.addedNameAliases[e]._destroy)},n.$watch(function(){return w.tabIndex},function(e,i){w.curOrg["new"]||t.getOrgById(w.curOrg.cluster[e].id).then(function(e){w.curOrg=e,f(),w.masterCopy=angular.copy(w.curOrg),w.addedNameAliases=[],g()})["catch"](function(e){console.log("Error in retrieving organization during tab change.")})}),p(),w.checkUniqueOrganization=function(){var i=0;angular.isObject(e)&&(i=w.curOrg.id);var a={org_name:w.curOrg.name,source_context_id:w.curOrg.source_context_id,org_exists:angular.isObject(e),org_id:i};w.showUniqueWarning=!1;t.checkUniqueOrganization(a).then(function(e){w.name_unqiue=e.name_unique,!e.name_unique&&w.curOrg.name.length>0&&(w.showUniqueWarning=!0)})["catch"](function(e){console.log("error in checking for duplicate org name "+JSON.stringify(e))})},w.isValidPhoneNumber=function(){n.IsPhoneValid=isValidNumber(w.curOrg.phone,w.curOrg.country),n.showPhoneWarning=!0,console.log("Is phone valid: "+n.IsPhoneValid)}}angular.module("ctrp.app.po").controller("orgDetailCtrl",e),e.$inject=["orgDetailObj","OrgService","toastr","MESSAGES","UserService","$filter","$scope","countryList","Common","sourceContextObj","sourceStatusObj","$state","$modal"]}(),function(){"use strict";function e(e,t){function i(){}t.orgSearchResults={orgs:[],total:0,start:1,rows:10,sort:"name",order:"asc"},t.selectedOrgsArray=[],i()}angular.module("ctrp.app.po").controller("organizationCtrl",e),e.$inject=["OrgService","$scope"]}(),function(){"use strict";function e(e){e.state("main.organizations",{url:"/organizations",templateUrl:"app/po/organization/organization_list.html",controller:"organizationCtrl as orgsView",ncyBreadcrumb:{parent:"main.defaultContent",label:"Search Organizations"}}).state("main.orgDetail",{url:"/organizations/:orgId",templateUrl:"app/po/organization/orgDetails.html",controller:"orgDetailCtrl as orgDetailView",resolve:{OrgService:"OrgService",sourceContextObj:["OrgService",function(e){return e.getSourceContexts()}],sourceStatusObj:["OrgService",function(e){return console.log("getting source statuses!"),e.getSourceStatuses()}],GeoLocationService:"GeoLocationService",countryList:["GeoLocationService",function(e){return e.getCountryList()}],orgDetailObj:["$stateParams","OrgService",function(e,t){return console.log("getting org by id: "+e.orgId),t.getOrgById(e.orgId)}]},ncyBreadcrumb:{parent:"main.organizations",label:"Organization Detail"}}).state("main.addOrganization",{url:"/new_organization",templateUrl:"app/po/organization/orgDetails.html",controller:"orgDetailCtrl as orgDetailView",resolve:{OrgService:"OrgService",sourceContextObj:["OrgService",function(e){return e.getSourceContexts()}],sourceStatusObj:["OrgService",function(e){return e.getSourceStatuses()}],orgDetailObj:["$q",function(e){var t=e.defer();return t.resolve(null),t.promise}],GeoLocationService:"GeoLocationService",countryList:["GeoLocationService",function(e){return e.getCountryList()}]},ncyBreadcrumb:{parent:"main.organizations",label:"Add Organization"}})}angular.module("ctrp.module.routes").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,i,a){function r(t,i){o.deletionStatus=JSON.stringify(t),a(function(){i>206?e.dismiss("cancel"):e.close("delete")},1500)}var o=this;o.modalTitle="Please confirm",o.deletionStatus="",o.ok=function(){t.deleteOrg(i).then(function(e){console.log("delete data returned: "+JSON.stringify(e)),e.status>206?(o.modalTitle="Deletion failed",r(e.data.family||e.data.person)):(o.modalTitle="Deletion is successful",r("Permanently deleted",e.status))})["catch"](function(e){o.modalTitle="Deletion failed",console.log("failed to delete the organization, error code: "+e.status),r(e.data||"Failed to delete",e.status)})},o.cancel=function(){e.dismiss("cancel")}}angular.module("ctrp.app.po").controller("ModalInstanceCtrl",e),e.$inject=["$modalInstance","OrgService","orgId","$timeout"]}(),function(){"use strict";function e(e,t,i,a,r){function o(e,i,a){t(i.contents())(e)}function n(t,a){t.savedSelection=[],t.showGrid=!0,t.curationMode=!1,t.selectedOrgsArray=[],t.allowOverwrite=void 0==t.allowOverwrite?!0:t.allowOverwrite;var o=!1;console.log("in button controller, use built-in template: "+t.useBuiltInTemplate+", maxRowSelectable:"+t.maxRowSelectable),t.searchOrgs=function(a){if(!o){var n=e.open({animation:!0,templateUrl:"app/po/organization/directives/advanced_org_search_form_modal2.html",controller:"advancedOrgSearchForm2ModalCtrl as advOrgSearchForm2ModalView",size:a,resolve:{maxRowSelectable:function(){return t.maxRowSelectable||"undefined"}}});o=!0,n.result.then(function(e){angular.isArray(e)&&e.length>0&&(t.allowOverwrite?(t.savedSelection=e,t.selectedOrgsArray=e):(i.each(e,function(e,i){-1==r.indexOfObjectInJsonArray(t.savedSelection,"id",e.id)&&t.savedSelection.push(e)}),t.selectedOrgsArray=t.savedSelection)),o=!1},function(){o=!1,console.log("operation canceled")})}},t.toggleSelection=function(e){e<t.savedSelection.length&&t.savedSelection.splice(e,1)},t.batchSelect=function(e){"removeAll"==e&&(t.savedSelection.length=0)}}var s={restrict:"E",scope:{maxRowSelectable:"=?",useBuiltInTemplate:"=?",selectedOrgsArray:"=",allowOverwrite:"="},templateUrl:"app/po/organization/directives/advancedOrgSearchModalButtonTemplate.html",link:o,controller:n};return s}function t(e,t,i){function a(){r(),o()}function r(){e.$watch("orgSearchResults",function(t,i){e.orgSearchResults=t},!0)}function o(){e.$watchCollection("selectedOrgsArray",function(t,i){console.log("In Org search modal, selectedOrgsArray.length: "+e.selectedOrgsArray.length)},!0)}var n=this;n.maxRowSelectable=i||"undefined",e.orgSearchResults={orgs:[],total:0,start:1,rows:10,sort:"name",order:"asc"},e.selectedOrgsArray=[],n.cancel=function(){t.dismiss("canceled")},n.confirmSelection=function(){t.close(e.selectedOrgsArray)},a()}angular.module("ctrp.app.po").controller("advancedOrgSearchForm2ModalCtrl",t).directive("ctrpOrgAdvSearchModalButton",e),t.$inject=["$scope","$modalInstance","maxRowSelectable"],e.$inject=["$uibModal","$compile","_","$timeout","Common"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d,u,m){function p(e,t,i){}function g(c){function d(){p(),b(),"main.orgDetail"!=C?c.resetSearch():c.searchOrgs(),g(),_(),D(),x(),O()}function p(){e.getSourceContexts().then(function(e){e.sort(i.a2zComparator()),c.sourceContexts=e}),e.getSourceStatuses().then(function(e){e&&angular.isArray(e)&&(e.sort(i.a2zComparator()),c.sourceStatuses=e)}),t.getCountryList().then(function(e){c.countries=e})}function g(){c.$watch("searchParams.country",function(e,i){c.states=[],e&&e!=i&&t.getStateListInCountry(e).then(function(e){c.states=e})["catch"](function(e){})},!0)}function h(e,t){if(0===t.length)c.searchParams.sort="",c.searchParams.order="";else switch(c.searchParams.sort=t[0].name,t[0].sort.direction){case n.ASC:c.searchParams.order="ASC";break;case n.DESC:c.searchParams.order="DESC";break;case"undefined":}c.searchOrgs()}function f(t){if(c.maxRowSelectable>0&&c.curationShown||c.usedInModal)if(t.isSelected)if(c.selectedRows.length<c.maxRowSelectable)c.selectedRows.unshift(t),v(t.entity);else{var i=c.selectedRows.pop();i.isSelected=!1,c.nullifiedId=i.entity.id===c.nullifiedId?"":c.nullifiedId,c.selectedRows.unshift(t),c.gridApi.grid.refresh();var a=e.indexOfOrganization(c.$parent.selectedOrgsArray,i.entity);c.$parent.selectedOrgsArray.splice(a,1),y(a),v(t.entity)}else{var r=-1;if(s.each(c.selectedRows,function(e,i){return e.entity.id===t.entity.id?void(r=i):void 0}),r>-1){var o=c.selectedRows.splice(r,1);o[0].isSelected=!1,c.nullifiedId=o[0].entity.id===c.nullifiedId?"":c.nullifiedId,c.curationReady=!1}var a=e.indexOfOrganization(c.$parent.selectedOrgsArray,t.entity);c.$parent.selectedOrgsArray.splice(a,1),y(a)}else t.isSelected=!1}function v(e){angular.isDefined(c.$parent.selectedOrgsArray)&&c.$parent.selectedOrgsArray.push(e)}function y(e){angular.isDefined(c.$parent.selectedOrgsArray)&&e>-1&&c.$parent.selectedOrgsArray.splice(e,1)}function b(){c.gridOptions=e.getGridOptions(c.usedInModal),c.gridOptions.isRowSelectable=function(e){var t=e.entity.source_context&&e.entity.source_context.indexOf("CTEP")>-1;return c.usedInModal?!0:t?!1:!0},c.gridOptions.enableVerticalScrollbar=2,c.gridOptions.enableHorizontalScrollbar=2,c.gridOptions.onRegisterApi=function(e){c.gridApi=e,c.gridApi.core.on.sortChanged(c,h),c.gridApi.pagination.on.paginationChanged(c,function(e,t){c.searchParams.start=e,c.searchParams.rows=t,c.searchOrgs()}),e.selection.on.rowSelectionChanged(c,f),e.selection.on.rowSelectionChangedBatch(c,function(e){s.each(e,function(e,t){f(e)})})},c.toggleCurationMode=function(){c.curationShown=!c.curationShown},c.$watch("curationShown",function(e,t){if(c.gridOptions.columnDefs[0].visible=e,e)for(;c.selectedRows.length>0;){var i=c.selectedRows.pop();i.isSelected=!1,c.nullifiedId=i.entity.id===c.nullifiedId?"":c.nullifiedId}else c.selectedRows=[],c.nullifiedId="",c.warningMessage="";e!=t&&c.gridApi.grid.refresh()})}function _(){c.$watch("nullifiedId",function(e,t){w(),c.toBeCurated.id_to_be_nullified=c.nullifiedId,c.selectedRows.length===c.maxRowSelectable&&c.nullifiedId&&s.each(c.selectedRows,function(e){return e.entity.id!=c.nullifiedId?void(c.toBeCurated.id_to_be_retained=e.entity.id):void 0}),c.toBeCurated.id_to_be_nullified&&c.toBeCurated.id_to_be_retained&&(c.curationReady=!0)},!0)}function w(){c.toBeCurated={id_to_be_nullified:"",id_to_be_retained:""},c.curationReady=!1}function S(){for(var e=null;c.selectedRows.length>0;)e=c.selectedRows.shift(),e.isSelected=!1;return angular.isDefined(c.$parent.selectedOrgsArray)&&(c.$parent.selectedOrgsArray=[]),e}function D(){c.$watch("usedInModal",function(e,t){var a=i.indexOfObjectInJsonArray(c.gridOptions.columnDefs,"name","name");e?a>-1&&(c.gridOptions.columnDefs[a].cellTemplate='<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'):c.gridOptions.columnDefs[a].cellTemplate='<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.orgDetail({orgId : row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'})}function x(){c.$on(o.CURATION_MODE_CHANGED,function(){O()})}function O(){c.curationShown=u.isCurationModeEnabled()||!1}var C=r.fromState.name||"";c.searchParams=e.getInitialOrgSearchParams(),c.watchCountrySelection=e.watchCountrySelection(),c.selectedRows=[],c.sourceContextArr=[],c.sourceStatuses=[],c.nullifiedId="",c.warningMessage="",c.curationShown=!1,c.curationModeEnabled=!1,c.searchWarningMessage="",c.userRole=u.getUserRole()?u.getUserRole().split("_")[1].toLowerCase():"",c.dateFormat=m.getFormats()[1],c.maxRowSelectable="undefined"===c.maxRowSelectable?Number.MAX_VALUE:c.maxRowSelectable,c.maxRowSelectable>0?c.curationModeEnabled=!0:c.curationModeEnabled=!1,c.curationModeEnabled="undefined"===c.curationMode?c.curationModeEnabled:c.curationMode,c.usedInModal="undefined"===c.usedInModal?!1:c.usedInModal,c.showGrid="undefined"===c.showGrid?!1:c.showGrid,c.typeAheadNameSearch=function(){var t=c.searchParams.name.indexOf("*")>-1?c.searchParams.name:"*"+c.searchParams.name+"*";return e.searchOrgs({name:t,source_context:"CTRP"}).then(function(e){var t=[],i=[];return i=e.orgs.map(function(e){return e.name}),t=i.filter(function(e){return-1===t.indexOf(e)})})},c.searchOrgs=function(t){"fromStart"===t&&(c.searchParams.start=1),console.log("In searchOrgs "+JSON.stringify(c.searchParams));var r=!0,o=["rows","alias","start","wc_search"];s.keys(c.searchParams).forEach(function(e){-1===o.indexOf(e)&&""!=c.searchParams[e]&&(r=!1)}),r&&"fromStart"===t?c.searchWarningMessage="At least one selection value must be entered prior to running the search":c.searchWarningMessage="",c.searchParams.date_range_arr=m.getDateRange(c.searchParams.startDate,c.searchParams.endDate),0===c.searchParams.date_range_arr.length&&delete c.searchParams.date_range_arr,r||e.searchOrgs(c.searchParams).then(function(e){console.log("received data for org search: "+JSON.stringify(e)),c.showGrid&&e.orgs&&(c.gridOptions.data=e.orgs,c.gridOptions.totalItems=e.total,console.log("data ..... "+JSON.stringify(e)),s.each(c.selectedRows,function(e,t){var a=e.entity.id,r=i.indexOfObjectInJsonArray(c.gridOptions.data,"id",a);r>-1&&(c.gridOptions.data.splice(r,1),c.gridOptions.totalItems--),c.gridOptions.data.unshift(e.entity),c.gridOptions.totalItems++}),a.hash("org_search_results")),c.$parent.orgSearchResults=e})["catch"](function(e){console.log("error in retrieving orgs: "+JSON.stringify(e))})},c.resetSearch=function(){c.searchParams=e.getInitialOrgSearchParams();var t=c.searchParams.wc_search,i=["alias","wc_search"];Object.keys(c.searchParams).forEach(function(e){-1===i.indexOf(e)&&(c.searchParams[e]="")}),c.searchParams.alias=!0,c.searchParams.wc_search=t,c.$parent.orgSearchResults={},c.gridOptions.data=[],c.gridOptions.totalItems=null,c.searchWarningMessage="",angular.isDefined(c.$parent.orgSearchResults)&&(c.$parent.orgSearchResults={}),angular.isDefined(c.$parent.selectedOrgsArray)&&(c.$parent.selectedOrgsArray=[])},c.nullifyEntity=function(e){var t=e.source_status&&e.source_status.indexOf("Act")>-1,i=e.source_status&&e.source_status.indexOf("Nul")>-1;i||t||!e.nullifiable?(e.nullifiable?t?c.warningMessage="The PO ID: "+e.id+" has an Active source status, nullification is prohibited":c.warningMessage="The PO ID: "+e.id+" was nullified already, nullification is prohibited":c.warningMessage="The PO ID: "+e.id+" has an Active CTEP ID, nullification is prohibited",c.nullifiedId="",c.nullifiedOrgName=""):(c.warningMessage="",c.nullifiedId=e.id||"",c.nullifiedOrgName=e.name)},c.commitNullification=function(){e.curateOrg(c.toBeCurated).then(function(e){w(),S(),c.searchOrgs(),l.success("Curation was successful","Curated!")})["catch"](function(e){l.error("There was an error in curation","Curation error")})},c.rowFormatter=function(e){if(c.usedInModal)return!1;var t=e.entity.source_context&&e.entity.source_context.indexOf("CTEP")>-1;return t},c.openCalendar=function(e,t){"end"===t?c.endDateOpened=!0:c.startDateOpened=!0},c.getDateRange=function(e){var t=new Date;switch(e){case"today":c.searchParams.startDate=t,c.searchParams.endDate=t;break;case"yesterday":c.searchParams.startDate=moment().add(-1,"days").toDate(),c.searchParams.endDate=moment().add(-1,"days").toDate();break;case"last7":c.searchParams.startDate=moment().add(-7,"days").toDate(),c.searchParams.endDate=moment().add(0,"days").toDate();break;case"last30":c.searchParams.startDate=moment().add(-30,"days").toDate(),c.searchParams.endDate=moment().add(0,"days").toDate();break;case"thisMonth":c.searchParams.startDate=moment([t.getFullYear(),t.getMonth()]).toDate(),c.searchParams.endDate=t;break;case"lastMonth":c.searchParams.startDate=moment([t.getFullYear(),t.getMonth()-1]).toDate(),c.searchParams.endDate=moment(t).subtract(1,"months").endOf("month").toDate();break;default:c.searchParams.startDate="",c.searchParams.endDate=""}},d()}var h={restrict:"E",scope:{showGrid:"=?",usedInModal:"=?",maxRowSelectable:"=",curationMode:"=?",orgSearchResults:"@orgSearchResults",selectedOrgsArray:"@selectedOrgsArray"},templateUrl:"app/po/organization/directives/advancedOrgSearchFormTemplate2.html",link:p,controller:g};return h}angular.module("ctrp.app.po").directive("ctrpAdvancedOrgSearchForm2",e),e.$inject=["OrgService","GeoLocationService","Common","$location","$state","MESSAGES","uiGridConstants","_","toastr","$anchorScroll","$compile","UserService","DateService"]}(),function(){"use strict";function e(e,t,i){function a(){r(),o()}function r(){e.$watch("orgSearchResults",function(t,i){e.orgSearchResults=t},!0)}function o(){e.$watch("selectedOrgsArray",function(t,i){console.log("selectedOrgsArray.length: "+e.selectedOrgsArray.length)},!0)}var n=this;e.selectedOrgsArray=[],e.orgSearchResults={orgs:[],total:0,start:1,rows:10,sort:"name",order:"asc"},n.cancel=function(){t.dismiss("cancel")},n.confirmSelection=function(){t.close(e.selectedOrgsArray)},a()}angular.module("ctrp.app.po").controller("advancedOrgSearchModalCtrl",e),e.$inject=["$scope","$modalInstance","$q"]}(),function(){"use strict";function e(e,t,i,a){var r=this;r.modalTitle="Family Memberships for ",t.getFamilyById(i).then(function(e){r.familyName=e.data.name,r.modalTitle=r.modalTitle+r.familyName}),r.close=function(){e.dismiss("cancel")},r.aff_orgs=[],t.getAffiliatedOrgsByFamilyId(i).then(function(e){console.log("received family member orgss: "+JSON.stringify(e.data)),r.aff_orgs=e.data})["catch"](function(e){console.log("error in retrieving family member orgs: "+JSON.stringify(e))})}angular.module("ctrp.app.po").controller("ModalInstanceFamilyMembersCtrl",e),e.$inject=["$modalInstance","FamilyService","familyId","$timeout"]}(),function(){"use strict";function e(e,t,i,a){function r(t,i){o.deletionStatus=JSON.stringify(t),a(function(){i>206?e.dismiss("cancel"):e.close("delete")},2500)}var o=this;o.modalTitle="Please confirm",o.deletionStatus="",o.ok=function(){t.deleteFamily(i).then(function(e){console.log("delete data returned: "+JSON.stringify(e)),o.modalTitle="Deletion is successful",r("Permanently deleted",e.status)})["catch"](function(e){o.modalTitle="Deletion failed",console.log("failed to delete the family, error code: "+e.status),r(e.data||"Failed to delete",e.status)})},o.cancel=function(){e.dismiss("cancel")}}angular.module("ctrp.app.po").controller("ModalInstanceFamilyCtrl",e),e.$inject=["$modalInstance","FamilyService","familyId","$timeout"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d,u){function m(){p(),y.curFamily["new"]||g(),h(),y.curFamily.family_memberships&&y.curFamily.family_memberships.length>0&&v()}function p(){c.$current.name.indexOf("add")>-1&&(y.curFamily["new"]=!0)}function g(){y.curFamily["new"]||(y.confirmDelete=function(e){var t=u.open({animation:!0,templateUrl:"delete_confirm_template.html",controller:"ModalInstanceFamilyCtrl as vm",size:e,resolve:{familyId:function(){return y.curFamily.id}}});t.result.then(function(e){console.log("about to delete the familyDetail "+y.curFamily.id),c.go("main.families")},function(){console.log("operation canceled")})})}function h(){l.$watchCollection(function(){return y.orgsArrayReceiver},function(e,t){_.each(e,function(e,t){-1==d.indexOfObjectInJsonArray(y.savedSelection,"id",e.id)&&y.savedSelection.unshift(o.initSelectedOrg(e))})},!0)}function f(e){var t=[];return _.each(e,function(e){var i={organization_id:e.id,family_relationship_id:e.family_relationship_id,effective_date:e.effective_date,expiration_date:e.expiration_date,id:e.family_membership_id||"",lock_version:e.lock_version,_destroy:e._destroy};t.push(i)}),console.log("log is "+JSON.stringify(t)),t}function v(){var e=function(e,t){o.getOrgById(e.organization_id).then(function(t){var i={id:e.organization_id,name:t.name,ctep_id:t.ctep_id};i.effective_date=n.convertISODateToLocaleDateStr(e.effective_date),i.expiration_date=n.convertISODateToLocaleDateStr(e.expiration_date),i.family_membership_id=e.id,i.family_relationship_id=e.family_relationship_id,i.lock_version=e.lock_version,i._destroy=e._destroy||!1,y.savedSelection.push(i)})["catch"](function(t){console.log("error in retrieving organization name with id: "+e.organization_id)}),t()},t=function(){return y.savedSelection};async.eachSeries(y.curFamily.family_memberships,e,t)}var y=this;y.curFamily=e||{name:""},console.log("familyDetailObj: "+JSON.stringify(e)),y.curFamily=y.curFamily.data||y.curFamily,y.masterCopy=angular.copy(y.curFamily),y.familyStatusArr=i.data,y.familyTypeArr=a.data,y.familyRelationshipArr=null==r?"":r.data,y.orgsArrayReceiver=[],y.savedSelection=[],y.selectedOrgFilter="",y.updateFamily=function(){y.curFamily.family_memberships_attributes=f(y.savedSelection),_.each(y.curFamily.family_memberships_attributes,function(e,t){e.effective_date=e.effective_date?n.convertISODateToLocaleDateStr(e.effective_date):"",e.expiration_date=e.expiration_date?n.convertISODateToLocaleDateStr(e.expiration_date):"",y.curFamily.family_memberships_attributes[t]=e});var e={};e["new"]=y.curFamily["new"]||"",e.id=y.curFamily.id||"",e.family=y.curFamily,t.upsertFamily(e).then(function(e){422==e.status?(s.error("Problem in saving family","Family name has already been taken"),y.curFamily.name=""):(y.curFamily["new"]=!1,y.curFamily.family_memberships=e.data.family_memberships_attributes||[],console.log("response is: "+JSON.stringify(e)),c.go("main.familyDetail",{familyId:e.data.id}),s.success("Family "+y.curFamily.name+" has been recorded","Operation Successful!",{extendedTimeOut:1e3,timeOut:0}))})["catch"](function(e){console.log("error in updating family "+JSON.stringify(y.curFamily))})},y.toggleSelection=function(e){e<y.savedSelection.length&&(y.savedSelection[e]._destroy=!y.savedSelection[e]._destroy)},y.batchSelect=function(e,t){"selectAll"==e?async.each(t,function(e,t){-1==o.indexOfOrganization(y.savedSelection,e)&&y.savedSelection.unshift(o.initSelectedOrg(e)),t()},function(e){e&&console.log("an error occurred when iterating the organizations")}):_.each(y.savedSelection,function(e,t){y.savedSelection[t]._destroy=!0}),console.log("vm.savedSelection.length = "+y.savedSelection.length)},y.dateFormat=n.getFormats()[1],y.dateOptions=n.getDateOptions(),y.today=n.today(),y.openCalendar=function(e,t,i){e.preventDefault(),e.stopPropagation(),"effective"==i?y.savedSelection[t].opened_effective=!y.savedSelection[t].opened_effective:y.savedSelection[t].opened_expiration=!y.savedSelection[t].opened_expiration},y.msg="Hello from a controller method.",y.returnHello=function(){return l.msg},y.clear=function(){y.batchSelect("removeAll"),y.curFamily.family_status_id="",y.curFamily.family_type_id="",y.savedSelection.length=0},y.clearForm=function(){l.family_form.$setPristine();var e=["new"];Object.keys(y.curFamily).forEach(function(t){-1==e.indexOf(t)&&(y.curFamily[t]=angular.isArray(y.curFamily[t])?[]:"")}),y.savedSelection=[],y.curFamily.family_memberships&&y.curFamily.family_memberships.length>0&&v()},y.resetForm=function(){angular.copy(y.masterCopy,y.curFamily),y.savedSelection=[],y.curFamily.family_memberships&&y.curFamily.family_memberships.length>0&&v()},m(),l.checkForNameUniqueness=function(){var i=0;angular.isObject(e)&&(i=y.curFamily.id);var a={family_name:y.curFamily.name,family_exists:angular.isObject(e),family_id:i};console.log("Family name is "+y.curFamily.name),console.log("Family exists? "+angular.isObject(e)),console.log("Family ID "+i),y.showUniqueWarning=!1;t.checkUniqueFamily(a).then(function(e){y.name_unqiue=e.name_unique,!e.name_unique&&y.curFamily.name.length>0&&(y.showUniqueWarning=!0),console.log("Is Famiily name unique: "+y.name_unqiue),console.log("Response is "+JSON.stringify(e))})["catch"](function(e){console.log("error in checking for duplicate family name "+JSON.stringify(e))})}}angular.module("ctrp.app.po").controller("familyDetailCtrl",e),e.$inject=["familyDetailObj","FamilyService","familyStatusObj","familyTypeObj","familyRelationshipObj","OrgService","DateService","toastr","$scope","$state","Common","$modal"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c){function d(){}function u(e,i){if(0==i.length)console.log("removing sorting"),m.searchParams.sort="",m.searchParams.order="";else switch(m.searchParams.sort=i[0].name,i[0].sort.direction){case t.ASC:m.searchParams.order="ASC";break;case t.DESC:m.searchParams.order="DESC";break;case void 0:}m.searchFamilies()}var m=this;m.searchParams=e.getInitialFamilySearchParams(),m.familyStatusArr=o.data,m.familyStatusArr.sort(r.a2zComparator()),m.familyTypeArr=n.data,m.familyTypeArr.sort(r.a2zComparator()),m.gridScope=m,m.searchWarningMessage="",m.gridOptions=e.getGridOptions(),m.gridOptions.enableVerticalScrollbar=t.scrollbars.NEVER,m.gridOptions.enableHorizontalScrollbar=t.scrollbars.NEVER,m.gridOptions.onRegisterApi=function(e){m.gridApi=e,m.gridApi.core.on.sortChanged(i,u),m.gridApi.pagination.on.paginationChanged(i,function(e,t){m.searchParams.start=e,m.searchParams.rows=t,m.searchFamilies()})},m.searchFamilies=function(t){"fromStart"==t&&(m.searchParams.start=1);var i=!0,a=["sort","order","rows","start","wc_search"];Object.keys(m.searchParams).forEach(function(e){-1==a.indexOf(e)&&""!=m.searchParams[e]&&(i=!1)}),i&&"fromStart"==t?m.searchWarningMessage="At least one selection value must be entered prior to running the search":m.searchWarningMessage="",console.log("search params are  "+JSON.stringify(m.searchParams)),console.log("isEmptySearch is "+i),i||e.searchFamilies(m.searchParams).then(function(e){console.log("received search results: "+JSON.stringify(e.data)),m.gridOptions.data=e.data.families,m.gridOptions.totalItems=e.data.total,l.hash("family_search_results")})["catch"](function(e){console.log("search people failed")})},m.resetSearch=function(){m.searchParams=e.getInitialFamilySearchParams();var t=m.searchParams.wc_search,i=["wc_search"];Object.keys(m.searchParams).forEach(function(e,t){-1==i.indexOf(e)&&(m.searchParams[e]="")}),m.searchParams.wc_search=t,m.gridOptions.data.length=0,m.gridOptions.totalItems=null,m.searchWarningMessage=""},d()}angular.module("ctrp.app.po").controller("familyCtrl",e),e.$inject=["FamilyService","uiGridConstants","$scope","$rootScope","Common","familyStatusObj","familyTypeObj","$modal","$location","$anchorScroll"]}(),function(){"use strict";function e(e){e.state("main.families",{url:"/families",templateUrl:"app/po/family/family_list.html",controller:"familyCtrl as familyView",resolve:{FamilyService:"FamilyService",familyStatusObj:["FamilyService",function(e){return e.getFamilyStatuses()}],familyTypeObj:["FamilyService",function(e){return e.getFamilyTypes()}]},ncyBreadcrumb:{parent:"main.defaultContent",label:"Search Families"}}).state("main.familyDetail",{url:"/families/:familyId",templateUrl:"app/po/family/familyDetails.html",controller:"familyDetailCtrl as familyDetailView",resolve:{FamilyService:"FamilyService",familyStatusObj:["FamilyService",function(e){return e.getFamilyStatuses()}],familyTypeObj:["FamilyService",function(e){return e.getFamilyTypes()}],familyDetailObj:["$stateParams","FamilyService",function(e,t){return t.getFamilyById(e.familyId)}],familyRelationshipObj:["FamilyService",function(e){return e.getFamilyRelationships()}]},ncyBreadcrumb:{parent:"main.families",label:"Family Detail"}}).state("main.addFamily",{url:"/new_family",templateUrl:"app/po/family/familyDetails.html",controller:"familyDetailCtrl as familyDetailView",resolve:{FamilyService:"FamilyService",familyStatusObj:["FamilyService",function(e){return e.getFamilyStatuses()}],familyTypeObj:["FamilyService",function(e){return e.getFamilyTypes()}],familyDetailObj:["$q",function(e){var t=e.defer();return t.resolve(null),t.promise}],familyRelationshipObj:["FamilyService",function(e){return e.getFamilyRelationships()}]},ncyBreadcrumb:{parent:"main.families",label:"Add Family"}})}angular.module("ctrp.module.routes").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";angular.module("ctrp.app.pa.trial",["ngTouch","ngAnimate","ngSanitize","ctrp.module.routes","ctrp.module.constants","ctrp.module.common","ctrp.module.underscoreWrapper","LocalCacheModule","ctrpApp.widgets","ctrp.module.dataservices","ctrp.module.validators","ui.bootstrap","ngMaterial","toastr","ngFileUpload","angularMoment","ui.grid","ui.grid.pagination","ui.grid.selection","ui.scrollpoint"])}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d,u,m,p,g,h,f,v,y,b,w,S,D,x,O,C,A){function P(){I(),T(),k(),Z.curTrial["new"]?(Z.curTrial.pilot="No",Z.curTrial.grant_question="Yes",E()):(V(),R(),M(),F(),N(),$(),L(),U(),j(),z(),H(),q())}function I(){c.$current.name.indexOf("add")>-1&&(Z.curTrial["new"]=!0)}function T(){Z.curTrial["new"]?"EXP"==Z.studySourceCode&&(Z.isExp=!0):Z.curTrial.study_source&&"EXP"==Z.curTrial.study_source.code&&(Z.isExp=!0)}function k(){if(!Z.isExp)for(var e=Z.trialStatusArr.length-1;e>=0;e--)("AVA"==Z.trialStatusArr[e].code||"NLA"==Z.trialStatusArr[e].code||"TNA"==Z.trialStatusArr[e].code||"AFM"==Z.trialStatusArr[e].code)&&Z.trialStatusArr.splice(e,1)}function V(){Z.curTrial.start_date=i.convertISODateToLocaleDateStr(Z.curTrial.start_date),Z.curTrial.primary_comp_date=i.convertISODateToLocaleDateStr(Z.curTrial.primary_comp_date),Z.curTrial.comp_date=i.convertISODateToLocaleDateStr(Z.curTrial.comp_date)}function E(){_.each(Z.studySourceArr,function(e){e.code==Z.studySourceCode&&(Z.curTrial.study_source_id=e.id)})}function R(){Z.curTrial.lead_org_id&&a(function(){Z.selectedLoArray.push(Z.curTrial.lead_org)},1500),Z.curTrial.pi_id&&a(function(){Z.selectedPiArray.push(Z.curTrial.pi)},1500),Z.curTrial.sponsor_id&&a(function(){Z.selectedSponsorArray.push(Z.curTrial.sponsor)},1500),Z.curTrial.investigator_id&&a(function(){Z.selectedInvArray.push(Z.curTrial.investigator)},1500),Z.curTrial.investigator_aff_id&&a(function(){Z.selectedIaArray.push(Z.curTrial.investigator_aff)},1500)}function M(){var e=Z.primaryPurposeArr.filter(B);e[0].id==Z.curTrial.primary_purpose_id&&(Z.showPrimaryPurposeOther=!0)}function F(){var e=Z.secondaryPurposeArr.filter(B);e[0].id==Z.curTrial.secondary_purpose_id&&(Z.showSecondaryPurposeOther=!0)}function N(){var e=Z.responsiblePartyArr.filter(W),t=Z.responsiblePartyArr.filter(G);e[0].id==Z.curTrial.responsible_party_id?(Z.showInvestigator=!0,Z.showInvSearchBtn=!1):t[0].id==Z.curTrial.responsible_party_id&&(Z.showInvestigator=!0)}function $(){for(var e=0;e<Z.curTrial.other_ids.length;e++){var t={};t.id=Z.curTrial.other_ids[e].id,
t.protocol_id_origin_id=Z.curTrial.other_ids[e].protocol_id_origin_id,_.each(Z.protocolIdOriginArr,function(i){i.id==Z.curTrial.other_ids[e].protocol_id_origin_id&&(t.protocol_id_origin_name=i.name)}),t.protocol_id=Z.curTrial.other_ids[e].protocol_id,t._destroy=!1,Z.addedOtherIds.push(t)}}function L(){for(var e=0;e<Z.curTrial.trial_funding_sources.length;e++){var t={};t.id=Z.curTrial.trial_funding_sources[e].id,t.organization_id=Z.curTrial.trial_funding_sources[e].organization_id,_.each(Z.curTrial.funding_sources,function(e){t.organization_id==e.id&&(t.organization_name=e.name)}),t._destroy=!1,Z.addedFses.push(t)}}function U(){for(var e=0;e<Z.curTrial.grants.length;e++){var t={};t.id=Z.curTrial.grants[e].id,t.funding_mechanism=Z.curTrial.grants[e].funding_mechanism,t.institute_code=Z.curTrial.grants[e].institute_code,t.serial_number=Z.curTrial.grants[e].serial_number,t.nci=Z.curTrial.grants[e].nci,t._destroy=!1,Z.addedGrants.push(t)}}function j(){for(var e=0;e<Z.curTrial.trial_status_wrappers.length;e++){var t={};t.id=Z.curTrial.trial_status_wrappers[e].id,t.status_date=i.convertISODateToLocaleDateStr(Z.curTrial.trial_status_wrappers[e].status_date),t.trial_status_id=Z.curTrial.trial_status_wrappers[e].trial_status_id,_.each(Z.trialStatusArr,function(i){i.id==Z.curTrial.trial_status_wrappers[e].trial_status_id&&(t.trial_status_name=i.name)}),t.why_stopped=Z.curTrial.trial_status_wrappers[e].why_stopped,t._destroy=!1,Z.addedStatuses.push(t)}}function z(){for(var e=0;e<Z.curTrial.ind_ides.length;e++){var t={};t.id=Z.curTrial.ind_ides[e].id,t.ind_ide_type=Z.curTrial.ind_ides[e].ind_ide_type,t.ind_ide_number=Z.curTrial.ind_ides[e].ind_ide_number,t.grantor=Z.curTrial.ind_ides[e].grantor,t.holder_type_id=Z.curTrial.ind_ides[e].holder_type_id,_.each(Z.holderTypeArr,function(i){i.id==Z.curTrial.ind_ides[e].holder_type_id&&(t.holder_type_name=i.name)}),t.nih_nci=Z.curTrial.ind_ides[e].id.nih_nci,t.expanded_access=Z.curTrial.ind_ides[e].expanded_access,t.expanded_access_type_id=Z.curTrial.ind_ides[e].expanded_access_type_id,_.each(Z.expandedAccessTypeArr,function(i){i.id==Z.curTrial.ind_ides[e].expanded_access_type_id&&(t.expanded_access_type_name=i.name)}),t.exempt=Z.curTrial.ind_ides[e].exempt,t._destroy=!1,Z.addedIndIdes.push(t)}}function H(){for(var e=0;e<Z.curTrial.oversight_authorities.length;e++){var t={};t.id=Z.curTrial.oversight_authorities[e].id,t.country=Z.curTrial.oversight_authorities[e].country,t.organization=Z.curTrial.oversight_authorities[e].organization,t._destroy=!1,Z.addedAuthorities.push(t)}}function q(){for(var e=0;e<Z.curTrial.trial_documents.length;e++){var t={};t.id=Z.curTrial.trial_documents[e].id,t.file_name=Z.curTrial.trial_documents[e].file_name,t.document_type=Z.curTrial.trial_documents[e].document_type,t.document_subtype=Z.curTrial.trial_documents[e].document_subtype,t._destroy=Z.curTrial.trial_documents[e]._destroy,Z.addedDocuments.push(t),"Protocol Document"===Z.curTrial.trial_documents[e].document_type?Z.protocolDocNum++:"IRB Approval"===Z.curTrial.trial_documents[e].document_type&&Z.irbApprovalNum++}}function B(e){return"OTH"==e.code?!0:!1}function W(e){return"PI"==e.code?!0:!1}function G(e){return"SI"==e.code?!0:!1}function J(e){return"TCA"==e.code||"CAI"==e.code||"ACO"==e.code||"WIT"==e.code?!0:!1}function Y(e){return"NCI"==e.code?!0:!1}function K(e){return"NIH"==e.code?!0:!1}function X(e){Z.protocol_document&&t.uploadDocument(e,"Protocol Document","",Z.protocol_document),Z.irb_approval&&t.uploadDocument(e,"IRB Approval","",Z.irb_approval),Z.participating_sites&&t.uploadDocument(e,"List of Participating Sites","",Z.participating_sites),Z.informed_consent&&t.uploadDocument(e,"Informed Consent","",Z.informed_consent);for(var i in Z.other_documents){var a=i in Z.other_document_subtypes?Z.other_document_subtypes[i]:"";t.uploadDocument(e,"Other Document",a,Z.other_documents[i])}}var Z=this;Z.curTrial=e||{lead_protocol_id:""},Z.curTrial=Z.curTrial.data||Z.curTrial,Z.accordions=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],Z.collapsed=!1,Z.studySourceCode=u,Z.isExp=!1,Z.studySourceArr=m,Z.protocolIdOriginArr=p,Z.phaseArr=g,Z.researchCategoryArr=h,Z.primaryPurposeArr=f,Z.secondaryPurposeArr=v,Z.accrualDiseaseTermArr=y,Z.responsiblePartyArr=b,Z.fundingMechanismArr=w,Z.instituteCodeArr=S,Z.nciArr=D,Z.trialStatusArr=x,Z.grantorArr=[],Z.holderTypeArr=O,Z.nihNciArr=[],Z.expandedAccessTypeArr=C,Z.countryArr=A,Z.authorityOrgArr=[],Z.status_date_opened=!1,Z.start_date_opened=!1,Z.primary_comp_date_opened=!1,Z.comp_date_opened=!1,Z.addedOtherIds=[],Z.addedFses=[],Z.addedGrants=[],Z.addedStatuses=[],Z.addedIndIdes=[],Z.addedAuthorities=[],Z.addedDocuments=[],Z.selectedLoArray=[],Z.selectedPiArray=[],Z.selectedSponsorArray=[],Z.selectedInvArray=[],Z.selectedIaArray=[],Z.selectedFsArray=[],Z.showPrimaryPurposeOther=!1,Z.showSecondaryPurposeOther=!1,Z.showInvestigator=!1,Z.showInvSearchBtn=!0,Z.why_stopped_disabled=!0,Z.otherDocNum=1,Z.protocolDocNum=0,Z.irbApprovalNum=0,Z.showLpiError=!1,Z.updateTrial=function(e){Z.selectedLoArray.length>0?Z.curTrial.lead_org_id=Z.selectedLoArray[0].id:Z.curTrial.lead_org_id=null,Z.selectedPiArray.length>0?Z.curTrial.pi_id=Z.selectedPiArray[0].id:Z.curTrial.pi_id=null,Z.selectedSponsorArray.length>0?Z.curTrial.sponsor_id=Z.selectedSponsorArray[0].id:Z.curTrial.sponsor_id=null,Z.selectedInvArray.length>0?Z.curTrial.investigator_id=Z.selectedInvArray[0].id:Z.curTrial.investigator_id=null,Z.selectedIaArray.length>0?Z.curTrial.investigator_aff_id=Z.selectedIaArray[0].id:Z.curTrial.investigator_aff_id=null,Z.addedOtherIds.length>0&&(Z.curTrial.other_ids_attributes=[],_.each(Z.addedOtherIds,function(e){Z.curTrial.other_ids_attributes.push(e)})),Z.addedFses.length>0&&(Z.curTrial.trial_funding_sources_attributes=[],_.each(Z.addedFses,function(e){Z.curTrial.trial_funding_sources_attributes.push(e)})),Z.addedGrants.length>0&&(Z.curTrial.grants_attributes=[],_.each(Z.addedGrants,function(e){Z.curTrial.grants_attributes.push(e)})),Z.addedStatuses.length>0&&(Z.curTrial.trial_status_wrappers_attributes=[],_.each(Z.addedStatuses,function(e){Z.curTrial.trial_status_wrappers_attributes.push(e)})),Z.addedIndIdes.length>0&&(Z.curTrial.ind_ides_attributes=[],_.each(Z.addedIndIdes,function(e){Z.curTrial.ind_ides_attributes.push(e)})),Z.addedAuthorities.length>0&&(Z.curTrial.oversight_authorities_attributes=[],_.each(Z.addedAuthorities,function(e){Z.curTrial.oversight_authorities_attributes.push(e)})),Z.addedDocuments.length>0&&(Z.curTrial.trial_documents_attributes=[],_.each(Z.addedDocuments,function(e){e._destroy&&Z.curTrial.trial_documents_attributes.push(e)})),"draft"==e?Z.curTrial.is_draft=!0:Z.curTrial.is_draft=!1;var i={};i["new"]=Z.curTrial["new"],i.id=Z.curTrial.id,i.trial=Z.curTrial,t.upsertTrial(i).then(function(e){e.server_response.status<300&&(X(e.id),c.go("main.trials",null,{reload:!0}),r.success("Trial "+Z.curTrial.lead_protocol_id+" has been recorded","Operation Successful!"))})["catch"](function(e){console.log("error in updating trial "+JSON.stringify(i))})},Z.saveDraft=function(){n.trial_form.lead_protocol_id.$error.required?(Z.showLpiError=!0,s.scrollTo(0,0)):Z.updateTrial("draft")},Z.collapseAccordion=function(){Z.accordions=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],Z.collapsed=!0},Z.expandAccordion=function(){Z.accordions=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],Z.collapsed=!1},Z.reload=function(){c.go(c.$current,null,{reload:!0})},Z.toggleSelection=function(e,t){"other_id"==t?e<Z.addedOtherIds.length&&(Z.addedOtherIds[e]._destroy=!Z.addedOtherIds[e]._destroy):"funding_source"==t?e<Z.addedFses.length&&(Z.addedFses[e]._destroy=!Z.addedFses[e]._destroy):"grant"==t?e<Z.addedGrants.length&&(Z.addedGrants[e]._destroy=!Z.addedGrants[e]._destroy):"trial_status"==t?e<Z.addedStatuses.length&&(Z.addedStatuses[e]._destroy=!Z.addedStatuses[e]._destroy):"ind_ide"==t?e<Z.addedIndIdes.length&&(Z.addedIndIdes[e]._destroy=!Z.addedIndIdes[e]._destroy):"authority"==t?e<Z.addedAuthorities.length&&(Z.addedAuthorities[e]._destroy=!Z.addedAuthorities[e]._destroy):"document"==t&&e<Z.addedDocuments.length&&(Z.addedDocuments[e]._destroy=!Z.addedDocuments[e]._destroy,"Protocol Document"===Z.addedDocuments[e].document_type?Z.addedDocuments[e]._destroy?Z.protocolDocNum--:Z.protocolDocNum++:"IRB Approval"===Z.addedDocuments[e].document_type&&(Z.addedDocuments[e]._destroy?Z.irbApprovalNum--:Z.irbApprovalNum++))},Z.dateFormat=i.getFormats()[1],Z.dateOptions=i.getDateOptions(),Z.today=i.today(),Z.openCalendar=function(e,t){e.preventDefault(),e.stopPropagation(),"status_date"==t?Z.status_date_opened=!Z.status_date_opened:"start_date"==t?Z.start_date_opened=!Z.start_date_opened:"primary_comp_date"==t?Z.primary_comp_date_opened=!Z.primary_comp_date_opened:"comp_date"==t&&(Z.comp_date_opened=!Z.comp_date_opened)},Z.addOtherId=function(){if(Z.protocol_id_origin_id&&Z.protocol_id){var e={};e.protocol_id_origin_id=Z.protocol_id_origin_id,_.each(Z.protocolIdOriginArr,function(t){t.id==Z.protocol_id_origin_id&&(e.protocol_id_origin_name=t.name)}),e.protocol_id=Z.protocol_id,e._destroy=!1,Z.addedOtherIds.push(e)}else alert("Please select a Protocol ID Origin and enter a Protocol ID")},Z.addGrant=function(){if(Z.funding_mechanism&&Z.institute_code&&Z.serial_number&&Z.nci){var e={};e.funding_mechanism=Z.funding_mechanism,e.institute_code=Z.institute_code,e.serial_number=Z.serial_number,e.nci=Z.nci,e._destroy=!1,Z.addedGrants.push(e)}else alert("Please select a Funding Mechanism, Institute Code, enter a Serial Number and select a NCI Division/Program Code")},Z.addStatus=function(){if(Z.status_date&&Z.trial_status_id){var e={};e.status_date=i.convertISODateToLocaleDateStr(Z.status_date),e.trial_status_id=Z.trial_status_id,_.each(Z.trialStatusArr,function(t){t.id==Z.trial_status_id&&(e.trial_status_name=t.name)}),e.why_stopped=Z.why_stopped,e._destroy=!1,Z.addedStatuses.push(e)}else alert("Please provide a Status Date and select a Status")},Z.addIndIde=function(){if(Z.ind_ide_type&&Z.ind_ide_number&&Z.grantor&&Z.holder_type_id){var e={};e.ind_ide_type=Z.ind_ide_type,e.ind_ide_number=Z.ind_ide_number,e.grantor=Z.grantor,e.holder_type_id=Z.holder_type_id,_.each(Z.holderTypeArr,function(t){t.id==Z.holder_type_id&&(e.holder_type_name=t.name)}),e.nih_nci=Z.nih_nci,e.expanded_access=Z.expanded_access,e.expanded_access_type_id=Z.expanded_access_type_id,_.each(Z.expandedAccessTypeArr,function(t){t.id==Z.expanded_access_type_id&&(e.expanded_access_type_name=t.name)}),e.exempt=Z.exempt,e._destroy=!1,Z.addedIndIdes.push(e)}else alert("Please select an IND/IDE Type, enter an IND/IDE Number, select an IND/IDE Grantor and IND/IDE Holder Type")},Z.addAuthority=function(){if(Z.authority_country&&Z.authority_org){var e={};e.country=Z.authority_country,e.organization=Z.authority_org,e._destroy=!1,Z.addedAuthorities.push(e)}else alert("Please select a Country and Organization")},n.$watch(function(){return Z.selectedFsArray.length},function(e,t){if(e==t+1){var i={};i.organization_id=Z.selectedFsArray[Z.selectedFsArray.length-1].id,i.organization_name=Z.selectedFsArray[Z.selectedFsArray.length-1].name,i._destroy=!1,Z.addedFses.push(i)}}),n.$watch(function(){return Z.selectedPiArray},function(e,t){var i=Z.responsiblePartyArr.filter(W);i[0].id==Z.curTrial.responsible_party_id&&(Z.selectedInvArray=Z.selectedPiArray)}),n.$watch(function(){return Z.selectedSponsorArray},function(e,t){var i=Z.responsiblePartyArr.filter(G);i[0].id==Z.curTrial.responsible_party_id&&(Z.selectedIaArray=Z.selectedSponsorArray)}),n.$watch(function(){return Z.curTrial.intervention_indicator},function(e,t){"No"==e&&(Z.curTrial.sec801_indicator="No")}),Z.watchOption=function(e){if("primary_purpose"==e){var i=Z.primaryPurposeArr.filter(B);i[0].id==Z.curTrial.primary_purpose_id?Z.showPrimaryPurposeOther=!0:(Z.showPrimaryPurposeOther=!1,Z.curTrial.primary_purpose_other="")}else if("secondary_purpose"==e){var i=Z.secondaryPurposeArr.filter(B);i[0].id==Z.curTrial.secondary_purpose_id?Z.showSecondaryPurposeOther=!0:(Z.showSecondaryPurposeOther=!1,Z.curTrial.secondary_purpose_other="")}else if("responsible_party"==e){var a=Z.responsiblePartyArr.filter(W),r=Z.responsiblePartyArr.filter(G);a[0].id==Z.curTrial.responsible_party_id?(Z.showInvestigator=!0,Z.showInvSearchBtn=!1,Z.curTrial.investigator_title="Principal Investigator",Z.selectedInvArray=Z.selectedPiArray,Z.selectedIaArray=Z.selectedLoArray):r[0].id==Z.curTrial.responsible_party_id?(Z.showInvestigator=!0,Z.showInvSearchBtn=!0,Z.curTrial.investigator_title="Principal Investigator",Z.selectedInvArray=Z.selectedPiArray,Z.selectedIaArray=Z.selectedSponsorArray):(Z.showInvestigator=!1,Z.curTrial.investigator_title="",Z.selectedInvArray=[],Z.selectedIaArray=[])}else if("trial_status"==e)for(var o=Z.trialStatusArr.filter(J),n=0;n<o.length;n++){if(o[n].id==Z.trial_status_id){Z.why_stopped_disabled=!1;break}Z.why_stopped_disabled=!0}else if("ind_ide_type"==e)Z.grantor="","IND"==Z.ind_ide_type?Z.grantorArr=["CDER","CBER"]:"IDE"==Z.ind_ide_type?Z.grantorArr=["CDRH","CBER"]:Z.grantorArr=[];else if("holder_type"==e){Z.nih_nci="";var s=Z.holderTypeArr.filter(Y),l=Z.holderTypeArr.filter(K);s[0].id==Z.holder_type_id?t.getNci().then(function(e){Z.nihNciArr=e})["catch"](function(e){console.log("Error in retrieving NCI Division/Program code.")}):l[0].id==Z.holder_type_id?t.getNih().then(function(e){Z.nihNciArr=e})["catch"](function(e){console.log("Error in retrieving NIH Institution code.")}):Z.nihNciArr=[]}else"authority_country"==e&&(Z.authority_org="",Z.authorityOrgArr=t.getAuthorityOrgArr(Z.authority_country))},Z.getNumArr=function(e){return new Array(e)},Z.addOtherDoc=function(){Z.otherDocNum++},P()}angular.module("ctrp.app.pa.trial").controller("trialDetailCtrl",e),e.$inject=["trialDetailObj","TrialService","DateService","$timeout","toastr","MESSAGES","$scope","$window","Common","$state","$modal","studySourceCode","studySourceObj","protocolIdOriginObj","phaseObj","researchCategoryObj","primaryPurposeObj","secondaryPurposeObj","accrualDiseaseTermObj","responsiblePartyObj","fundingMechanismObj","instituteCodeObj","nciObj","trialStatusObj","holderTypeObj","expandedAccessTypeObj","countryList"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d){function u(){}function m(e,i){if(0==i.length)console.log("removing sorting"),p.searchParams.sort="",p.searchParams.order="";else switch(p.searchParams.sort=i[0].name,i[0].sort.direction){case t.ASC:p.searchParams.order="ASC";break;case t.DESC:p.searchParams.order="DESC";break;case void 0:}p.searchTrials()}var p=this;p.searchParams=e.getInitialTrialSearchParams(),p.studySourceArr=l,p.phaseArr=c,p.primaryPurposeArr=d,p.gridScope=p,p.gridOptions=e.getGridOptions(),p.gridOptions.enableVerticalScrollbar=t.scrollbars.NEVER,p.gridOptions.enableHorizontalScrollbar=t.scrollbars.NEVER,p.gridOptions.onRegisterApi=function(e){p.gridApi=e,p.gridApi.core.on.sortChanged(i,m),p.gridApi.pagination.on.paginationChanged(i,function(e,t){p.searchParams.start=e,p.searchParams.rows=t,p.searchTrials()})},p.searchTrials=function(){e.searchTrials(p.searchParams).then(function(e){p.gridOptions.data=e.trials,p.gridOptions.totalItems=e.total,n.hash("trial_search_results")})["catch"](function(e){console.log("search trial failed")})},p.resetSearch=function(){Object.keys(p.searchParams).forEach(function(e,t){p.searchParams[e]=""}),p.gridOptions.data.length=0,p.gridOptions.totalItems=null},u()}angular.module("ctrp.app.pa.trial").controller("trialCtrl",e),e.$inject=["TrialService","uiGridConstants","$scope","$rootScope","Common","$modal","$location","$anchorScroll","studySourceObj","phaseObj","primaryPurposeObj"]}(),function(){"use strict";function e(e){e.state("main.trials",{url:"/trials",templateUrl:"app/pa/trial/registration/trial_list.html",controller:"trialCtrl as trialView",resolve:{TrialService:"TrialService",studySourceObj:["TrialService",function(e){return e.getStudySources()}],phaseObj:["TrialService",function(e){return e.getPhases()}],primaryPurposeObj:["TrialService",function(e){return e.getPrimaryPurposes()}]},ncyBreadcrumb:{parent:"main.defaultContent",label:"Search Trials"}}).state("main.addTrial",{url:"/new_trial/:studySourceCode",templateUrl:"app/pa/trial/registration/trialDetails.html",controller:"trialDetailCtrl as trialDetailView",resolve:{TrialService:"TrialService",trialDetailObj:["$q",function(e){var t=e.defer();return t.resolve(null),t.promise}],studySourceCode:["$stateParams",function(e){return e.studySourceCode}],studySourceObj:["TrialService",function(e){return e.getStudySources()}],protocolIdOriginObj:["TrialService",function(e){return e.getProtocolIdOrigins()}],phaseObj:["TrialService",function(e){return e.getPhases()}],researchCategoryObj:["TrialService",function(e){return e.getResearchCategories()}],primaryPurposeObj:["TrialService",function(e){return e.getPrimaryPurposes()}],secondaryPurposeObj:["TrialService",function(e){return e.getSecondaryPurposes()}],accrualDiseaseTermObj:["TrialService",function(e){return e.getAccrualDiseaseTerms()}],responsiblePartyObj:["TrialService",function(e){return e.getResponsibleParties()}],fundingMechanismObj:["TrialService",function(e){return e.getFundingMechanisms()}],instituteCodeObj:["TrialService",function(e){return e.getInstituteCodes()}],nciObj:["TrialService",function(e){return e.getNci()}],trialStatusObj:["TrialService",function(e){return e.getTrialStatuses()}],holderTypeObj:["TrialService",function(e){return e.getHolderTypes()}],expandedAccessTypeObj:["TrialService",function(e){return e.getExpandedAccessTypes()}],GeoLocationService:"GeoLocationService",countryList:["GeoLocationService",function(e){return e.getCountryList()}]},ncyBreadcrumb:{parent:"main.trials",label:"Register Trial"}}).state("main.trialDetail",{url:"/trials/:trialId",templateUrl:"app/pa/trial/registration/trialDetails.html",controller:"trialDetailCtrl as trialDetailView",resolve:{TrialService:"TrialService",trialDetailObj:["$stateParams","TrialService",function(e,t){return t.getTrialById(e.trialId)}],studySourceCode:function(){return""},studySourceObj:["TrialService",function(e){return e.getStudySources()}],protocolIdOriginObj:["TrialService",function(e){return e.getProtocolIdOrigins()}],phaseObj:["TrialService",function(e){return e.getPhases()}],researchCategoryObj:["TrialService",function(e){return e.getResearchCategories()}],primaryPurposeObj:["TrialService",function(e){return e.getPrimaryPurposes()}],secondaryPurposeObj:["TrialService",function(e){return e.getSecondaryPurposes()}],accrualDiseaseTermObj:["TrialService",function(e){return e.getAccrualDiseaseTerms()}],responsiblePartyObj:["TrialService",function(e){return e.getResponsibleParties()}],fundingMechanismObj:["TrialService",function(e){return e.getFundingMechanisms()}],instituteCodeObj:["TrialService",function(e){return e.getInstituteCodes()}],nciObj:["TrialService",function(e){return e.getNci()}],trialStatusObj:["TrialService",function(e){return e.getTrialStatuses()}],holderTypeObj:["TrialService",function(e){return e.getHolderTypes()}],expandedAccessTypeObj:["TrialService",function(e){return e.getExpandedAccessTypes()}],GeoLocationService:"GeoLocationService",countryList:["GeoLocationService",function(e){return e.getCountryList()}]},ncyBreadcrumb:{parent:"main.trials",label:"Trial Detail"}})}angular.module("ctrp.module.routes").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";angular.module("ctrp.app.pa",["ctrp.app.pa.trial"])}(),function(){"use strict";angular.module("ctrpApp.widgets",["ngTouch","ngAnimate","ngSanitize","ngMaterial","ngMdIcons","angularMoment","angularUtils.directives.dirPagination","ctrp.module.dataservices","ctrp.module.common","ctrp.module.constants","ctrp.module.PromiseTimeoutService"])}(),function(){"use strict";function e(){var e={restrict:"A",link:{pre:function(e,t,i){},post:function(e,t,i){t[0].focus()}}};return e}angular.module("ctrpApp.widgets").directive("autoFocus",e),e.$inject=[]}(),function(){"use strict";angular.module("ctrpApp.widgets").filter("reverse",function(){return function(e){return angular.isDefined(e)&&e.length>0?e.slice().reverse():e}})}(),function(){"use strict";function e(e,t,i,a,r){function o(i,o,s,l){function c(){if(""==s.restrictionField.trim()&&s.hasOwnProperty("ignoreRw")){e.error('The restriction-field directive must have user roles assigned when using the flag "ignore-rw"');var a='<span class="help-inline"><strong>Error: </strong>the restriction-field needs user role(s) assigned with the ignore-rw flag </span>';return o.html(a),void t(o.contents())(i)}var l=s.restrictionField.trim().toLowerCase()||"",c=r.getUserRole().toLowerCase()||"",d=r.isCurationModeEnabled()||!1,u=l?l.indexOf(c)>-1:!0;s.hasOwnProperty("ignoreRw")?u?o.show():o.hide():u&&d?(o.show(),o.removeAttr("disabled")):u?u&&!d&&(n(o)?o.hide():s.$set("disabled","disabled")):o.hide()}c(),i.$on(a.CURATION_MODE_CHANGED,function(){c()})}function n(e){if(e&&e[0].outerHTML)for(var t=["button","btn","submit","reset"],i=0;i<t.length;i++)if(e[0].outerHTML.indexOf(t[i])>-1)return!0;return!1}var s={link:o,require:"?ngModel",restrict:"A",replace:!0};return s}angular.module("ctrpApp.widgets").directive("restrictionField",e),e.$inject=["$log","$compile","$timeout","MESSAGES","UserService"]}(),function(){"use strict";function e(e,t,i,a){function r(t,r,o){function n(){t.editMode=!0,d=t.model,e(function(){r.find("textarea")[0].focus()},0,!1)}function s(){t.editMode=!1,t.saveHandler({value:t.model})}function l(){t.editMode=!1,t.model=d}function c(){t.writeModeEnabled=a.isCurationModeEnabled()||!1,t.editMode=0==t.writeModeEnabled?!1:t.editMode}t.editMode=!1,t.writeModeEnabled=a.isCurationModeEnabled()||!1,t.isEditable=o.hasOwnProperty("isEditable")?t.$eval(o.isEditable):!1,t.edit=n,t.saveEdit=s,t.cancelEdit=l;var d;r.bind("blur",l),r.bind("keydown",function(e){27==e.which&&l(e.target,e)}),c(),t.$on(i.CURATION_MODE_CHANGED,function(){c()})}var o="app/modules/widgets/ctrp.widgets.in-place-edit.default_template.html",n={restrict:"A",transclude:!0,scope:{model:"=inPlaceEdit",saveHandler:"&onSave"},link:r,templateUrl:function(e,t){return t.template||o}};return n}angular.module("ctrpApp.widgets").directive("inPlaceEdit",e),e.$inject=["$timeout","$compile","MESSAGES","UserService"]}(),function(){"use strict";function e(){function e(e,t,i,a){var r=angular.element(document.body);r.addClass("md-sidenav-push-in");var o=(t.hasClass("md-sidenav-left")?"md-sidenav-left":"md-sidenav-right")+"-open",n=function(e){r[e?"addClass":"removeClass"](o)};angular.forEach(["open","close","toggle"],function(e){var t=a[e];a[e]=function(){var e=t.apply(a,arguments);return n(a.isOpen()),e}})}var t={restrict:"A",require:"^mdSidenav",link:e};return t}angular.module("ctrpApp.widgets").directive("sideNavPushIn",e),e.$inject=[]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l){function c(e,t,a){function r(){var t="<span>Comment</span>";i.getCommentCounts(e.uuid,a.field).then(function(i){e.numComments=i.count,e.numComments>0&&t.replace("Comment",e.numComments)})}e.commentList=[],a.$observe("instanceUuid",function(i){i?(e.uuid=i,t.show(),r()):(e.uuid="",e.numComments=0,e.commentList=[],t.hide())},!0)}function d(e,o,n){function s(){l()}function l(){e.$watch(function(){return e.instanceUuid},function(t,i){t&&c(),f.comment={content:"",username:r.getLoggedInUsername(),field:e.field,model:e.model||"",instance_uuid:e.instanceUuid,parent_id:""}},!0)}function c(){i.getComments(e.instanceUuid,e.field).then(function(e){f.commentList=i.annotateCommentIsEditable(e.comments)})["catch"](function(e){t.error("error in retrieving comments for instance uuid: "+instanceUuid)})}function d(a){a.$setUntouched(),i.createComment(f.comment).then(function(e){f.comment.content="",201==e.server_response.status&&(c(),h(),p("Comment created","right"))})["catch"](function(i){t.error("error in creating comments: "+JSON.stringify(e.comment))})}function g(e,a){if(a>-1){var r=angular.copy(f.commentList[a]);r.content=e,i.updateComment(r).then(function(e){200==e.server_response.status&&p("Comment updated","right")})["catch"](function(i){t.error("error in updating comment: "+e)})}}function h(e){var t=e&&e>0?e:0;a(function(){f.showCommentForm=!f.showCommentForm},t)}t.info("in the comment directive!!");var f=this;f.commentList=[],f.showCommentForm=!1,f.toggleRight=u("right"),f.closeSideNav=m,f.postComment=d,f.fetchComments=c,f.toggleCommentFormShown=h,f.updateComment=g,f.pagingOptions={currentPage:1,pageSize:10},s()}function u(e){var i=n.debounce(function(){o(e).toggle().then(function(){t.info("toggled "+e+" is completed")})},300);return i}function m(){o("right").close().then(function(){t.info("closed RIGHT side nav")})}function p(e,t){s.show({template:'<md-toast style="background-color: #6200EA"><span flex>'+e+"</span></md-toast>",parent:l[0].querySelector("#toastr_message"),hideDelay:1e3,position:"right"})}var g={link:c,restrict:"E",scope:{instanceUuid:"@",buttonType:"@",field:"@",model:"@"},controller:d,controllerAs:"commentView",templateUrl:"app/modules/widgets/comment/ctrp.widgets.comment-panel-template.html"};return g}angular.module("ctrpApp.widgets").directive("ctrpComment",e),e.$inject=["$compile","$log","CommentService","$timeout","UserService","$mdSidenav","$mdUtil","$mdToast","$document"]}(),function(){"use strict";function e(e,t,i,a,r,o,n){function s(e,t,r){function o(){i.getCommentCounts(e.uuid,e.field).then(function(i){e.numComments=i.count,e.numComments>0&&t.html("<span><strong>"+e.numComments+'</strong></span> <i class="glyphicon glyphicon-comment" style="vertical-align: middle;"></i>')})}r.$observe("uuid",function(i){i?(e.uuid=i,e.field=r.field||"",e.model=r.model||"",t.show(),o()):t.hide()},!0),t.bind("click",function(t){a.show({templateUrl:"app/modules/widgets/comment/ctrp.widgets.comment-modal-template.html",targetEvent:t,locals:{instanceUuid:r.uuid,field:e.field,model:e.model},clickOutsideToClose:!0,scope:e.$new(),controller:l}).then(o)})}function l(e,i,a,n,s,l,c){function d(){u()}function u(){c.getComments(a,n).then(function(t){e.commentList=c.annotateCommentIsEditable(t.comments)})["catch"](function(e){t.error("error in retrieving comments for instance uuid: "+a)})}function m(){c.createComment(e.comment).then(function(t){e.comment.content="",201==t.server_response.status&&(u(),e.toggleCommentFormShown(),g("Comment created","right"))})["catch"](function(i){t.error("error in creating comments: "+JSON.stringify(e.comment))})}function p(i,a){if(a>-1){var r=angular.copy(e.commentList[a]);r.content=i,c.updateComment(r).then(function(e){console.log("response status: "+e.server_response.status),200==e.server_response.status&&g("Comment updated","right")})["catch"](function(e){t.error("error in updating comment: "+i)})}}function g(e,t){r.show({template:'<md-toast style="background-color: #6200EA"><span flex>'+e+"</span></md-toast>",parent:o[0].querySelector("#toastr_message"),hideDelay:1e3,position:"right"})}e.showCommentForm=!1,e.postComment=m,e.commentList=[],e.pagingOptions={currentPage:1,pageSize:10},e.updateComment=p,e.comment={content:"",fullname:"",model:s,username:l.getLoggedInUsername(),field:n||"",instance_uuid:a,parent_id:""},e.toggleCommentFormShown=function(){e.showCommentForm=!e.showCommentForm},e.close=function(){i.hide()},d()}return l.$inject=["$scope","$mdDialog","instanceUuid","field","model","UserService","CommentService"],{restrict:"A",link:s}}angular.module("ctrpApp.widgets").directive("ctrpCommentModal",e),e.$inject=["$compile","$log","CommentService","$mdDialog","$mdToast","$document","UserService"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s){function l(t,a){if(t){var r=e.COMMENTS.COUNTS_FOR_INSTANCE.replace(/\s*\{.*?\}\s*/g,t);return a&&(r=r.replace(".json","/"+a+".json")),i.info("get comment counts with url: "+r),n.getData(r)}var o=s.defer();return o.reject(null),o.promise}function c(t){return i.info("posting comment: "+JSON.stringify(t)),i.info("url: "+e.COMMENTS.CREATE),n.postDataExpectObj(e.COMMENTS.CREATE,t)}function d(t,a){if(t){var r=e.COMMENTS.FOR_INSTANCE.replace(/\s*\{.*?\}\s*/g,t);return a&&(r=r.replace(".json","/"+a+".json")),i.info("get comment list with url: "+r),n.getData(r)}var o=s.defer();return o.reject(null),o.promise}function u(t){if(console.log("editedCommentObj: "+JSON.stringify(t)),t.id){var i=e.COMMENTS.WITH_ID.replace(/\s*\{.*?\}\s*/g,t.id);return n.updateObj(i,t,{})}var a=s.defer();return a.reject(null),a.promise}function m(e){}function p(e){var t=[],i=["ROLE_ADMIN","ROLE_SUPER","ROLE_CURATOR"];if(angular.isArray(e)){var a=e.length,r=i.indexOf(o.getUserRole())>-1;t=e.map(function(e,t){return e.index=a-t,r||e.username==o.getLoggedInUsername()?e.isEditable=!0:e.isEditable=!1,e})}return t}return{getCommentCounts:l,createComment:c,getComments:d,updateComment:u,deleteComment:m,annotateCommentIsEditable:p}}angular.module("ctrpApp.widgets").factory("CommentService",e),e.$inject=["URL_CONFIGS","$http","$log","_","Common","UserService","PromiseTimeoutService","$q"]}(),function(){"use strict";function e(e){var t={restrict:"A",link:function(t,i,a){i.bind("click",function(){e(function(){a.ctrpClickOnce&&i.html(a.ctrpClickOnce),i.attr("disabled",!0)})})}};return t}angular.module("ctrpApp.widgets").directive("ctrpClickOnce",e),e.$inject=["$timeout"]}(),function(){"use strict";angular.module("ctrp.module.validators",[])}(),function(){"use strict";angular.module("ctrp.module.validators").directive(e);var e={ctrpSubmit:["$parse",function(e){return{restrict:"A",require:["ctrpSubmit","?form"],controller:["$scope",function(e){this.attempted=!1;var t=null;this.setAttempted=function(){this.attempted=!0},this.setFormController=function(e){t=e},this.needsAttention=function(e){return t?e?e.$invalid&&(e.$dirty||this.attempted):t&&t.$invalid&&(t.$dirty||this.attempted):!1}}],compile:function(t,i,a){return{pre:function(e,t,i,a){var r=a[0],o=a.length>1?a[1]:null;r.setFormController(o),e.ctrpbtn=e.ctrpbtn||{},e.ctrpbtn[i.name]=r},post:function(t,i,a,r){var o=r[0],n=r.length>1?r[1]:null,s=e(a.ctrpSubmit);i.bind("submit",function(e){return o.setAttempted(),t.$$phase||t.$apply(),n.$valid?void t.$apply(function(){s(t,{$event:e})}):!1})}}}}}]}}(),function(){"use strict";function e(e){function t(t,i,a,o){var n=function(t){var i=e("date")(a.dateLaterThan,"short"),n=e("date")(t,"short"),s=r(i,n);return o.$setValidity("dateLaterThan",s),t};o.$parsers.unshift(n),o.$formatters.push(n),a.$observe("dateLaterThan",function(){n(o.$viewValue)})}var i={require:"ngModel",link:t};return i}function t(e){function t(t,i,a,o){var n=function(t){var i=e("date")(t,"short"),n=e("date")(a.dateLowerThan,"short"),s=r(i,n);return o.$setValidity("dateLowerThan",s),t};o.$parsers.unshift(n),o.$formatters.push(n),a.$observe("dateLowerThan",function(){n(o.$viewValue)})}var i={require:"ngModel",link:t};return i}function i(e){return void 0===e||isNaN(Date.parse(e))?!1:!0}function a(e,t){return Date.parse(t)-Date.parse(e)}function r(e,t){if(""==e||""==t)return!0;if(0==i(e))return!1;if(1==i(t)){var r=a(e,t);return 0>r?!1:!0}}angular.module("ctrp.module.validators").directive("dateLaterThan",e).directive("dateEarlierThan",t),t.$inject=["$filter"],e.$inject=["$filter"]}(),function(){"use strict";angular.module("ctrp.module.dataservices",["ctrp.module.constants","ctrp.module.common","ctrp.module.PromiseTimeoutService","ctrp.module.PromiseService","LocalCacheModule","toastr","ui.bootstrap","ctrp.module.underscoreWrapper","ctrp.module.timeout","angularMoment","ngFileUpload"])}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d){function u(t){t?(g=t,e.cacheItem("app_version",t)):(g="",e.removeItemFromCache("app_version")),s.broadcastMsg("updatedAppVersion")}function m(t){t?(h=t,e.cacheItem("app_rel_milestone",t)):(h="",e.removeItemFromCache("app_rel_milestone")),s.broadcastMsg("updatedAppRelMilestone")}function p(){console.log("1 st openning modal instance???"),function(){var e=a.open({templateUrl:"app/user/gsa.html",controller:"gsaModalCtrl as gsaView",size:"lg",backdrop:"static",resolve:{UserService:"UserService",gsaObj:function(e){return e.getGsa()}}});e.result.then(function(){
console.log("modal closed, TODO redirect")})}()}var g="",h="",f={username:"",first_name:"",middle_name:"",last_name:"",email:"",phone:"",approved:"",sort:"updated_at",order:"DESC",rows:10,start:1},v={enableColumnResizing:!0,totalItems:null,rowHeight:22,enableSelectAll:!1,paginationPageSizes:[10,25,50,100],paginationPageSize:10,useExternalPagination:!0,useExternalSorting:!0,enableGridMenu:!0,enableFiltering:!0,enableVerticalScrollbar:2,enableHorizontalScrollbar:2,columnDefs:[{name:"username",enableSorting:!0,displayName:"Username",minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.userDetail({username : row.entity.username })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"first_name",displayName:"First",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.userDetail({username : row.entity.username })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"middle_name",displayName:"Middle",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.userDetail({username : row.entity.username })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"last_name",displayName:"Last",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.userDetail({username : row.entity.username })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"email",displayName:"Email",enableSorting:!0,minWidth:"150",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"phone",displayName:"Phone",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"approved",displayName:"Approval",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'}]};this.isLoggedIn=function(){var t=e.getCacheWithKey("token"),i=e.getCacheWithKey("username");return!!t&&!!i},this.getUserType=function(){return e.getCacheWithKey("user_type")},this.login=function(a){t.postDataExpectObj("/ctrp/sign_in",a).then(function(t){console.log("successful login, data returned: "+JSON.stringify(t)),t.token?(e.cacheItem("token",t.token),e.cacheItem("username",a.user.username),u(t.app_version),e.cacheItem("user_role",t.role),e.cacheItem("user_type",t.user_type),e.cacheItem("write_mode",t.privileges.write_mode||!1),e.cacheItem("curation_enabled",!1),n.success("Login is successful","Logged In!"),s.broadcastMsg("signedIn"),r(function(){p()},500)):n.error("Login failed","Login error")})["catch"](function(e){i.error("error in log in: "+JSON.stringify(e))})},this.logout=function(){var a=e.getCacheWithKey("username");t.postDataExpectObj("/ctrp/sign_out",{username:a,source:"Angular"}).then(function(t){t.success&&(e.clearAllCache(),s.broadcastMsg("loggedOut"),n.success("Success","Successfully logged out"),r(function(){o.go("main.sign_in")},200)),i.info("success in log out: "+JSON.stringify(t))})["catch"](function(e){i.error("error in logging out: "+JSON.stringify(e))})},this.searchUsers=function(e){console.log("User searchparams: "+JSON.stringify(e));var i=t.postDataExpectObj(d.SEARCH_USER,e);return console.log("User List: "+JSON.stringify(i)),i},this.getInitialUserSearchParams=function(){return f},this.getGridOptions=function(){return v},this.getLoggedInUsername=function(){return e.getCacheWithKey("username")||""},this.getUserDetailsByUsername=function(i){var i=e.getCacheWithKey("username");return t.getData(d.A_USER+i+".json")},this.getUserRole=function(){return e.getCacheWithKey("user_role")||""},this.getAppVersion=function(){return e.getCacheWithKey("app_version")||""},this.getAppVerFromDMZ=function(){return t.getData(l.APP_VERSION)},this.getAppRelMilestoneFromDMZ=function(){return t.getData(l.APP_REL_MILESTONE)},this.setAppVersion=function(e){u(e)},this.setAppRelMilestone=function(e){m(e)},this.getAppVersion=function(){return e.getCacheWithKey("app_version")},this.getAppRelMilestone=function(){return e.getCacheWithKey("app_rel_milestone")},this.getLoginBulletin=function(){return t.getData(l.LOGIN_BULLETIN)},this.getGsa=function(){return t.getData(d.USER_GSA)},this.upsertUser=function(e){var i={};return t.updateObj(d.A_USER+e.username+".json",e,i)},this.upsertUserSignup=function(e){console.log("userObj = "+JSON.stringify(e)),t.postDataExpectObj(d.A_USER_SIGNUP,e).then(function(e){console.log("successful login, data returned: "+JSON.stringify(e)),o.go("main.welcome_signup")})["catch"](function(e){i.error("error in log in: "+JSON.stringify(e))})},this.upsertUserChangePassword=function(e){var i={};return console.log("upsertUserChangePassword userObj = "+JSON.stringify(e)),t.postDataExpectObj(d.A_USER_CHANGEPASSWORD,e,i)},this.isCurationSupported=function(){return e.getCacheWithKey("write_mode")},this.isCurationModeEnabled=function(){return e.getCacheWithKey("curation_enabled")||!1},this.saveCurationMode=function(t){e.cacheItem("curation_enabled",t)}}angular.module("ctrp.module.dataservices").service("UserService",e),e.$inject=["LocalCacheService","PromiseTimeoutService","$log","$uibModal","$timeout","$state","toastr","Common","DMZ_UTILS","PRIVILEGES","URL_CONFIGS"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s){function l(){return PromiseService.getData(e.TRIAL_LIST)}function c(t){return console.log("calling getTrialById in TrialService"),n.getData(e.A_TRIAL+t+".json")}function d(t){if(t["new"])return i.info("creating a trial: "+JSON.stringify(t)),n.postDataExpectObj(e.TRIAL_LIST,t);var a={};return i.info("updating a trial: "+JSON.stringify(t)),n.updateObj(e.A_TRIAL+t.id+".json",t,a)}function u(t){return t?n.postDataExpectObj(e.SEARCH_TRIAL,t):void 0}function m(){return V}function p(){return E}function g(){return n.getData(e.STUDY_SOURCES)}function h(){return n.getData(e.PROTOCOL_ID_ORIGINS)}function f(){return n.getData(e.PHASES)}function v(){return n.getData(e.RESEARCH_CATEGORIES)}function y(){return n.getData(e.PRIMARY_PURPOSES)}function b(){return n.getData(e.SECONDARY_PURPOSES)}function _(){return n.getData(e.ACCRUAL_DISEASE_TERMS)}function w(){return n.getData(e.RESPONSIBLE_PARTIES)}function S(){return n.getData(e.FUNDING_MECHANISMS)}function D(){return n.getData(e.INSTITUTE_CODES)}function x(){return n.getData(e.NCI)}function O(){return n.getData(e.TRIAL_STATUSES)}function C(){return n.getData(e.HOLDER_TYPES)}function A(){return n.getData(e.NIH)}function P(){return n.getData(e.EXPANDED_ACCESS_TYPES)}function I(e){var t=[];switch(e){case"United States":t=["Federal Government","Food and Drug Administration","Institutional Review Board"];break;case"Canada":t=["Canadian Institutes of Health Research","Ethics Review Committee","Health Canada","Ministry of Health & Long Term Care, Ontario"];break;case"Afghanistan":t=["Ministry of Public Health"];break;case"Albania":t=["Ministry of Health Department of Pharmacy"];break;case"Algeria":t=["Ministry of Health"];break;case"Andorra":t=["Ministeri de Salut i Benestar"];break;case"Argentina":t=["Administracion Nacional de Medicamentos, Alimentos y Tecnologia Medica","Human Research Bioethics Committee","Ministry of Health"];break;case"Armenia":t=["Ministry of Health"];break;case"Australia":t=["Department of Health and Ageing Therapeutic Goods Administration","Human Research Ethics Committee","National Health and Medical Research Council"];break;case"Austria":t=["Federal Ministry for Labour, Health, and Social Affairs","Agency for Health and Food Safety","Ethikkommission","Federal Ministry for Health Family and Youth","Federal Ministry for Health and Women","Federal Office for Safety in Health Care"];break;case"Bangladesh":t=["Bangladesh Medical Research Council","Directorate of Drug Administration","Ethical Review Committee"];break;case"Barbados":t=["Ministry of Health"];break;case"Belarus":t=["Ministry of Health"];break;case"Belgium":t=["Directorate general for the protection of Public health","Federal Agency for Medicinal Products and Health Products","Institutional Review Board","Ministry of Social Affairs, Public Health and the Environment","The Federal Public Service (FPS) Health, Food Chain Safety and Environment"];break;case"Bolivia":t=["Ethics Committee","Ministry of Health"];break;case"Bosnia":t=["Federal Ministry of Health"];break;case"Botswana":t=["Health Research and Development Committee","Ministry of Health"];break;case"Brazil":t=["Ethics Committee","Ministry of Health","National Committee of Ethics in Research","National Health Surveillance Agency"];break;case"Bulgaria":t=["Bulgarian Drug Agency","Ministry of Health"];break;case"Burkina Faso":t=["Ministry for Higher Education and Research","Ministry of Health"];break;case"Cambodia":t=["Ministry of Health"];break;case"Cameroon":t=["Ministry of Public Health"];break;case"Chile":t=["Comisin Nacional de Investigacin Cientfica y Tecnolgica","Instituto de Salud Publica de Chile"];break;case"China":t=["Ethics Committee","Ministry of Health","National Natural Science Foundation","State Food and Drug Administration"];break;case"Colombia":t=["INVIMA Instituto Nacional de Vigilancia de Medicamentos y Alimentos","Institutional Review Board","National Institutes of Health"];break;case"Costa Rica":t=["Ethics Committee","Ministry of Health Costa Rica"];break;case"Cte D'Ivoire":t=["Ministry of AIDS","Ministry of Health and Public Hygiene","National Research and Ethics Committee","Ministry for the Public Health"];break;case"Croatia":t=["Agency for Medicinal Product and Medical Devices","Ethics Committee","Ministry of Health and Social Care","Ministry of Science, Education and Sports"];break;case"Cuba":t=["Ministry of Public Health","Scientific and Ethics Committee"];break;case"Czech Republic":t=["Ethics Committee","State Institute for Drug Control"];break;case"Denmark":t=["Danish Dataprotection Agency","Danish Medicines Agency","Ethics Committee","National Board of Health","The Danish National Committee on Biomedical Research Ethics","The Ministry of the Interior and Health","The Regional Committee on Biomedical Research Ethics"];break;case"Dominican Republic":t=["Consejo Nacional de Bioetica en Salud","Secretara del Estado de Salud Pblica y Asistencia Social (SESPAS)"];break;case"Ecuador":t=["Ethical Committee","Public Health Ministry"];break;case"Egypt":t=["Institutional Review Board","Ministry of Health and Population","Ministry of Health, Drug Policy and Planning Center"];break;case"Estonia":t=["The State Agency of Medicine"];break;case"Ethiopia":t=["Drug Administration and Control Authority","Ethical Review Committee","Ethiopia Science and Technology Commission","Ministry of Health"];break;case"European Union":t=["European Medicines Agency"];break;case"Fiji":t=["Ministry of Health"];break;case"Finland":t=["Data Protection Board","Ethics Committee","Finnish Medicines Agency","Ministry of Social Affairs and Health","National Advisory Board on Health Care Ethics"];break;case"France":t=["Afssaps - French Health Products Safety Agency","Comit consultatif sur le traitement de l'information en matire de recherche dans le domaine de la sant","Direction Gnrale de la Sant","French Data Protection Authority","Haute Autorit de Sant Transparency Commission","Institutional Ethical Committee","Ministry of Health","National Consultative Ethics Committee for Health and Life Sciences"];break;case"Gabon":t=["Ministry of Health"];break;case"Gambia":t=["Department of State for Health and Social Welfare","MRC Ethics Committee"];break;case"Georgia":t=["Ministry of Health"];break;case"Germany":t=["Ethics Commission","Federal Institute for Drugs and Medical Devices","Federal Ministry of Education and Research","Federal Ministry of Food, Agriculture and Consumer Protection","Federal Office for Radiation Protection","German Institute of Medical Documentation and Information","Ministry of Health","Paul-Ehrlich-Institut","The Bavarian State Ministry of the Environment and Public Health"];break;case"Ghana":t=["Committee on Human Research","Ministry of Health"];break;case"Greece":t=["Ethics Committee","Ministry of Health and Welfare","National Organization of Medicines"];break;case"Guatemala":t=["Ministry of Public Health and Social Assistance"];break;case"Guinea-Bissau":t=["Ministry of Health"];break;case"Hong Kong":t=["Department of Health","Ethics Committee","Joint CUHK-NTEC Clinical Research Ethics Committee"];break;case"Hungary":t=["Institutional Ethics Committee","National Institute of Pharmacy","Research Ethics Medical Committee"];break;case"Iceland":t=["Icelandic Medicines Control Agency","Ministry of Health and Social Security"];break;case"India":t=["Central Drugs Standard Control Organization","Department of Atomic Energy","Drugs Controller General of India","Indian Council of Medical Research","Institutional Review Board","Ministry of Health","Ministry of Science and Technology","Science and Engineering Research Council"];break;case"Indonesia":t=["Departement Kesehatan (Department of Health)","National Agency of Drug and Food Control"];break;case"Iran, Islamic Republic Of":t=["Ethics Committee","Ministry of Health"];break;case"Ireland":t=["Irish Medicines Board","Medical Ethics Research Committee","Ministry of Health","Research Ethics Committee"];break;case"Israel":t=["Ethics Commission","Israeli Health Ministry Pharmaceutical Administration","Ministry of Health","The Israel National Institute for Health Policy Research and Health Services Research"];break;case"Italy":t=["Ethics Committee","Ministry of Health","National Bioethics Committee","National Institute of Health","National Monitoring Centre for Clinical Trials - Ministry of Health","The Italian Medicines Agency"];break;case"Jamaica":t=["Ministry of Health"];break;case"Japan":t=["Foundation for Biomedical Research and Innovation","Institutional Review Board","Ministry of Education, Culture, Sports, Science and Technology","Ministry of Health, Labor and Welfare","Pharmaceuticals and Medical Devices Agency"];break;case"Jordan":t=["Ethical Committee"];break;case"Kazakhstan":t=["Ethical Commission"];break;case"Kenya":t=["Ethical Review Committee","Institutional Review Board","Ministry of Health"];break;case"Korea, Republic of":t=["Food and Drug Administration","Institutional Review Board","Ministry for Health, Welfare and Family Affairs"];break;case"Latvia":t=["Institutional Review Board","State Agency of Medicines"];break;case"Lebanon":t=["Institutional Review Board","Ministry of Public Health"];break;case"Liechtenstein":t=["Control Authority for Medicinal Products"];break;case"Lithuania":t=["Bioethics Committee","State Medicine Control Agency - Ministry of Health"];break;case"Luxembourg":t=["Comite National d'Ethique de Recherche","Ministre de la Sant"];break;case"Macedonia":t=["Ethics Committee","Ministry of Health"];break;case"Madagascar":t=["Ministry of Health"];break;case"Malawi":t=["College of Medicine Research and Ethics Committee","National Health Sciences Research Committee"];break;case"Malaysia":t=["Ministry of Health"];break;case"Mali":t=["Ministry of Health"];break;case"Malta":t=["Medicines Authority"];break;case"Mauritius":t=["Ministry of Health and Quality of Life"];break;case"Mexico":t=["Ethics Committee","Federal Commission for Protection Against Health Risks","Federal Commission for Sanitary Risks Protection","Ministry of Health","National Council of Science and Technology","National Institute of Public Health, Health Secretariat"];break;case"Moldavia":t=["Ministry of Health"];break;case"Morocco":t=["Ministry of Public Health"];break;case"Mozambique":t=["Ministry of Health (MISAU)"];break;case"Netherlands":t=["Independent Ethics Committee","Dutch Health Care Inspectorate","Medical Ethics Review Committee (METC)","Medicines Evaluation Board (MEB)","Ministry of Health, Welfare and Sport","The Central Committee on Research Involving Human Subjects (CCMO)"];break;case"New Zealand":t=["Food Safety Authority","Health Research Council","Health and Disability Ethics Committees","Institutional Review Board","Medsafe","Ministry of Health"];break;case"Niger":t=["Institutional Review Board"];break;case"Nigeria":t=["The National Agency for Food and Drug Administration and Control"];break;case"Norway":t=["Data Inspectorate","Directorate for Health and Social Affairs","Ethics Committee","Norwegian Institute of Public Health","Norwegian Medicines Agency","Norwegian Social Science Data Services","Royal Norwegian Ministry of Health and Care Services","The National Committees for Research Ethics in Norway"];break;case"Pakistan":t=["Ministry of Health","Research Ethics Committee"];break;case"Panama":t=["Commemorative Institute GORGAS of Studies of Health","Ministry of Health"];break;case"Paraguay":t=["Ministerio de Salud Pblica y Bienestar Social"];break;case"Peru":t=["Ethics Committee","General Directorate of Pharmaceuticals, Devices, and Drugs","Instituto Nacional de Salud","Ministry of Health"];break;case"Philippines":t=["Bureau of Food and Drugs","Department of Health","Ethics Committee","Philippine Council for Health Research and Development"];break;case"Poland":t=["Ethics Committee","Ministry of Health","Ministry of Science and Higher Education","Office for Registration of Medicinal Products, Medical Devices and Biocidal Products","The Central Register of Clinical Trials"];break;case"Portugal":t=["Ethics Committee for Clinical Research","Health Ethic Committee","National Pharmacy and Medicines Institute"];break;case"Qatar":t=["Hamad Medical Corporation"];break;case"Romania":t=["Ethics Committee","Ministry of Public Health","National Authority for Scientific Research","National Medicines Agency","State Institute for Drug Control"];break;case"Russian Federation":t=["Ethics Committee","FSI Scientific Center of Expertise of Medical Application","Ministry of Health and Social Development of the Russian Federation","Pharmacological Committee, Ministry of Health"];break;case"Rwanda":t=["Ethics Committee"];break;case"Saudi Arabia":t=["Ethics Committee","Ministry of Health","Research Advisory Council"];break;case"Scotland":t=["Scottish Executive Health Department"];break;case"Senegal":t=["Ministere de la sante"];break;case"Serbia and Montenegro":t=["Agency for Drugs and Medicinal Devices"];break;case"Serbia":t=["Ethics Committee"];break;case"Sierra Leone":t=["Ministry of Health and Sanitation"];break;case"Singapore":t=["Clinical Trials & Epidemiology Research Unit (CTERU)","Domain Specific Review Boards","Health Sciences Authority"];break;case"Slovakia":t=["Ethics Committee","State Institute for Drug Control"];break;case"Slovenia":t=["Agency for Medicinal Products - Ministry of Health","Ethics Committee","Ministry of Health"];break;case"Solomon Islands":t=["National Health Research Ethics Committee"];break;case"South Africa":t=["Department of Health","Human Research Ethics Committee","Medicines Control Council","National Health Research Ethics Council"];break;case"South Korea":t=["Institutional Review Board","Korea Food and Drug Administration (KFDA)"];break;case"Spain":t=["Agencia Espaola de Medicamentos y Productos Sanitarios","Comit tico de Investigacin Clnica","Ethics Committee","Ministry of Health","Ministry of Health and Consumption","Spanish Agency of Medicines"];break;case"Sri Lanka":t=["Ministry of Healthcare & Nutrition"];break;case"Sudan":t=["Ministry of Health"];break;case"Sweden":t=["Institutional Review Board","Medical Products Agency","Regional Ethical Review Board","Swedish National Council on Medical Ethics","Swedish Research Council","The National Board of Health and Welfare"];break;case"Switzerland":t=["Ethikkommission","Federal Office of Public Health","Laws and standards","Swissmedic"];break;case"Taiwan, Republic Of China":t=["Center for Drug Evaluation","Department of Health","Institutional Review Board","National Bureau of Controlled Drugs"];break;case"Tanzania, United Republic of":t=["Food & Drug Administration","Ministry of Health","National Institute for Medical Research"];break;case"Thailand":t=["Ethical Committee","Food and Drug Administration","Khon Kaen University Ethics Committee for Human Research","Ministry of Public Health"];break;case"Trinidad and Tobago":t=["Ministry of Health"];break;case"Tunisia":t=["Ministry of Public Health","Office of Pharmacies and Medicines"];break;case"Turkey":t=["Ethics Committee","Ministry of Health"];break;case"Uganda":t=["Ministry of Health","National Council for Science and Technology","National Drug Authority","Research Ethics Committee"];break;case"Ukraine":t=["Ministry of Health","State Pharmacological Center - Ministry of Health"];break;case"United Arab Emirates":t=["Drug Control Department - Medicines and Pharmacy Control - Ministry of Health","General Authority for Health Services for Abu Dhabi"];break;case"United Kingdom":t=["Department of Health","Food Standards Agency","Medicines and Healthcare Products Regulatory Agency","National Health Service","National Institute for Health Research","Research Ethics Committee"];break;case"United Nations":t=["International Atomic Energy Agency"];break;case"Uruguay":t=["Comite de Etica"];break;case"Venezuela, Bolivarian Republic of":t=["Ethics Committee","Ministry of Health and Social Development"];break;case"Vietnam":t=["Ho Chi Minh City Health Service","Ministry of Health"];break;case"Yemen":t=["Ministry of Public Health and Population"];break;case"Zambia":t=["Ministry of Health","Pharmaceutical Regulatory Authority","Research Ethics Committee"];break;case"Zanzibar":t=["Ministry of Health and Social Welfare"];break;case"Zimbabwe":t=["Medical Research Council"];break;default:t=[]}return t}function T(t,a,r,o){s.upload({url:e.TRIAL_DOCUMENT_LIST,method:"POST",fields:{"trial_document[document_type]":a,"trial_document[document_subtype]":r,"trial_document[trial_id]":t},file:o,fileFormDataName:"trial_document[file]"}).progress(function(e){var t=parseInt(100*e.loaded/e.total);i.info("progress: "+t+"% "+e.config.file.name)}).success(function(e,t,a,r){i.info("file "+r.file.name+" uploaded.")}).error(function(e,t,a,r){i.info("file "+r.file.name+" upload error. error status: "+t)})}function k(t){return n.deleteObjFromBackend(e.A_TRIAL+t+".json")}var V={sort:"",order:"",rows:10,start:1},E={enableColumnResizing:!0,totalItems:null,rowHeight:22,enableRowSelection:!0,enableRowHeaderSelection:!0,paginationPageSizes:[10,25,50,100],paginationPageSize:10,useExternalPagination:!0,useExternalSorting:!0,enableGridMenu:!0,enableFiltering:!0,columnDefs:[{name:"lead_protocol_id",displayName:"Lead Protocol ID",enableSorting:!0,minWidth:"170",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.trialDetail({trialId: row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"official_title",enableSorting:!0,minWidth:"150",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"phase",enableSorting:!0,minWidth:"100",width:"*"},{name:"purpose",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"pilot",enableSorting:!0,minWidth:"100",width:"*"},{name:"pi",displayName:"Principal Investigator",enableSorting:!0,minWidth:"150",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"lead_org",displayName:"Lead Organization",enableSorting:!0,minWidth:"170",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"sponsor",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"study_source",enableSorting:!0,minWidth:"150",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'}]},R={getAllTrials:l,getTrialById:c,upsertTrial:d,searchTrials:u,getInitialTrialSearchParams:m,getGridOptions:p,getStudySources:g,getProtocolIdOrigins:h,getPhases:f,getResearchCategories:v,getPrimaryPurposes:y,getSecondaryPurposes:b,getAccrualDiseaseTerms:_,getResponsibleParties:w,getFundingMechanisms:S,getInstituteCodes:D,getNci:x,getTrialStatuses:O,getHolderTypes:C,getNih:A,getExpandedAccessTypes:P,getAuthorityOrgArr:I,uploadDocument:T,deleteTrial:k};return R}angular.module("ctrp.module.dataservices").factory("TrialService",e),e.$inject=["URL_CONFIGS","MESSAGES","$log","_","Common","$rootScope","PromiseTimeoutService","Upload"]}(),function(){"use strict";function e(e,t,i,a,r,o,n){function s(){return e.getData(t.PERSON_LIST)}function l(i){return e.getData(t.A_PERSON+i+".json")}function c(a){if(a["new"])return i.info("creating n person: "+JSON.stringify(a)),e.postDataExpectObj(t.PERSON_LIST,a);var r={};return e.updateObj(t.A_PERSON+a.person.id+".json",a,r)}function d(i){return i?e.postDataExpectObj(t.SEARCH_PERSON,i):void 0}function u(){var e=o.getUserRole()?o.getUserRole().split("_")[1].toLowerCase():"",t="curator";return e.toUpperCase()!==t.toUpperCase()&&(b.wc_search=!1),b}function m(){var e=o.getUserRole()?o.getUserRole():"",t=n.indexOfObjectInJsonArray(_.columnDefs,"name","updated_at");console.log("updated_at_index is "+t);var i="curator";if(-1===e.toUpperCase().indexOf(i.toUpperCase())){_.columnDefs.splice(t,1);var a=n.indexOfObjectInJsonArray(_.columnDefs,"name","updated_by");console.log("updated_by_index is "+a),_.columnDefs.splice(a,1)}return _}function p(){return e.getData(t.SOURCE_CONTEXTS)}function g(){return e.getData(t.SOURCE_STATUSES)}function h(i){return e.deleteObjFromBackend(t.A_PERSON+i+".json")}function f(){return r.getData(t.PO_AFF_STATUSES)}function v(e){return r.postDataExpectObj(t.CURATE_PERSON,e)}function y(e){return r.postDataExpectObj(t.UNIQUE_PERSON,e)}var b={fname:"",mname:"",lname:"",wc_search:!0,source_context:"",source_id:"",source_status:"",prefix:"",suffix:"",email:"",phone:"",startDate:"",endDate:"",date_range_arr:[],affiliated_org_name:"",updated_by:"",sort:"lname",order:"ASC",rows:10,start:1},_={rowTemplate:'<div ng-class="{ \'nonselectable-row-css-class\': grid.appScope.rowFormatter( row ) }"><div>  <div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div></div>',enableColumnResizing:!0,totalItems:null,rowHeight:22,enableSelectAll:!1,paginationPageSizes:[10,25,50,100],paginationPageSize:10,useExternalPagination:!0,useExternalSorting:!0,enableGridMenu:!0,enableFiltering:!0,enableHorizontalScrollbar:2,enableVerticalScrollbar:2,columnDefs:[{name:"Nullify",displayName:"Nullify",enableSorting:!1,enableFiltering:!1,minWidth:"75",width:"*",cellTemplate:'<div ng-if="row.isSelected"><input type="radio" name="nullify" ng-click="grid.appScope.nullifyEntity(row.entity)"></div>',visible:!1},{name:"ctrp_id",enableSorting:!0,displayName:"CTRP ID",minWidth:"80",width:"*"},{name:"prefix",enableSorting:!0,minWidth:"75",width:"*"},{name:"fname",displayName:"First",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.personDetail({personId : row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"mname",displayName:"Middle",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.personDetail({personId : row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"lname",displayName:"Last",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.personDetail({personId : row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"suffix",enableSorting:!0,minWidth:"75",width:"*"},{name:"source_context",displayName:"Source Context",enableSorting:!0,minWidth:"75",width:"*"},{name:"source_id",displayName:"Source ID",enableSorting:!0,minWidth:"65",width:"*"},{name:"source_status",displayName:"Source Status",enableSorting:!0,minWidth:"65",width:"*"},{name:"email",enableSorting:!0,minWidth:"150",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"phone",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"affiliated_orgs_first5",displayName:"Affiliated Orgs",minWidth:"150",width:"*",cellTemplate:'<div ng-if="row.entity.affiliated_orgs_first5.length > 0"><master-directive button-label="Click to see" mod="row.entity.affiliated_orgs_first5"></master-directive></div><div class="text-center" ng-show="row.entity.affiliated_orgs_first5.length == 0">--</div>'},{name:"updated_at",displayName:"Last Updated Date",type:"date",cellFilter:'date: "dd-MMM-yyyy H:mm"',enableSorting:!0,minWidth:"150",width:"*"},{name:"updated_by",displayName:"Last Updated By",enableSorting:!0,minWidth:"150",width:"*"}]},w={getAllPeople:s,getPersonById:l,upsertPerson:c,searchPeople:d,getInitialPersonSearchParams:u,getGridOptions:m,getSourceContexts:p,getSourceStatuses:g,deletePerson:h,getPoAffStatuses:f,curatePerson:v,checkUniquePerson:y};return w}angular.module("ctrp.module.dataservices").factory("PersonService",e),e.$inject=["PromiseService","URL_CONFIGS","$log","$rootScope","PromiseTimeoutService","UserService","Common"]}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l){function c(){return PromiseService.getData(e.ORG_LIST)}function d(t){return console.log("calling getOrgById in OrgService"),s.getData(e.AN_ORG+t+".json")}function u(t){if(t["new"])return i.info("creating an organization: "+JSON.stringify(t)),s.postDataExpectObj(e.ORG_LIST,t);var a={};return s.updateObj(e.AN_ORG+t.id+".json",t,a)}function m(t){return t?s.postDataExpectObj(e.SEARCH_ORG,t):void 0}function p(){var e=l.getUserRole()?l.getUserRole().split("_")[1].toLowerCase():"",t="curator";return e.toUpperCase()!==t.toUpperCase()&&(P.wc_search=!1),P}function g(e){var t=l.getUserRole()?l.getUserRole().split("_")[1].toLowerCase():"",i=o.indexOfObjectInJsonArray(I.columnDefs,"name","updated_at"),a=o.indexOfObjectInJsonArray(I.columnDefs,"name","updated_by"),r="curator";if(t.toUpperCase()!==r.toUpperCase()&&(I.columnDefs.splice(i,1),I.columnDefs.splice(a,1)),e){var n=o.indexOfObjectInJsonArray(I.columnDefs,"name","Nullify");I.columnDefs.splice(n,1)}return console.log("user role is: ",t.toUpperCase()),I}function h(){return function(e){e?r.getStateListInCountry(e).then(function(e){return A=e,0===A.length?void v(t.STATES_UNAVAIL,"states or provinces are not available"):void v(t.STATES_AVAIL,"come get your states or provinces")})["catch"](function(t){i.info("error in retrieving states for country: "+e)}):v(t.STATES_UNAVAIL,"states or provinces are not available")}}function f(){return A}function v(e,t){n.$broadcast(e,{content:t})}function y(){return s.getData(e.SOURCE_CONTEXTS)}function b(){return s.getData(e.SOURCE_STATUSES)}function _(t){return s.deleteObjFromBackend(e.AN_ORG+t+".json")}function w(e,t){var i=-1;return a.each(e,function(e,a){return e.id===t.id?void(i=a):void 0}),i}function S(e){var t=[];return a.each(e,function(e){var i={organization_id:e.id,po_affiliation_status_id:e.po_affiliation_status_id,effective_date:e.effective_date,expiration_date:e.expiration_date,id:e.po_affiliation_id||"",lock_version:e.lock_version,_destroy:e._destroy};t.push(i)}),
t}function D(e){return e.po_affiliation_status_id="",e.effective_date=new Date,e.expiration_date="",e.opened_effective=!1,e.opened_expiration=!1,e._destroy=!1,e}function x(t){return s.postDataExpectObj(e.CURATE_ORG,t)}function O(e,t,i){var a=-1,r=o.indexOfObjectInJsonArray(e,t,i);return r>-1&&(a=e[r].id||-1),a}function C(t){return s.postDataExpectObj(e.UNIQUE_ORG,t)}var A=[],P={name:"",alias:!0,wc_search:!0,ctrp_id:"",source_context:"",source_id:"",source_status:"",family_name:"",address:"",address2:"",city:"",state_province:"",country:"",email:"",postal_code:"",phone:"",sort:"",order:"",rows:10,start:1},I={rowTemplate:"<div><div>  <div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader, 'nonselectable-row': grid.appScope.curationShown && grid.appScope.userRole === 'curator' && grid.appScope.rowFormatter( row )}\"  ui-grid-cell></div></div>",enableColumnResizing:!0,totalItems:null,rowHeight:22,enableSelectAll:!1,paginationPageSizes:[10,25,50,100],paginationPageSize:10,useExternalPagination:!0,useExternalSorting:!0,enableGridMenu:!0,enableFiltering:!0,columnDefs:[{name:"Nullify",displayName:"Nullify",enableSorting:!1,enableFiltering:!1,minWidth:"75",width:"*",cellTemplate:'<div ng-if="row.isSelected"><input type="radio" name="nullify" ng-click="grid.appScope.nullifyEntity(row.entity)"></div>',visible:!1},{name:"ctrp_id",displayName:"CTRP ID",enableSorting:!0,minWidth:"80",width:"*"},{name:"name",enableSorting:!0,minWidth:"100",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.orgDetail({orgId : row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"ctep_id",displayName:"CTEP ID",enableSorting:!0,minWidth:"80",width:"*"},{name:"source_context",displayName:"Source Context",enableSorting:!0,minWidth:"75",width:"*"},{name:"source_id",displayName:"Source ID",enableSorting:!0,minWidth:"75",width:"*"},{name:"source_status",displayName:"Source Status",enableSorting:!0,minWidth:"75",width:"*"},{name:"aff_families_names",displayName:"Families",enableSorting:!0,minWidth:"100",width:"*",height:"50%",cellTemplate:'<div class="ngCellText" ng-repeat="fam in row.entity.aff_families_names" title="{{fam.Name}}">{{fam.Name}}</div>'},{name:"city",enableSorting:!0,minWidth:"100",width:"*"},{name:"state_province",displayName:"State",enableSorting:!0,minWidth:"100",width:"*"},{name:"country",displayName:"Country",enableSorting:!0,minWidth:"100",width:"*"},{name:"postal_code",displayName:"Postal Code",enableSorting:!0,minWidth:"100",width:"*"},{name:"phone",enableSorting:!0,minWidth:"100",width:"*"},{name:"email",enableSorting:!0,minWidth:"150",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{name:"updated_by",displayName:"Last Updated By",enableSorting:!0,minWidth:"150",width:"*"},{name:"updated_at",displayName:"Last Updated At",type:"date",cellFilter:'date: "dd-MMM-yyyy H:mm"',enableSorting:!0,minWidth:"160",width:"*"}]},T={getAllOrgs:c,getOrgById:d,upsertOrg:u,searchOrgs:m,getInitialOrgSearchParams:p,getGridOptions:g,watchCountrySelection:h,getStatesOrProvinces:f,getSourceContexts:y,getSourceStatuses:b,deleteOrg:_,indexOfOrganization:w,preparePOAffiliationArr:S,initSelectedOrg:D,curateOrg:x,findContextId:O,checkUniqueOrganization:C};return T}angular.module("ctrp.module.dataservices").factory("OrgService",e),e.$inject=["URL_CONFIGS","MESSAGES","$log","_","GeoLocationService","Common","$rootScope","PromiseTimeoutService","UserService"]}(),function(){"use strict";function e(e,t,i,a){function r(){return t.getData(i.COUNTRY_LIST)}function o(e){return t.getData(i.STATES_IN_COUNTRY+e)}var n={getCountryList:r,getStateListInCountry:o};return n}angular.module("ctrp.module.dataservices").factory("GeoLocationService",e),e.$inject=["PromiseService","PromiseTimeoutService","URL_CONFIGS","$log"]}(),function(){"use strict";function e(e,t,i,a,r,o){function n(){return e.getData(t.FAMILY_LIST)}function s(i){return e.getData(t.A_FAMILY+i+".json")}function l(i){return e.getData(t.A_FAMILY+i+"/get_orgs.json")}function c(a){if(a["new"])return i.info("creating a family: "+JSON.stringify(a)),e.postDataExpectObj(t.FAMILY_LIST,a);var r={};return e.updateObj(t.A_FAMILY+a.id+".json",a,r)}function d(i){return i?e.postDataExpectObj(t.SEARCH_FAMILY,i):void 0}function u(){var e=o.getUserRole()?o.getUserRole().split("_")[1].toLowerCase():"",t="curator";return e.toUpperCase()!==t.toUpperCase()&&(y.wc_search=!1),y}function m(){return b}function p(){return e.getData(t.FAMILY_STATUSES)}function g(){return e.getData(t.FAMILY_TYPES)}function h(){return e.getData(t.FAMILY_RELATIONSHIPS)}function f(i){return e.deleteObjFromBackend(t.A_FAMILY+i+".json")}function v(e){return r.postDataExpectObj(t.UNIQUE_FAMILY,e)}var y={name:"",wc_search:!0,po_id:"",family_status:"",family_type:"",sort:"",order:"",rows:10,start:1},b={enableColumnResizing:!0,totalItems:null,rowHeight:22,paginationPageSizes:[10,25,50,100],paginationPageSize:10,useExternalPagination:!0,useExternalSorting:!0,enableGridMenu:!0,enableFiltering:!0,enableHorizontalScrollbar:2,enableVerticalScrollbar:2,columnDefs:[{name:"name",enableSorting:!0,displayName:"Family Name",minWidth:"120",width:"*",cellTemplate:'<div class="ui-grid-cell-contents tooltip-uigrid" title="{{COL_FIELD}}"><a ui-sref="main.familyDetail({familyId : row.entity.id })">{{COL_FIELD CUSTOM_FILTERS}}</a></div>'},{name:"family_status",displayName:"Family Status",enableSorting:!0,minWidth:"100",width:"*"},{name:"family_type",displayName:"Family Type",enableSorting:!0,minWidth:"120",width:"*"},{name:"aff_org_count",displayName:"Membership Size",minWidth:"170",width:"*"}]},_={getAllFamilies:n,getFamilyById:s,upsertFamily:c,searchFamilies:d,getInitialFamilySearchParams:u,getGridOptions:m,deleteFamily:f,getFamilyStatuses:p,getFamilyTypes:g,getFamilyRelationships:h,getAffiliatedOrgsByFamilyId:l,checkUniqueFamily:v};return _}angular.module("ctrp.module.dataservices").factory("FamilyService",e),e.$inject=["PromiseService","URL_CONFIGS","$log","$rootScope","PromiseTimeoutService","UserService"]}(),function(){"use strict";function e(e){var t={formatYear:"yyyy",startingDay:1},i={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},a=["MMMM dd, yyyy","dd-MMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"];this.getDateOptions=function(){return t},this.getFormats=function(){return a},this.tomorrow=function(){var e=new Date;return e.setDate(e.getDate()+1),e},this.today=function(){return new Date},this.convertISODateToLocaleDateStr=function(e){var t="";if(e){var a=new Date(e);a=new Date(a.getTime()+6e4*a.getTimezoneOffset());var r=("0"+a.getDate()).slice(-2),o=a.getFullYear(),n=a.getMonth()+1,s=i[n];t=r+"-"+s+"-"+o}return t},this.getDateRange=function(e,t){var i=[];if(e&&t&&"function"==typeof e.getMonth&&"function"==typeof t.getMonth){e.setHours(0),t.setHours(23),t.setMinutes(59),t.setSeconds(59);var a=moment(e).format("YYYY-MM-DD HH:mm:ss"),r=moment(t).format("YYYY-MM-DD HH:mm:ss");i[0]=a,i[1]=r}return i}}angular.module("ctrp.module.dataservices").service("DateService",e),e.$inject=["$log"]}(),function(){"use strict";angular.module("ctrp.module.underscoreWrapper",[]).factory("_",["$window",function(e){return e._}])}(),function(){"use strict";angular.module("ctrp.module.timeout",["ngIdle","ui.bootstrap"]).config(["IdleProvider","KeepaliveProvider",function(e,t){e.idle(1800),e.timeout(10),t.interval(1800)}])}(),function(){"use strict";function e(e){e.interceptors.push("AuthInterceptor")}function t(e,t,i,a,r,o,n){function s(e){var t="Failed to retrieve data from service";408===e.status&&(t="Retrieving data from service timed out"),o.error(t,"Error"),console.log("request has timed out")}function l(e,t,i,a){return e?(e.server_response={},e.server_response.status=t,e.server_response.headers=i,e.server_response.config=a,e):{server_response:""}}this.getData=function(t){var i=e.defer();return t=n+t,r.get(t).success(function(e,t,a,r){var o=l(e,t,a,r);i.resolve(o)}).error(function(e,t,a,r){var o=l(e,t,a,r);s(e),i.reject(o)}),i.promise},this.postDataExpectObj=function(t,i){var a=e.defer();return t=n+t,r.post(t,i).success(function(e,t,i,r){var o=l(e,t,i,r);a.resolve(o)}).error(function(e,t,i,r){var o=l(e,t,i,r);s(e),a.reject(o)}),a.promise},this.updateObj=function(t,i,a){var o=e.defer();return t=n+t,r.put(t,i,a).success(function(e,t,i,a){var r=l(e,t,i,a);o.resolve(r)}).error(function(e,t,i,a){var r=l(e,t,i,a);s(e),o.reject(r)}),o.promise},this.deleteObjFromBackend=function(e){return e=n+e,r["delete"](e)}}angular.module("ctrp.module.PromiseTimeoutService",["ngResource","toastr","ctrp.module.constants","ctrp.module.authInterceptor"]).config(e).service("PromiseTimeoutService",t),e.$inject=["$httpProvider"],t.$inject=["$q","$resource","$timeout","$log","$http","toastr","HOST"]}(),function(){"use strict";function e(e){e.interceptors.push("AuthInterceptor")}function t(e,t,i,a,r,o){function n(i){t.defer();return i=o+i,e.get(i,{cache:!1})}function s(t){return t=o+t,e({url:t,method:"GET",withCredentials:!0,headers:{"Content-Type":"application/json; charset=utf-8"}})}function l(t,i){return t=o+t,e.post(t,i)}function c(t,i,a){return t=o+t,e.put(t,i,a)}function d(t){return t=o+t,e["delete"](t)}var u={getData:n,getDataV2:s,postDataExpectObj:l,updateObj:c,deleteObjFromBackend:d};return u}angular.module("ctrp.module.PromiseService",["ngResource","ctrp.module.constants","ctrp.module.authInterceptor"]).config(e).factory("PromiseService",t),e.$inject=["$httpProvider"],t.$inject=["$http","$q","$resource","$timeout","$log","HOST"]}(),function(){"use strict";angular.module("ctrp.module.constants",[]).constant("HOST","http://localhost:3000").constant("URL_CONFIGS",{ORG_LIST:"/ctrp/organizations.json",AN_ORG:"/ctrp/organizations/",SEARCH_ORG:"/ctrp/organizations/search.json",CURATE_ORG:"/ctrp/organizations/curate",UNIQUE_ORG:"/ctrp/organizations/unique",COUNTRY_LIST:"/ctrp/countries.json",STATES_IN_COUNTRY:"/ctrp/states.json?country=",SOURCE_CONTEXTS:"/ctrp/source_contexts.json",SOURCE_STATUSES:"/ctrp/source_statuses.json",A_USER:"/ctrp/users/",A_USER_SIGNUP:"/ctrp/sign_up",A_USER_CHANGEPASSWORD:"/ctrp/change_password",USER_GSA:"/ctrp/users/gsa",SEARCH_USER:"/ctrp/users/search.json",USER_LIST:"/ctrp/users.json",PERSON_LIST:"/ctrp/people.json",A_PERSON:"/ctrp/people/",CURATE_PERSON:"/ctrp/people/curate",PO_AFF_STATUSES:"/ctrp/po_affiliation_statuses.json",SEARCH_PERSON:"/ctrp/people/search.json",UNIQUE_PERSON:"/ctrp/people/unique",A_FAMILY:"/ctrp/families/",FAMILY_LIST:"/ctrp/families.json",SEARCH_FAMILY:"/ctrp/families/search.json",FAMILY_STATUSES:"/ctrp/family_statuses.json",FAMILY_TYPES:"/ctrp/family_types.json",FAMILY_RELATIONSHIPS:"/ctrp/family_relationships.json",UNIQUE_FAMILY:"/ctrp/families/unique",TRIAL_LIST:"/ctrp/registry/trials.json",A_TRIAL:"/ctrp/registry/trials/",SEARCH_TRIAL:"/ctrp/registry/trials/search.json",STUDY_SOURCES:"/ctrp/registry/study_sources.json",PROTOCOL_ID_ORIGINS:"/ctrp/registry/protocol_id_origins.json",PHASES:"/ctrp/registry/phases.json",RESEARCH_CATEGORIES:"/ctrp/registry/research_categories.json",PRIMARY_PURPOSES:"/ctrp/registry/primary_purposes.json",SECONDARY_PURPOSES:"/ctrp/registry/secondary_purposes.json",ACCRUAL_DISEASE_TERMS:"/ctrp/registry/accrual_disease_terms.json",RESPONSIBLE_PARTIES:"/ctrp/registry/responsible_parties.json",FUNDING_MECHANISMS:"/ctrp/registry/funding_mechanisms.json",INSTITUTE_CODES:"/ctrp/registry/institute_codes.json",NCI:"/ctrp/registry/nci.json",TRIAL_STATUSES:"/ctrp/registry/trial_statuses.json",HOLDER_TYPES:"/ctrp/registry/holder_types.json",NIH:"/ctrp/registry/nih.json",EXPANDED_ACCESS_TYPES:"/ctrp/registry/expanded_access_types.json",TRIAL_DOCUMENT_LIST:"/ctrp/registry/trial_documents.json",COMMENTS:{COUNTS_FOR_INSTANCE:"/ctrp/instance/{:instance_uuid}/comments/count.json",FOR_INSTANCE:"/ctrp/instance/{:instance_uuid}/comments.json",WITH_ID:"/ctrp/comments/{:id}.json",CREATE:"/ctrp/comments.json"}}).constant("MESSAGES",{STATES_AVAIL:"states_or_provinces_available",STATES_UNAVAIL:"states_or_provinces_not_available",PRIVILEGE_CHANGED:"user_privilege_changed",CURATION_MODE_CHANGED:"curation_mode_changed"}).constant("DMZ_UTILS",{APP_VERSION:"/ctrp/dmzutils/app_version.json",APP_REL_MILESTONE:"/ctrp/dmzutils/app_rel_milestone.json",LOGIN_BULLETIN:"/ctrp/dmzutils/login_bulletin.json"}).constant("PRIVILEGES",{READONLY:"READONLY",CURATOR:"CURATOR"})}(),function(){"use strict"}(),function(){"use strict";function e(e,t){this.a2zComparator=function(){var e=function(e,t){return e.name>t.name?1:e.name<t.name?-1:0};return e},this.broadcastMsg=function(t){e.$broadcast(t,{})},this.indexOfObjectInJsonArray=function(e,i,a){var r={};return r[i]=a,t.findIndex(e,r)}}angular.module("ctrp.module.common",[]).service("Common",e),e.$inject=["$rootScope","_"]}(),function(){"use strict";function e(e,t){function i(t){t.timeout=15e3;var i=e.getCacheWithKey("token");if(i){var a=(e.getCacheWithKey("gsaFlag")||"Reject")+" ";t.headers.Authorization=a+i}return t}function a(e){return e}function r(e){return 401==e.status?(t.get("$state").go("main.sign_in"),t.get("toastr").error("Access to the resources is not authorized","Please sign in to continue")):e.status>226&&2>n&&(t.get("toastr").clear(),t.get("toastr").error("Failed request","Error Code: "+e.status),n++),e}var o={request:i,response:a,responseError:r},n=0;return o}angular.module("ctrp.module.authInterceptor",["LocalCacheModule"]).factory("AuthInterceptor",e),e.$inject=["LocalCacheService","$injector"]}(),function(){"use strict";angular.module("LocalCacheModule",["LocalStorageModule"]).config(["localStorageServiceProvider",function(e){e.setPrefix("CTRP-NCI").setStorageType("sessionStorage"),e.setNotify(!0,!0).setStorageCookie(10,"/")}])}(),function(){"use strict";function e(e){function t(t,i){n()&&e.set(t,i)}function i(t){return n()?e.get(t):void 0}function a(t){n()&&e.remove(t)}function r(){n()&&e.clearAll()}function o(){return n()?e.keys():void 0}function n(){return e.isSupported}var s={cacheItem:t,getCacheWithKey:i,removeItemFromCache:a,clearAllCache:r,getAllCacheKeys:o};return s}angular.module("LocalCacheModule").factory("LocalCacheService",e),e.$inject=["localStorageService"]}(),function(){"use strict";angular.module("ctrp.app.layout",["ngTouch","ngAnimate","ngSanitize","ctrp.module.routes","ctrp.module.timeout","ctrp.module.dataservices","ctrp.module.common","ctrp.module.constants","ctrp.module.underscoreWrapper","ui.router"]).run(["$rootScope","$urlRouter","$state","$stateParams","$injector","UserService","LocalCacheService",function(e,t,i,a,r,o,n){console.log("ctrp.app.layout is running!"),e.$on("stateChangeStart",function(e,t,a,r,o){var s=["main.sign_in","main.sign_up","main.gsa"];-1==s.indexOf(t.name)&&"Accept"!==n.getCacheWithKey("gsaFlag")&&i.go("main.gsa")}),e.$on("$stateChangeSuccess",function(e,t,i,a,r){e.preventDefault(),"main.sign_in"==t.name||"main.sign_up"==t.name?o.isLoggedIn()||(o.getAppVerFromDMZ().then(function(e){console.log("retrieved data from dmz: "+JSON.stringify(e)),o.setAppVersion(e.app_version)}),o.getAppRelMilestoneFromDMZ().then(function(e){console.log("retrieved data from dmz: "+JSON.stringify(e)),o.setAppRelMilestone(e.app_rel_milestone)})):o.isLoggedIn()||(o.setAppVersion(""),o.setAppRelMilestone(""))})}])}(),function(){"use strict";function e(e,t,i,a,r,o,n,s,l,c,d){function u(){m(),g(),y()}function m(){t.$on("signedIn",function(){console.log("user signed in!!"),p()}),t.$on("loggedOut",function(){console.log("logged out!!"),p(),b.signedIn=!1})}function p(){b.signedIn=e.isLoggedIn(),b.username=e.getLoggedInUsername(),b.userRole=e.getUserRole().split("_")[1]||"",b.userRole=b.userRole?b.userRole.toLowerCase():"",b.isCurationEnabled=e.isCurationModeEnabled(),b.isCurationModeSupported=e.isCurationSupported()}function g(){t.$watch(function(){return b.signedIn},function(e,t){1==e?(i.watch(),h(),f()):i.unwatch()})}function h(){b.warning&&(b.warning.close("closed"),b.warning=null),b.timedout&&(b.timedout.close("closed"),b.timedout=null)}function f(){t.$on("IdleStart",function(){h(),b.warning=r.open({templateUrl:"warning-dialog.html",windowClass:"modal-danger"})}),t.$on("IdleEnd",function(){h()}),t.$on("IdleTimeout",function(){h(),o(function(){b.logOut(),b.timedout=r.open({templateUrl:"timedout-dialog.html",windowClass:"modal-danger"})},500)})}function v(e){return e.indexOf(b.currrentState.current.name)>-1}function y(){t.$watch(function(){return b.currrentState.current.name},function(e,t){},!0)}var b=this;b.signedIn=e.isLoggedIn(),b.username=e.getLoggedInUsername(),b.userRole=e.getUserRole()?e.getUserRole().split("_")[1].toLowerCase():"",b.isCurationEnabled=e.isCurationModeEnabled(),b.isCurationModeSupported=e.isCurationSupported(),b.warning=null,b.timedout=null,b.currrentState=n,b.navbarIsActive=v,b.toggleCurationMode=function(){console.log("toggling curation mode: "+b.isCurationEnabled),e.saveCurationMode(b.isCurationEnabled),l.broadcastMsg(c.CURATION_MODE_CHANGED)},b.logOut=function(){b.signedIn=!1,b.username="",b.userRole="",b.isCurationEnabled=!1,b.isCurationModeSupported=!1,e.logout()},u()}angular.module("ctrp.app.layout").controller("headerNavigationCtrl",e),e.$inject=["UserService","$scope","Idle","Keepalive","$uibModal","$timeout","$state","_","Common","MESSAGES","$rootScope"]}(),function(){"use strict";function e(e,t){t.appVersion=e.getAppVersion()||"",t.$on("updatedAppVersion",function(){t.appVersion=e.getAppVersion()||""}),t.appRelMilestone=e.getAppRelMilestone()||"",t.$on("updatedAppRelMilestone",function(){t.appRelMilestone=e.getAppRelMilestone()||""})}angular.module("ctrp.app.layout").controller("footerCtrl",e),e.$inject=["UserService","$scope"]}(),function(){"use strict";angular.module("ctrp.app.main",["ctrp.module.routes","ctrp.app.pa","ctrp.app.po","ctrp.app.user","ctrp.app.layout"]).run(function(){console.log("ctrp.app.main is running")})}(),angular.module("ctrp.app.main").run(["$templateCache",function(e){e.put("app/layout/footer.html",'<footer class="footer footer-fixed" ng-controller=footerCtrl><div class="container center-block"><ul class=list-inline><li><a href="http://www.hhs.gov/" tabindex=150>U.S. Department of Health and Human Services</a>&nbsp;&nbsp;&nbsp;&nbsp;|</li><li><a href=http://www.nih.gov tabindex=151>National Institutes of Health</a>&nbsp;&nbsp;&nbsp;&nbsp;|</li><li><a href="http://www.cancer.gov/" tabindex=152>National Cancer Institute</a>&nbsp;&nbsp;&nbsp;&nbsp;|</li><li class=last><a href=http://usa.gov tabindex=153>USA.gov</a></li></ul><br><br><div class=text-center>NIH ... Turning Discovery Into Health<sup></sup></div><br><br><div class=text-center ng-show="appVersion !=\'\'">CTRP v{{appVersion}} {{appRelMilestone}}</div></div></footer>'),e.put("app/layout/header.html",'<header ng-controller="headerNavigationCtrl as headerView"><script type=text/ng-template id=warning-dialog.html><div class="modal-header"> <h3>Since you have been inactive, the system will log you out soon</h3> </div> <div idle-countdown="countdown" ng-init="countdown=5" class="modal-body"> <progressbar max="5" value="5" animate="false" class="progress-striped active"> You will be logged out in {{countdown}} seconds. </progressbar> </div></script><script type=text/ng-template id=timedout-dialog.html><div class="modal-header"> <h3>You have been logged out for exceeding our inactivity threshold.</h3> </div> <div class="modal-body"> <p> Your authentication session has been cleared. Please log back in if needed. <strong>Thank you</strong> </p> </div></script><div class=container><div class=row><div class="col-xs-12 col-sm-7"><img class=img-responsive src=./images/nci-logo-full.svg alt="National Cancer Institute"><div class=sub-title>Clinical Trials Reporting Program</div></div><div class="col-xs-12 col-sm-5"><div class=row><ul class="list-inline animated-item"><li ng-show=headerView.signedIn>Welcome, <strong><a ui-sref=main.userDetail>{{headerView.username}}</a></strong></li><li ng-show=headerView.signedIn>| &nbsp;&nbsp;<a href ng-click=headerView.logOut()><strong>Sign Out</strong></a></li><br><li ng-show=headerView.signedIn>&nbsp;&nbsp;&nbsp;&nbsp;Role: {{headerView.userRole}}</li></ul></div><div class=row ng-show="headerView.signedIn && headerView.isCurationModeSupported && headerView.currrentState.current.name != \'main.sign_in\' && headerView.currrentState.current.name != \'main.defaultContent\'"><md-switch class=md-warn md-no-ink aria-label="Curation mode" ng-change=headerView.toggleCurationMode() ng-model=headerView.isCurationEnabled>Write Mode: <span flex ng-if=headerView.isCurationEnabled>On</span> <span flex ng-if=!headerView.isCurationEnabled>Off</span></md-switch></div></div></div></div><div class=contain-to-grid><nav class="navbar navbar-default navbar-fixed-top nav-search-bar"><div class="container-fluid row-blue"><div class="top-bar-section pull-right"></div></div><div class=container><div ng-if="headerView.currrentState.current.name != \'main.sign_in\' && headerView.currrentState.current.name != \'main.defaultContent\'"><div class="collapse navbar-collapse" id=collapse-1><div ng-if="headerView.userRole == \'curator\'"><div ng-include src="\'app/layout/navbar/navbarCurator.html\'"></div></div><div ng-if="headerView.userRole == \'ro\'"><div ng-include src="\'app/layout/navbar/navbarRo.html\'"></div></div><div ng-if="headerView.userRole == \'super\' || headerView.userRole == \'admin\'"><div ng-include src="\'app/layout/navbar/navbarSuper.html\'"></div></div><div ng-if="headerView.userRole == \'trial-submitter\' || headerView.userRole == \'trial-submitter-su\'"><div ng-include src="\'app/layout/navbar/navbarTrialSubmitter.html\'"></div></div><div ng-if="headerView.userRole == \'abstractor\' || headerView.userRole == \'abstractor-su\'"><div ng-include src="\'app/layout/navbar/navbarAbstractor.html\'"></div></div></div></div></div></nav></div></header>'),e.put("app/layout/mainContent.html","<div class=col-sm-12 role=content><div class=row><div ui-view></div></div></div>"),e.put("app/layout/mainContentFrame.html",'<div class="row pull-left"><div ncy-breadcrumb></div></div><div class=row><div ui-view=mainContent></div><div ui-view=rightPanel></div></div>'),e.put("app/layout/rightPanel.html",""),e.put("app/user/changePassword.html",'<div class=container><div class=row><div class=col-sm-3></div><div class=col-sm-6><div class=row><div class="panel panel-default"><div class=panel-heading><div class="panel-title text-center">Change Password Form</div></div><div class=panel-body><form class=form-horizontal role=form name=changePassword_form autocomplete=off novalidate><div class="form-group col-md-12"><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-user"></i></span> <input class=form-control type=text ng-model=userView.userObj.local_user.username placeholder=Username ng-disabled=true></div></div><div class="form-group col-md-12"><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-lock"></i></span> <input type=password class=form-control autocomplete=off ng-model=userView.userObj.local_user.password placeholder=Password required></div></div><div class="form-group col-md-12"><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-lock"></i></span> <input type=password class=form-control autocomplete=off ng-model=userView.userObj.local_user.password_confirmation placeholder="Password Confirmation" required></div></div><div class="form-group col-md-12"><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-lock"></i></span> <input type=password class=form-control autocomplete=off ng-model=userView.userObj.local_user.current_password placeholder="Current Password" required></div></div><div id=buttonBar class="form-group col-sm-12"><div class="col-sm-offset-3 col-sm-9"><input type=submit class="btn btn-success" ng-click=userView.updateUser() value=Save ng-disabled=changePassword_form.$invalid ctrp-click-once> <input type=reset class="btn btn-warning" value=Reset ng-click=userView.reset()> <button class="btn btn-default" back-button>Cancel</button></div></div></form></div></div></div></div><div class=col-sm-3></div></div></div>'),e.put("app/user/gsa.html",'<div class=modal-header><h3 class=modal-title>NCI CLINICAL TRIALS REPORTING PROGRAM (CTRP) SYSTEM</h3></div><div class=modal-body><p ng-bind-html=gsaView.renderGSAHtml()></p></div><div class=modal-footer><div class=btn-toolbar><button class="btn btn-primary pull-right" type=button ng-click=gsaView.accept()>Accept</button> <button class="btn btn-danger pull-right" type=button ng-click=gsaView.reject()>Reject</button></div></div>'),e.put("app/user/sign_in.html",'<div class=drop-shadow><div class="row top-offset-xs"></div><div class=row><div class=col-xs-4></div><div class=col-xs-4><div class="row animated-item" ng-hide="userView.loginBulletin == \'\'"><p ng-bind-html=userView.loginBulletin></p></div><div class=row><div class="panel panel-default no-bottom-margin"><div class=panel-heading><div class=panel-title>Please sign in to continue.</div></div><div class=panel-body><form class=form-horizontal role=form name=signin_form autocomplete=off novalidate><div class=form-group><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-user"></i></span> <input class="form-control input-sm col-xs-4" type=text ng-model=userView.userObj.user.username placeholder=Username auto-focus required></div></div><div class=form-group><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-lock"></i></span> <input type=password class="form-control input-sm col-xs-4" ng-model=userView.userObj.user.password autocomplete=off placeholder=Password required></div></div><div class=form-group><div class=btn-toolbar><div class=pull-left><span class=pad-height>New User? <a ui-sref=main.signup>Sign Up</a></span></div><button class="btn btn-primary pull-right" ng-click=userView.authenticate() ng-disabled=signin_form.$invalid>Sign In</button></div></div></form></div></div></div></div><div class=col-xs-4></div></div><div class="row top-offset-xs"></div></div>'),e.put("app/user/sign_up.html",'<div class=drop-shadow><div class="row top-offset-xs"></div><div class=row><div class=col-xs-4></div><div class=col-xs-4><div class=row><div class="panel panel-default no-bottom-margin"><div class=panel-heading><div class=panel-title>SignUp Form</div></div><div class=panel-body><form class=form-horizontal role=form name=signup_form autocomplete=off novalidate><div class=form-group><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-user"></i></span> <input class="form-control input-sm" type=text ng-model=userView.userObj.local_user.username placeholder=Username required></div></div><div class=form-group><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-lock"></i></span> <input type=password class="form-control input-sm" ng-model=userView.userObj.local_user.password autocomplete=off placeholder=Password required></div></div><div class=form-group><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-lock"></i></span> <input type=password class="form-control input-sm" ng-model=userView.userObj.local_user.password_confirmation placeholder="Password Confirmation" required></div></div><div class=form-group><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-lock"></i></span> <input type=role class="form-control input-sm" ng-model=userView.userObj.local_user.role placeholder=Role required></div></div><div class=form-group><div class=input-group><span class=input-group-addon><i class="glyphicon glyphicon-envelope"></i></span> <input type=email class="form-control input-sm" ng-model=userView.userObj.local_user.email placeholder=Email required></div></div><div id=buttonBar class=form-group><div class=btn-toolbar><button class="btn btn-primary pull-right" ng-click=userView.updateUser() ng-disabled=signup_form.$invalid ctrp-click-once>Save</button> <button class="btn btn-warning pull-right" ng-click=userView.reset()><i class="glyphicon glyphicon-remove"></i> Reset</button></div></div></form></div></div></div></div><div class=col-xs-4></div></div><div class="row top-offset-xs"></div></div>'),e.put("app/user/test_user.html","<strong>Hello</strong>"),e.put("app/user/userDetails.html",'<div class=row-fluid><div class="col-xs-12 drop-shadow"><div class=row><p></p><h4>Edit User Profile</h4><p></p></div><div class=row><form class=form-horizontal role=form name=userDetail_form novalidate><div class=form-group><label class="control-label col-xs-12 col-sm-3">User Name:</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.username placeholder=Username ng-disabled=true></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Email:</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.email placeholder=email></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Role:</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.role placeholder=email ng-disabled=true></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">First Name</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.first_name placeholder=first_name></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Last Name</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.last_name placeholder=last_name></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Middle Name</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.middle_name placeholder=middle_name></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Street Address</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.street_address placeholder=street_address></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Zip Code</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.zipcode placeholder=zipcode></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Receive Email Notifications</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.receive_email_notifications placeholder=receive_email_notifications></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">PRS Organization Name</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-model=userDetailView.userDetails.prs_organizations_name placeholder=prs_organizations_name></div></div><div class=row><label class="control-label col-xs-12 col-sm-3">Add Affiliated Organization:</label><div class="col-xs-12 col-sm-9"><ctrp-org-adv-search-modal-button max-row-selectable=1 use-built-in-template=true allow-overwrite=false selected-orgs-array=userDetailView.selectedOrgsArray></ctrp-org-adv-search-modal-button><div class="row animated-item" ng-show="userDetailView.savedSelection.length > 0"><input type=text ng-model=userDetailView.selectedOrgFilter class=form-control placeholder="Filter selected organizations"><table class="table table-bordered table-striped table-condensed"><thead><th width=6%>CTRP ID</th><th width=93%>Organization</th><th width=1%>Remove</th></thead><tbody><tr ng-repeat="org in userDetailView.savedSelection | filter: {\'name\': userDetailView.selectedOrgFilter} track by $index" ng-class="org._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'"><td>{{org.id}}</td><td>{{org.name}}</td><td><label class="btn btn-default" ng-click=userDetailView.toggleSelection($index)><i ng-class="org._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div></div></div><div class="form-group no-bottom-margin"><div class="col-xs-12 col-sm-3"></div><div class="btn-toolbar col-xs-12 col-sm-9"><button type=submit class="btn btn-primary pull-right" id=save_btn ng-click=userDetailView.updateUser() ng-disabled=userDetail_form.$invalid ctrp-click-once>Save</button> <button class="btn btn-warning pull-right" ng-click=userDetailView.reset()><i class="glyphicon glyphicon-remove"></i> Reset</button></div></div></form></div><div class="row top-offset-xs"></div></div></div>'),
e.put("app/user/user_list.html",'<div class=row ng-hide="searchWarningMessage==\'\'" ng-cloak><div class="alert alert-warning fade in"><strong>{{searchWarningMessage}}</strong></div></div><div class=row><script type=text/ng-template id=display_aff_orgs.html><div class="modal-header"> <h3 class="modal-title">{{vm.modalTitle}}</h3> </div> <div class="modal-body"> <div ng-repeat="org in vm.aff_orgs"> <strong>{{org.name}}</strong> </div> </div> <div class="modal-footer"> <button class="btn btn-warning" id="delete_btn" ng-click="vm.close()">Close</button> </div></script><div class="col-xs-12 drop-shadow"><div class=row><h4>Search User <small>Enter blank for wild card</small></h4></div><div class=row><form class=form-horizontal role=form><div class=row><div class=col-md-6><div class=form-group><label for=username class="control-label col-sm-2">Username</label><div class=col-sm-10><input type=text id=username class=form-control placeholder=Username ng-model=userView.searchParams.username auto-focus></div></div></div><div class=col-md-6><div class=form-group><label for=first_name class="control-label col-sm-2">First Name</label><div class=col-sm-10><input type=text id=first_name class=form-control placeholder="First Name" ng-model=userView.searchParams.first_name auto-focus></div></div></div><div class=col-md-6><div class=form-group><label for=first_name class="control-label col-sm-2">Last Name</label><div class=col-sm-10><input type=text id=last_name class=form-control placeholder="last Name" ng-model=userView.searchParams.last_name auto-focus></div></div></div><div class=col-md-6><div class=form-group><label for=email class="control-label col-sm-2">Email</label><div class=col-sm-10><input type=text id=email class=form-control placeholder=email ng-model=userView.searchParams.email auto-focus></div></div></div></div><div class=row><div class=form-group><div class="col-sm-12 text-center"><button type=submit class="btn btn-primary" ng-click=userView.searchUsers()><i class="glyphicon glyphicon-search"></i> Search</button> <button type=reset class="btn btn-default btn-danger" ng-click=userView.resetSearch()><i class="glyphicon glyphicon-remove"></i> Clear</button></div></div></div></form></div><div class=row><div class=col-xs-12><div class=row ng-if="userView.gridOptions.totalItems != null"><a href id=user_search_results></a><p></p><h4>User Search Results: {{userView.gridOptions.totalItems}} found</h4><p></p></div><div class="row animated-item" ng-if="userView.gridOptions.data.length > 0"><div ui-grid=userView.gridOptions ui-grid-pagination external-scopes=clickHandler class=grid></div></div></div></div></div></div>'),e.put("app/user/welcome_signup.html","<div class=container><div class=row><h3>Welcome To CTRP</h3><h4>Please Update your Profile using the following URL: http://ctrp-ci.nci.nih.gov/</h4></div></div>"),e.put("app/layout/navbar/navbarAbstractor.html",'<ul class="nav navbar-nav"><li ng-class="{ active: headerView.navbarIsActive(\'main.defaultContent\') }"><a ui-sref=main.defaultContent>Home<span class=sr-only>(current)</span></a></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.organizations, main.addOrganization, main.families, main.addFamily\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Organizations & Families <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.organizations>Search Organizations</a></li><li role=separator class=divider></li><li><a ui-sref=main.families>Search Families</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.people, main.addPerson\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Persons<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.people>Search Persons</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.trials, main.addTrial\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Trials<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.trials>Search Trials</a></li><li class=dropdown-submenu><a ui-sref=#>Register Trial</a><ul class=dropdown-menu><li><a ui-sref="main.addTrial({studySourceCode: \'NAT\'})">National</a></li><li><a ui-sref="main.addTrial({studySourceCode: \'EPR\'})">Externally Peer-Reviewed</a></li><li><a ui-sref="main.addTrial({studySourceCode: \'INS\'})">Institutional</a></li></ul></li></ul></li></ul>'),e.put("app/layout/navbar/navbarCurator.html",'<ul class="nav navbar-nav"><li ng-class="{ active: headerView.navbarIsActive(\'main.defaultContent\') }"><a ui-sref=main.defaultContent>Home<span class=sr-only>(current)</span></a></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.organizations, main.addOrganization, main.families, main.addFamily\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Organizations & Families <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.organizations>Search Organizations</a></li><li><a ui-sref=main.addOrganization>Add Organization</a></li><li role=separator class=divider></li><li><a ui-sref=main.families>Search Families</a></li><li><a ui-sref=main.addFamily>Add Family</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.people, main.addPerson\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Persons<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.people>Search Persons</a></li><li><a ui-sref=main.addPerson>Add Person</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.trials, main.addTrial\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Trials<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.trials>Search Trials</a></li></ul></li></ul>'),e.put("app/layout/navbar/navbarRo.html",'<ul class="nav navbar-nav"><li ng-class="{ active: headerView.navbarIsActive(\'main.defaultContent\') }"><a ui-sref=main.defaultContent>Home<span class=sr-only>(current)</span></a></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.organizations, main.addOrganization, main.families, main.addFamily\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Organizations & Families <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.organizations>Search Organizations</a></li><li role=separator class=divider></li><li><a ui-sref=main.families>Search Families</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.people, main.addPerson\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Persons<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.people>Search Persons</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.trials, main.addTrial\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Trials<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.trials>Search Trials</a></li></ul></li></ul>'),e.put("app/layout/navbar/navbarSuper.html",'<ul class="nav navbar-nav"><li ng-class="{ active: headerView.navbarIsActive(\'main.defaultContent\') }"><a ui-sref=main.defaultContent>Home<span class=sr-only>(current)</span></a></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.organizations, main.addOrganization, main.families, main.addFamily\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Organizations & Families <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.organizations>Search Organizations</a></li><li><a ui-sref=main.addOrganization>Add Organization</a></li><li role=separator class=divider></li><li><a ui-sref=main.families>Search Families</a></li><li><a ui-sref=main.addFamily>Add Family</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.people, main.addPerson\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Persons<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.people>Search Persons</a></li><li><a ui-sref=main.addPerson>Add Person</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.trials, main.addTrial\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Trials<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.trials>Search Trials</a></li><li class=dropdown-submenu><a ui-sref=#>Register Trial</a><ul class=dropdown-menu><li><a ui-sref="main.addTrial({studySourceCode: \'NAT\'})">National</a></li><li><a ui-sref="main.addTrial({studySourceCode: \'EPR\'})">Externally Peer-Reviewed</a></li><li><a ui-sref="main.addTrial({studySourceCode: \'INS\'})">Institutional</a></li></ul></li></ul></li><li><a ng-href=/ctrp/backoffice>Back Office</a></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.userDetail\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>User Management<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.userDetail>Edit User Profile</a></li><li><a href=/ctrp/users>User Portal</a></li></ul></li></ul>'),e.put("app/layout/navbar/navbarTrialSubmitter.html",'<ul class="nav navbar-nav"><li ng-class="{ active: headerView.navbarIsActive(\'main.defaultContent\') }"><a ui-sref=main.defaultContent>Home<span class=sr-only>(current)</span></a></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.organizations, main.addOrganization, main.families, main.addFamily\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Organizations & Families <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.organizations>Search Organizations</a></li><li role=separator class=divider></li><li><a ui-sref=main.families>Search Families</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.people, main.addPerson\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Persons<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.people>Search Persons</a></li></ul></li><li class=dropdown ng-class="{ active: headerView.navbarIsActive(\'main.trials, main.addTrial\') }"><a href class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Trials<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a ui-sref=main.trials>Search Trials</a></li><li class=dropdown-submenu><a ui-sref=#>Register Trial</a><ul class=dropdown-menu><li><a ui-sref="main.addTrial({studySourceCode: \'NAT\'})">National</a></li><li><a ui-sref="main.addTrial({studySourceCode: \'EPR\'})">Externally Peer-Reviewed</a></li><li><a ui-sref="main.addTrial({studySourceCode: \'INS\'})">Institutional</a></li></ul></li></ul></li></ul>'),e.put("app/layout/welcome/abstractorHome.html",'<div class="row top-offset-xs"></div><div class=row><div class=col-md-1 style=margin-left:80px></div><div class=col-md-8 align=center><div class=row align=center><div class="col-xs-12 col-sm-6"></div><div class="col-xs-12 col-sm-6"></div></div><div class=row><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-info"><div class=summary-background align=left><i class="glyphicon glyphicon-filter" align=left></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.trials>Search Trials</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-info"><div class=summary-background align=left><i class="glyphicon glyphicon-filter" align=left></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref="main.addTrial({studySourceCode: \'NAT\'})">Abstract Trials</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div></div></div><div class=col-md-1></div></div><div class="row top-offset-xs"></div>'),e.put("app/layout/welcome/adminHome.html",'<div class="row top-offset-xs"></div><div class=row><div class=col-md-1 style=margin-left:80px></div><div class=col-md-8 align=center><div class=row align=center><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-primary"><div class=summary-background align=left><i class="glyphicon glyphicon-tint"></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.organizations>Enter Organizations</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-primary"><div class=summary-background align=left><i class="glyphicon glyphicon-tree-deciduous"></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a ui-sref=main.people>Enter Persons <i class="glyphicon glyphicon-chevron-right pull-right"></i></a></div></div></div></div><div class=row><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-danger"><div class=summary-background align=left><i class="glyphicon glyphicon-filter" align=left></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.trials>Enter Trial Registration</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-danger"><div class=summary-background align=left><i class="glyphicon glyphicon-paperclip" align=left></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a ui-sref=main.trials>Enter Protocol Abstraction</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div></div></div><div class=col-md-1></div></div><div class=row><div class=col-md-1 style=margin-left:80px></div><div class=col-md-8 align=center><div class=row align=center><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-success"><div class=summary-background align=left><i class="glyphicon glyphicon-tint"></i></div><div class=summary-body></div><div class=summary-footer><a href="/ctrp/">Enter Accrual</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-success"><div class=summary-background align=left><i class="glyphicon glyphicon-tree-deciduous"></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a href="/ctrp/">Enter Reporting</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div></div><div class=row><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-admin"><div class=summary-background align=left><i class="glyphicon glyphicon-filter" align=left></i></div><div class=summary-body></div><div class=summary-footer><a href="/ctrp/">Enter Web Service Monitor</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-admin"><div class=summary-background align=left><i class="glyphicon glyphicon-paperclip" align=left></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a href=/ctrp/backoffice>Enter Backoffice</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div></div></div><div class=col-md-1></div></div><div class="row top-offset-xs"></div>'),e.put("app/layout/welcome/allHome.html",'<div class="row top-offset-xs"></div><div class=row><div class=col-md-1 style=margin-left:80px></div><div class=col-md-8 align=center><div class=row align=center><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-success"><div class=summary-background align=left><i class="glyphicon glyphicon-tint"></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.organizations>Enter Organizations</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-primary"><div class=summary-background align=left><i class="glyphicon glyphicon-tree-deciduous"></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a ui-sref=main.people>Enter Persons <i class="glyphicon glyphicon-chevron-right pull-right"></i></a></div></div></div></div><div class=row><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-info"><div class=summary-background align=left><i class="glyphicon glyphicon-filter" align=left></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.trials>Enter Trial Registration</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-danger"><div class=summary-background align=left><i class="glyphicon glyphicon-paperclip" align=left></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a ui-sref=main.trials>Enter Protocol Abstraction</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div></div></div><div class=col-md-1></div></div><div class="row top-offset-xs"></div>'),e.put("app/layout/welcome/curatorHome.html",'<div class="row top-offset-xs"></div><div class=row><div class=col-md-1 style=margin-left:80px></div><div class=col-md-8 align=center><div class=row align=center><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-primary"><div class=summary-background align=left><i class="glyphicon glyphicon-tint"></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.organizations>Search Organizations</a><br><a ui-sref=main.addOrganization>Add New Organization</a><br><i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-primary"><div class=summary-background align=left><i class="glyphicon glyphicon-tree-deciduous"></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a ui-sref=main.people>Search Persons</a><br><a ui-sref=main.addPerson>Add New Person</a><br><i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div></div><div class=row><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-danger"><div class=summary-background align=left><i class="glyphicon glyphicon-filter" align=left></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.trials>Search Trials</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-danger"><div class=summary-background align=left><i class="glyphicon glyphicon-paperclip" align=left></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a ui-sref=main.trials>Search PA</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div></div></div><div class=col-md-1></div></div><div class="row top-offset-xs"></div>'),e.put("app/layout/welcome/roHome.html",'<div class="row top-offset-xs"></div><div class=row><div class=col-md-1 style=margin-left:80px></div><div class=col-md-8 align=center><div class=row align=center><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-primary"><div class=summary-background align=left><i class="glyphicon glyphicon-tint"></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.organizations>Search Organizations</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-primary"><div class=summary-background align=left><i class="glyphicon glyphicon-tree-deciduous"></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a ui-sref=main.people>Search Persons <i class="glyphicon glyphicon-chevron-right pull-right"></i></a></div></div></div></div><div class=row><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-danger"><div class=summary-background align=left><i class="glyphicon glyphicon-filter" align=left></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.trials>Search Trials</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-danger"><div class=summary-background align=left><i class="glyphicon glyphicon-paperclip" align=left></i></div><div class=summary-body></div><div class="pdsa-summary-block-primary summary-footer"><a ui-sref=main.trials>Search PA</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div></div></div><div class=col-md-1></div></div><div class="row top-offset-xs"></div>'),e.put("app/layout/welcome/trialSubmitterHome.html",'<div class="row top-offset-xs"></div><div class=row><div class=col-md-1 style=margin-left:80px></div><div class=col-md-8 align=center><div class=row align=center><div class="col-xs-12 col-sm-6"></div><div class="col-xs-12 col-sm-6"></div></div><div class=row><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-info"><div class=summary-background align=left><i class="glyphicon glyphicon-filter" align=left></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref=main.trials>Search Trials</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div><div class="col-xs-12 col-sm-6"><div class="pdsa-summary-block pdsa-summary-block-info"><div class=summary-background align=left><i class="glyphicon glyphicon-filter" align=left></i></div><div class=summary-body></div><div class=summary-footer><a ui-sref="main.addTrial({studySourceCode: \'NAT\'})">Register Trials</a> <i class="glyphicon glyphicon-chevron-right pull-right"></i></div></div></div></div></div><div class=col-md-1></div></div><div class="row top-offset-xs"></div>'),e.put("app/layout/welcome/welcomeContent.html","<div class=col-md-9 role=content><div class=row><style>\n        .pdsa-summary-block-primary {\n            background-color: #428bca;\n            color: #fff;\n        }\n\n        /* theme of summary blocks */\n        .pdsa-summary-block-primary {\n            background-color: #428bca;\n            color: #fff;\n        }\n\n        .pdsa-summary-block-primary .summary-footer {\n            background-color: deepskyblue;\n            margin:0 auto;\n        }\n\n        .pdsa-summary-block-primary .summary-footer a {\n            color: white;\n            margin:0 auto;\n        }\n\n        /* for success */\n        .pdsa-summary-block-success {\n            background-color: #3c763d;\n            color: #fff;\n            margin:0 auto;\n        }\n\n        .pdsa-summary-block-success .summary-footer {\n            background-color: green;\n            margin:0 auto;\n        }\n\n        .pdsa-summary-block-success .summary-footer a {\n            color: white;\n            margin:0 auto;\n        }\n\n\n        /* for info */\n        .pdsa-summary-block-info {\n            background-color: #31708f;\n            color: #fff;\n            margin:0 auto;\n        }\n\n        .pdsa-summary-block-info .summary-footer {\n            background-color: teal;\n            margin:0 auto;\n        }\n\n        .pdsa-summary-block-info .summary-footer a {\n            color: white;\n            margin:0 auto;\n        }\n\n\n\n        /* for danger */\n        .pdsa-summary-block-danger {\n            /*background-color: #a94442;*/\n            background-color: crimson;\n            color: #fff;\n            margin:0 auto;\n        }\n\n        .pdsa-summary-block-danger .summary-footer {\n            background-color: red;\n            margin:0 auto;\n        }\n\n        .pdsa-summary-block-danger .summary-footer a {\n            color: white;\n            margin:0 auto;\n        }\n\n\n        /* for danger */\n        .pdsa-summary-block-admin {\n            background-color: orange;\n            color: #fff;\n            margin:0 auto;\n        }\n\n        .pdsa-summary-block-admin .summary-footer {\n            background-color: goldenrod;\n            margin:0 auto;\n        }\n\n        .pdsa-summary-block-admin .summary-footer a {\n            color: white;\n            margin:0 auto;\n        }\n\n        /* structure of summary blocks */\n        .pdsa-summary-block {\n            position: relative;\n            width: 100%;\n            margin: 0.3em;\n            padding: 1em;\n            min-height: 15em;\n\n        }\n\n        .pdsa-summary-block .summary-background i,\n        .pdsa-summary-block .summary-background div {\n            margin-left: -0.4em;\n            margin-top: 0.1em;\n            font-size: 8em;\n            opacity: 0.3;\n        }\n\n        .pdsa-summary-block .summary-body {\n            position: absolute;\n            top: 1.3em;\n            right: 0.8em;\n        }\n\n        .pdsa-summary-block .summary-body .summary-line1 {\n            text-align: right;\n            font-size: xx-large;\n        }\n\n        .pdsa-summary-block .summary-body .summary-line2 {\n            text-align: right;\n            font-size: medium;\n        }\n\n        .pdsa-summary-block .summary-footer {\n            position: absolute;\n            bottom: 0em;\n            right: 0em;\n            width: 100%;\n            padding: 0.4em;\n            text-transform: uppercase;\n            font-size: small;\n        }\n\n        .pdsa-summary-block .summary-footer a {\n            text-decoration: none;\n        }\n\n        .pdsa-summary-block .summary-footer:hover {\n            opacity: 12;\n            cursor: pointer;\n        }\n    </style><div class=\"container drop-shadow\"><div ng-if=\"headerView.currrentState.current.name != 'main.sign_in'\"><div class=\"collapse navbar-collapse\" id=collapse-1><div ng-if=\"headerView.userRole == 'curator'\"><div ng-include src=\"'app/layout/welcome/curatorHome.html'\"></div></div><div ng-if=\"headerView.userRole == 'ro'\"><div ng-include src=\"'app/layout/welcome/roHome.html'\"></div></div><div ng-if=\"headerView.userRole == 'super' || headerView.userRole == 'admin'\"><div ng-include src=\"'app/layout/welcome/adminHome.html'\"></div></div><div ng-if=\"headerView.userRole == 'trial-submitter' || headerView.userRole == 'trial-submitter-su'\"><div ng-include src=\"'app/layout/welcome/trialSubmitterHome.html'\"></div></div><div ng-if=\"headerView.userRole == 'abstractor' || headerView.userRole == 'abstractor-su'\"><div ng-include src=\"'app/layout/welcome/abstractorHome.html'\"></div></div></div></div></div></div></div>"),e.put("app/po/family/familyDetails.html",'<div class=row-fluid><script type=text/ng-template id=delete_confirm_template.html><div class="modal-header"> <h3 class="modal-title">{{vm.modalTitle}}</h3> </div> <div class="modal-body"> <div ng-show="vm.deletionStatus == \'\'"> <strong>This will be a permanent deletion</strong> </div> <div ng-show="vm.deletionStatus != \'\'"> <strong>{{vm.deletionStatus}}</strong> </div> </div> <div class="modal-footer"> <button class="btn btn-danger" ng-click="vm.ok()">Delete Now</button> <button class="btn btn-primary" ng-click="vm.cancel()">Cancel</button> </div></script><ctrp-comment instance-uuid={{familyDetailView.curFamily.uuid}} button-type=icon field model=family></ctrp-comment><div class="col-xs-12 drop-shadow"><div class=row><p></p><h4 ng-if=familyDetailView.curFamily.new>Add Family</h4><h4 ng-if=!familyDetailView.curFamily.new>Edit Family</h4><p></p></div><div class="row md-sidenav-push-in-target"><form class="form form-horizontal" name=family_form role=form novalidate ctrp-submit=familyDetailView.updateFamily()><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.family_form.needsAttention(family_form.name) || familyDetailView.showUniqueWarning}"><label class="control-label col-xs-12 col-sm-3">Family Name:</label><div class="col-xs-12 col-sm-6"><input type=text name=name restriction-field class="form-control input-sm" ng-model=familyDetailView.curFamily.name required auto-focus ng-blur=checkForNameUniqueness()> <span class=form-control-feedback ng-show=familyDetailView.curFamily.name.length ng-class="(!familyDetailView.showUniqueWarning && familyDetailView.curFamily.name.length) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=family_form.name.$error.required>Family name is Required</span><div class=has-error ng-show="familyDetailView.curFamily.name.length > 0 && family_form.name.$dirty && familyDetailView.showUniqueWarning"><span class=help-block>Warning: Family exists in the database. Please verify and create a new Family record.</span></div></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.family_form.needsAttention(family_form.family_status)}"><label class="control-label col-xs-12 col-sm-3">Family Status:</label><div class="col-xs-12 col-sm-6"><select restriction-field ng-init=familyDetailView.curFamily.family_status_id class="form-control input-sm" id=family_status ng-model=familyDetailView.curFamily.family_status_id ng-options="status.id as status.name for status in familyDetailView.familyStatusArr" name=family_status required><option value>Select a status</option></select><span class="form-control-feedback select-feedback" ng-show=familyDetailView.curFamily.family_status_id ng-class="!ctrpbtn.family_form.needsAttention(family_form.family_status) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=family_form.family_status.$invalid>Family status is Required</span></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.family_form.needsAttention(family_form.family_type)}"><label class="control-label col-xs-12 col-sm-3">Family Type:</label><div class="col-xs-12 col-sm-6"><select restriction-field ng-init=familyDetailView.curFamily.family_type_id class="form-control input-sm" id=family_type ng-model=familyDetailView.curFamily.family_type_id ng-options="status.id as status.name for status in familyDetailView.familyTypeArr" name=family_type required><option value>Select a type</option></select><span class="form-control-feedback select-feedback" ng-show=familyDetailView.curFamily.family_type_id ng-class="!ctrpbtn.family_form.needsAttention(family_form.family_type) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=family_form.family_type.$invalid>Family type is Required</span></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Membership Size:</label><div class="col-xs-12 col-sm-6 form-text">{{familyDetailView.curFamily.family_memberships.length}}</div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Add Family Membership:</label><div class="col-xs-12 col-sm-9"><ctrp-org-adv-search-modal-button use-built-in-template=false allow-overwrite=false selected-orgs-array=familyDetailView.orgsArrayReceiver></ctrp-org-adv-search-modal-button><div class="row animated-item top-offset-tiny" ng-show="familyDetailView.savedSelection.length > 0"><input type=text ng-model=familyDetailView.selectedOrgFilter restriction-field class="form-control input-sm" placeholder="Filter selected organizations"><table class="table table-bordered table-striped table-condensed"><thead><th width=6%><nobr>CTRP ID</nobr></th><th width=6%><nobr>CTEP ID</nobr></th><th width=29%>Organization</th><th width=22%>Relationship</th><th width=18%>Effective Date</th><th width=18%>Expiration Date</th><th width=1%></th></thead><tbody><tr ng-repeat="org in familyDetailView.savedSelection | filter: {\'name\': familyDetailView.selectedOrgFilter} track by $index" ng-class="org._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'"><td>{{org.id}}</td><td>{{org.ctep_id}}</td><td><a ui-sref="main.orgDetail({orgId : org.id })">{{org.name}}</a></td><td><select ng-init=org.family_relationship_id class="form-control input-sm" id=org.family_relationship ng-model=org.family_relationship_id ng-options="relation.id as relation.name for relation in familyDetailView.familyRelationshipArr"><option value>Select a relationship</option></select></td><td><div class="input-group add-on date datepicker" date-date-format=yyyy-mm-dd><input type=text class="form-control input-sm" datepicker-popup={{familyDetailView.dateFormat}} show-weeks=false ng-model=org.effective_date is-open=org.opened_effective datepicker-options=familyDetailView.dateOptions ng-required=false close-text=Close ng-disabled=org._destroy> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="familyDetailView.openCalendar($event, $index, \'effective\')" ng-disabled=org._destroy><i class="glyphicon glyphicon-calendar"></i></button></span></div></td><td><div class="input-group add-on date datepicker" date-date-format=yyyy-mm-dd><input type=text class="form-control input-sm" datepicker-popup={{familyDetailView.dateFormat}} show-weeks=false ng-model=org.expiration_date is-open=org.opened_expiration datepicker-options=familyDetailView.dateOptions ng-required=false close-text=Close ng-disabled=org._destroy> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="familyDetailView.openCalendar($event, $index, \'expiration\')" ng-disabled=org._destroy><i class="glyphicon glyphicon-calendar"></i></button></span></div></td><td><label class="btn btn-default" ng-click=familyDetailView.toggleSelection($index)><i ng-class="org._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div></div></div><div class="form-group no-bottom-margin"><div class="col-xs-12 col-sm-3"></div><div class="btn-toolbar col-xs-12 col-sm-9"><button type=submit restriction-field class="btn btn-primary pull-right" id=save_btn>Save</button> <button type=button ng-hide=!familyDetailView.curFamily.new restriction-field class="btn btn-warning pull-right" ng-click=familyDetailView.clearForm()><i class="glyphicon glyphicon-remove"></i> Reset</button> <button type=button ng-hide=familyDetailView.curFamily.new restriction-field class="btn btn-warning pull-right" ng-click=familyDetailView.resetForm()><i class="glyphicon glyphicon-remove"></i> Reset</button> <button type=button ng-hide=familyDetailView.curFamily.new restriction-field class="btn btn-danger btn-no-left-margin pull-left" id=confirm_btn ng-click="familyDetailView.confirmDelete(\'sm\')">Delete This Family</button></div></div></form></div><div class="row top-offset-xs"></div></div></div>'),
e.put("app/po/family/family_list.html",'<div class=row ng-hide="familyView.searchWarningMessage==\'\'" ng-cloak><div class="alert alert-warning fade in"><strong>{{familyView.searchWarningMessage}}</strong></div></div><div class=row><script type=text/ng-template id=display_aff_orgs.html><div class="modal-header"> <h3 class="modal-title">{{vm.modalTitle}}</h3> </div> <div class="modal-body"> <div ng-repeat="org in vm.aff_orgs"> <strong>{{org.name}}</strong> </div> </div> <div class="modal-footer"> <button class="btn btn-warning" id="delete_btn" ng-click="vm.close()">Close</button> </div></script><div class="col-xs-12 drop-shadow"><div class=row><h4>Search Family <small>* for wild card (e.g. Yal* for Yale Family)</small></h4></div><div class=row><form class="form form-horizontal" role=form><div class=row><div class="col-xs-12 col-sm-12 col-md-6"><div class=form-group><div class="col-xs-12 col-sm-4"><div ng-class="familyView.searchParams.wc_search == true ? \'checkbox checkbox-info\' : \'checkbox checkbox-circle\'"><label for=wc_search><input type=checkbox id=wc_search ng-model=familyView.searchParams.wc_search> Exact Search</label></div></div></div><div class=form-group><label for=family_name class="control-label col-xs-12 col-sm-3">Name:</label><div class="col-xs-12 col-sm-9"><input type=text id=family_name class="form-control input-sm" placeholder="Family Name" ng-model=familyView.searchParams.name auto-focus></div></div><div class=form-group><label for=family_status class="control-label col-xs-12 col-sm-3">Family Status:</label><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=family_status ng-model=familyView.searchParams.family_status><option value>Select a status</option><option ng-repeat="status in familyView.familyStatusArr" value={{status.name}}>{{status.name}}</option></select></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class=form-group><label for=family_type class="control-label col-xs-12 col-sm-3">Family Type:</label><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=family_type ng-model=familyView.searchParams.family_type><option value>Select a type</option><option ng-repeat="type in familyView.familyTypeArr" value={{type.name}}>{{type.name}}</option></select></div></div></div></div><div class=row><div class=col-xs-12><div class=btn-toolbar><button type=submit class="btn btn-primary pull-right" id=submission_btn ng-click="familyView.searchFamilies(\'fromStart\')"><i class="glyphicon glyphicon-search"></i> Search</button> <button class="btn btn-warning pull-right" id=reset_btn ng-click=familyView.resetSearch()><i class="glyphicon glyphicon-remove"></i> Clear</button></div></div></div></form></div><div class=row ng-class="{\'top-offset-xs\': familyView.gridOptions.data.length > 0 }" ng-if="familyView.searchWarningMessage.length === 0"><div class=col-xs-12><div class=row ng-if="familyView.searchWarningMessage.length === 0 && familyView.gridOptions.totalItems != null"><a href id=family_search_results></a><p></p><h4>Family Search Results: {{familyView.gridOptions.totalItems}} found</h4><p></p></div><div class="row animated-item" ng-if="familyView.gridOptions.data.length > 0"><div class=col-xs-12><div ui-grid=familyView.gridOptions ui-grid-pagination external-scopes=clickHandler class=grid></div></div></div></div></div><div class="row top-offset-xs"></div></div></div>'),e.put("app/modules/widgets/ctrp.widgets.in-place-edit.default_template.html",'<div><input type=text ng-model=model ng-show=editMode> <button ng-click=cancelEdit() ng-show=editMode>cancel</button> <button ng-click=saveEdit() ng-show=editMode>save</button><div ng-if=isEditable><span ng-mouseenter="showEdit = true" ng-mouseleave="showEdit = false"><span ng-hide=editMode ng-click=edit()>{{model}}</span> <a ng-show=showEdit ng-click=edit()>edit</a></span></div><div ng-if=!isEditable><span ng-mouseenter="showEdit = false" ng-mouseleave="showEdit = false"><span ng-hide=editMode>{{model}}</span></span></div></div>'),e.put("app/po/organization/orgDetails.html",'<div class=row-fluid><script type=text/ng-template id=delete_confirm_template.html><div class="modal-header"> <h3 class="modal-title">{{vm.modalTitle}}</h3> </div> <div class="modal-body"> <div ng-show="vm.deletionStatus == \'\'"> <strong>This will be a permanent deletion</strong> </div> <div ng-show="vm.deletionStatus != \'\'"> <strong>{{vm.deletionStatus}}</strong> </div> </div> <div class="modal-footer"> <button class="btn btn-danger" id="delete_btn" ng-click="vm.ok()">Delete Now</button> <button class="btn btn-primary" id="cancel_btn" ng-click="vm.cancel()">Cancel</button> </div></script><script type=text/ng-template id=ctrp>CTRP Context</script><script type=text/ng-template id=nlm>NLM Context</script><script type=text/ng-template id=ctep>CTEP Context</script><div class="col-xs-12 drop-shadow"><div class=row><p></p><h4 ng-if=orgDetailView.curOrg.new>Add Organization</h4><h4 ng-if=!orgDetailView.curOrg.new>Edit Organization</h4><p></p></div><div class=row><ctrp-comment instance-uuid={{orgDetailView.curOrg.uuid}} button-type=icon field model=organization></ctrp-comment><form class="form form-horizontal" role=form name=organization_form novalidate ctrp-submit=orgDetailView.updateOrg()><md-tabs md-dynamic-height md-border-bottom md-selected=orgDetailView.tabIndex><md-tab ng-repeat="clusterOrg in orgDetailView.curOrg.cluster track by $index"><md-tab-label>{{clusterOrg.context}}</md-tab-label><md-tab-body><div class="row md-sidenav-push-in-target"><div ng-if=!orgDetailView.curOrg.new class=form-group><label class="control-label col-xs-12 col-sm-3">CTRP ID:</label><div class="col-xs-12 col-sm-6 form-text">{{orgDetailView.curOrg.ctrp_id}}</div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.organization_form.needsAttention(organization_form.name) || orgDetailView.showUniqueWarning}"><label class="control-label col-xs-12 col-sm-3">Name:</label><div class="col-xs-12 col-sm-6" ng-if=orgDetailView.curOrgEditable><input type=text restriction-field class="form-control input-sm" name=name id=organization_name ng-model=orgDetailView.curOrg.name auto-focus required ng-blur=orgDetailView.checkUniqueOrganization()> <span class=form-control-feedback ng-show=orgDetailView.curOrg.name.length ng-class="!(orgDetailView.showUniqueWarning || ctrpbtn.organization_form.needsAttention(organization_form.name)) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=organization_form.name.$error.required>Name is Required</span><div class=has-error ng-show="orgDetailView.showUniqueWarning && orgDetailView.curOrg.name.length > 0 && organization_form.name.$dirty"><span class=help-block>Warning: Organization exists in the database. Please verify and create a new Organization record.</span></div></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.name}}</div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Source Context:</label><div class="col-xs-12 col-sm-6" ng-if=orgDetailView.curOrgEditable><select restriction-field ng-init=orgDetailView.curOrg.source_context_id class="form-control input-sm" id=source_context ng-model=orgDetailView.curOrg.source_context_id ng-options="context.id as context.name for context in orgDetailView.sourceContextArr"></select></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curSourceContextName}}</div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Source ID:</label><div class="col-xs-12 col-sm-6 form-text">{{orgDetailView.curOrg.source_id}}</div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Source Status:</label><div class="col-xs-12 col-sm-6"><div ng-if=!orgDetailView.curOrgEditable class=form-text>{{orgDetailView.curSourceStatusName}}</div><div ng-if=orgDetailView.curOrgEditable class=animated-item><select restriction-field ng-init=orgDetailView.curOrg.source_status_id class="form-control input-sm" id=source_status ng-model=orgDetailView.curOrg.source_status_id ng-options="status.id as status.name for status in orgDetailView.sourceStatusArr"></select></div></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Name Alias:</label><div class="col-xs-12 col-sm-6"><table class="table table-striped table-condensed" ng-if=orgDetailView.curOrgEditable><tbody><tr><td class=col-md-7><div><input type=text restriction-field class="form-control input-sm" id=alias ng-model=orgDetailView.alias></div></td><td class=col-md-1><div><button type=button class="btn btn-primary" ng-disabled="orgDetailView.alias == \'\'" restriction-field ng-click=orgDetailView.addNameAlias()><i class="glyphicon glyphicon-plus"></i> Add</button></div></td></tr></tbody></table><table class="table table-bordered table-striped table-condensed animated-item" ng-show="orgDetailView.addedNameAliases.length > 0"><tbody><thead><th>Alias</th><th ng-show=orgDetailView.curOrgEditable>Delete</th></thead><tr ng-repeat="nameAlias in orgDetailView.addedNameAliases track by $index" ng-class="nameAlias._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'"><td class=col-md-7>{{nameAlias.name}}</td><td class=col-md-1 style="vertical-align: middle" ng-show=orgDetailView.curOrgEditable><label class="btn btn-default" restriction-field ng-click="orgDetailView.toggleSelection($index, \'other_id\')"><i ng-class="nameAlias._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.organization_form.needsAttention(organization_form.address)}"><label class="control-label col-xs-12 col-xs-12 col-sm-3">Address 1:</label><div class="col-xs12 col-sm-6" ng-if=orgDetailView.curOrgEditable><input type=text restriction-field class="form-control input-sm" id=address ng-model=orgDetailView.curOrg.address name=address required> <span class=form-control-feedback ng-show=orgDetailView.curOrg.address.length ng-class="!ctrpbtn.organization_form.needsAttention(organization_form.address) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=organization_form.address.$error.required>Address is Required</span></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.address}}</div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Address 2:</label><div class="col-xs-12 col-sm-6" ng-if=orgDetailView.curOrgEditable><input type=text restriction-field class="form-control input-sm" id=address2 ng-model=orgDetailView.curOrg.address2></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.address2}}</div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.organization_form.needsAttention(organization_form.country)}"><label class="control-label col-xs-12 col-sm-3">Country:</label><div class="col-xs-12 col-sm-6" ng-if=orgDetailView.curOrgEditable><select restriction-field class="form-control input-sm" id=country ng-model=orgDetailView.curOrg.country ng-change=orgDetailView.watchCountrySelection(orgDetailView.curOrg.country) name=country required><option value ng-selected="orgDetailView.curOrg.country == \'\'">Select a country</option><option ng-repeat="country in orgDetailView.countriesArr track by $index" value={{country.name}} ng-selected="orgDetailView.curOrg.country == country.name">{{country.name}}</option></select><span class="form-control-feedback select-feedback" ng-show=orgDetailView.curOrg.country.length ng-class="!ctrpbtn.organization_form.needsAttention(organization_form.country) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=organization_form.country.$invalid>Country is Required</span></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.country}}</div></div><div class=form-group ng-hide="orgDetailView.states.length == 0"><label class="control-label col-xs-12 col-sm-3">State:</label><div class="col-xs-12 col-sm-6" ng-if=orgDetailView.curOrgEditable><select restriction-field class="form-control input-sm" id=state ng-model=orgDetailView.curOrg.state_province><option value ng-selected="orgDetailView.curOrg.state_province == \'\'">Select a state or province</option><option ng-repeat="state in orgDetailView.states track by $index" value={{state.name}} ng-selected="state.name==orgDetailView.curOrg.state_province">{{state.name}}</option></select></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.state_province}}</div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': (ctrpbtn.organization_form.needsAttention(organization_form.city) || ctrpbtn.organization_form.needsAttention(organization_form.postal_code))}"><label class="control-label col-xs-12 col-sm-3">City:</label><div class="col-xs-12 col-sm-2" ng-if=orgDetailView.curOrgEditable><input type=text restriction-field class="form-control input-sm" id=city ng-model=orgDetailView.curOrg.city required name=city> <span class=form-control-feedback ng-show=orgDetailView.curOrg.city.length ng-class="!ctrpbtn.organization_form.needsAttention(organization_form.city) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=organization_form.city.$error.required>City is Required</span></div><div class="col-xs-12 col-sm-2 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.city}}</div><label class="control-label has-feedback col-xs-12 col-sm-2">Postal Code:</label><div class="col-xs-12 col-sm-2" ng-if=orgDetailView.curOrgEditable><input type=text restriction-field class="form-control input-sm" id=postal_code ng-model=orgDetailView.curOrg.postal_code placeholder="Postal Code" name=postal_code ng-required="orgDetailView.curOrg.country===\'United States\'"> <span class=form-control-feedback ng-show=orgDetailView.curOrg.postal_code.length ng-class="!ctrpbtn.organization_form.needsAttention(organization_form.postal_code) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show="organization_form.postal_code.$error && ctrpbtn.organization_form.needsAttention(organization_form.postal_code)">US Local Postal Code is Required</span></div><div class="col-xs-12 col-sm-2 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.postal_code}}</div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': (organization_form.email.$error && ctrpbtn.organization_form.needsAttention(organization_form.email) && organization_form.phone.$error && ctrpbtn.organization_form.needsAttention(organization_form.phone))}"><div class=row><label class="control-label col-xs-12 col-sm-3">Email:</label><div class="col-xs-12 col-sm-3" ng-if=orgDetailView.curOrgEditable><input type=email restriction-field class="form-control input-sm" id=email ng-model=orgDetailView.curOrg.email placeholder=Email name=email ng-required=!orgDetailView.curOrg.phone> <span class=form-control-feedback ng-show=organization_form.email.$viewValue.length ng-class="!(organization_form.email.$error && ctrpbtn.organization_form.needsAttention(organization_form.email)) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span></div><div class="col-xs-12 col-sm-3 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.email}}</div><label class="control-label col-xs-12 col-sm-1">Phone:</label><div class="col-xs-12 col-sm-2" ng-if=orgDetailView.curOrgEditable><input type=text restriction-field class="form-control input-sm" id=phone name=phone ng-model=orgDetailView.curOrg.phone placeholder=Phone ng-required=!orgDetailView.curOrg.email ng-blur=orgDetailView.isValidPhoneNumber()> <span ng-show=orgDetailView.curOrg.phone.length class=form-control-feedback ng-class="(orgDetailView.curOrg.phone.length > 0 && showPhoneWarning && !IsPhoneValid) ? \'glyphicon glyphicon-exclamation-sign glyphicon-red\' : \'glyphicon glyphicon-ok glyphicon-green\'"></span><div class=has-error ng-show="orgDetailView.curOrg.phone.length && showPhoneWarning && !IsPhoneValid"><span class=help-block>Warning: Phone number invalid for the selected Country.</span></div></div><div class="col-xs-12 col-sm-2 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.phone}}</div></div><div class=row ng-show="organization_form.phone.$error && ctrpbtn.organization_form.needsAttention(organization_form.phone) && organization_form.email.$error && ctrpbtn.organization_form.needsAttention(organization_form.email) && organization_form.phone.$error && ctrpbtn.organization_form.needsAttention(organization_form.phone) && orgDetailView.curOrgEditable" ng-class="{\'has-error\': (organization_form.email.$error && ctrpbtn.organization_form.needsAttention(organization_form.email) && organization_form.phone.$error && ctrpbtn.organization_form.needsAttention(organization_form.phone))}"><div class="col-xs-12 col-sm-3"></div><div class="col-xs-12 col-sm-6"><span class=help-block>Either Phone or Email is Required</span></div></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Fax:</label><div class="col-xs-12 col-sm-6" ng-if=orgDetailView.curOrgEditable><input type=text restriction-field class="form-control input-sm" id=fax ng-model=orgDetailView.curOrg.fax placeholder=Fax></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!orgDetailView.curOrgEditable>{{orgDetailView.curOrg.fax}}</div></div><div class=form-group ng-hide="orgDetailView.curOrg.new || !orgDetailView.curOrg.created_by"><label class="control-label col-xs-12 col-sm-3">Created By:</label><div class="col-xs-12 col-sm-6 form-text">{{orgDetailView.curOrg.created_by}} ({{orgDetailView.curOrg.created_at | date: \'dd-MMM-yyyy H:mm\'}})</div></div><div class=form-group ng-hide="orgDetailView.curOrg.new || !orgDetailView.curOrg.updated_by"><label class="control-label col-xs-12 col-sm-3">Updated By:</label><div class="col-xs-12 col-sm-6 form-text">{{orgDetailView.curOrg.updated_by}} ({{orgDetailView.curOrg.updated_at | date: \'dd-MMM-yyyy H:mm\'}})</div></div><div ng-show="orgDetailView.curOrg.families.length > 0" class=form-group><label class="control-label col-xs-12 col-sm-3">Families:</label><div class="col-xs-12 col-sm-6 form-text"><p ng-repeat="family in orgDetailView.curOrg.families"><a ui-sref="main.familyDetail({familyId : family.id })">{{family.name}}</a></p></div></div><div class="form-group no-bottom-margin" ng-show=orgDetailView.curOrgEditable><div class="col-xs-12 col-sm-3"></div><div class="btn-toolbar col-xs-12 col-sm-9"><button type=submit restriction-field class="btn btn-primary pull-right" id=save_btn>Save</button> <button type=button ng-show=orgDetailView.curOrg.new restriction-field class="btn btn-warning pull-right" id=clear_btn ng-click=orgDetailView.clearForm()><i class="glyphicon glyphicon-remove"></i> Clear</button> <button type=button ng-hide=orgDetailView.curOrg.new restriction-field class="btn btn-warning pull-right" id=reset_btn ng-click=orgDetailView.resetForm()><i class="glyphicon glyphicon-remove"></i> Reset</button> <button type=button ng-hide=orgDetailView.curOrg.new restriction-field class="btn btn-danger btn-no-left-margin pull-left" id=confirm_btn ng-click="orgDetailView.confirmDelete(\'sm\')"><i class="glyphicon glyphicon-remove"></i> Delete This Organization</button></div></div></div></md-tab-body></md-tab></md-tabs></form></div><div class="row top-offset-xs"></div></div></div>'),e.put("app/po/organization/organization_list.html",'<div class=row><div class="col-xs-12 drop-shadow"><div class=row><h4>Search Organizations <small>* for wild card (e.g. university* for any university)</small></h4></div><div class=row><ctrp-advanced-org-search-form2 show-grid=true max-row-selectable=2 curation-mode=true></ctrp-advanced-org-search-form2></div></div></div>'),e.put("app/po/person/personDetails.html",'<div class=row-fluid><script type=text/ng-template id=delete_confirm_template.html><div class="modal-header"> <h3 class="modal-title">{{vm.modalTitle}}</h3> </div> <div class="modal-body"> <div ng-show="vm.deletionStatus == \'\'"> <strong>This will be a permanent deletion</strong> </div> <div ng-show="vm.deletionStatus != \'\'"> <strong>{{vm.deletionStatus}}</strong> </div> </div> <div class="modal-footer"> <button class="btn btn-danger" ng-click="vm.ok()">Delete Now</button> <button class="btn btn-primary" ng-click="vm.cancel()">Cancel</button> </div></script><div class="col-xs-12 drop-shadow"><div class=row><p></p><h4 ng-if=personDetailView.curPerson.new>Add Person</h4><h4 ng-if=!personDetailView.curPerson.new>Edit Person</h4><p></p></div><div class=row><ctrp-comment instance-uuid={{personDetailView.curPerson.uuid}} button-type=icon field model=person></ctrp-comment><form class=form-horizontal role=form name=person_form novalidate ctrp-submit=personDetailView.updatePerson()><md-tabs md-dynamic-height md-border-bottom md-selected=personDetailView.tabIndex><md-tab ng-repeat="clusterPerson in personDetailView.curPerson.cluster track by $index"><md-tab-label>{{clusterPerson.context}}</md-tab-label><md-tab-body><div class="row md-sidenav-push-in-target"><div class=form-group><label class="control-label col-xs-12 col-sm-3">Prefix:</label><div class="col-xs-12 col-sm-6" ng-if=personDetailView.curPersonEditable><input tabindex=1 type=text restriction-field class="form-control input-sm" ng-model=personDetailView.curPerson.prefix></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!personDetailView.curPersonEditable>{{personDetailView.curPerson.prefix}}</div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.person_form.needsAttention(person_form.fname)}"><label class="control-label col-xs-12 col-sm-3">First Name:</label><div class="col-xs-12 col-sm-6" ng-if=personDetailView.curPersonEditable><input tabindex=2 type=text restriction-field name=fname class="form-control input-sm" ng-model=personDetailView.curPerson.fname required auto-focus ng-change=checkForNameUniqueness()> <span class=form-control-feedback ng-show=personDetailView.curPerson.fname.length ng-class="!ctrpbtn.person_form.needsAttention(person_form.fname) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=person_form.fname.$error.required>First name is Required</span></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!personDetailView.curPersonEditable>{{personDetailView.curPerson.fname}}</div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Middle Name:</label><div class="col-xs-12 col-sm-6" ng-if=personDetailView.curPersonEditable><input tabindex=3 type=text restriction-field name=mname class="form-control input-sm" ng-model=personDetailView.curPerson.mname></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!personDetailView.curPersonEditable>{{personDetailView.curPerson.mname}}</div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.person_form.needsAttention(person_form.lname) || personDetailView.showUniqueWarning}"><label class="control-label col-xs-12 col-sm-3">Last Name:</label><div class="col-xs-12 col-sm-6" ng-if=personDetailView.curPersonEditable><input tabindex=4 type=text restriction-field name=lname class="form-control input-sm" ng-model=personDetailView.curPerson.lname required ng-blur=checkForNameUniqueness()> <span class=form-control-feedback ng-show=personDetailView.curPerson.lname.length ng-class="!personDetailView.showUniqueWarning ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=person_form.lname.$error.required>Last name is Required</span><div class=has-error ng-show="personDetailView.curPerson.lname.length > 0 && person_form.lname.$dirty && personDetailView.showUniqueWarning && !personDetailView.name_unqiue"><span class=help-block>Warning: Person exists in the database. Please verify and create a new Person record.</span></div></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!personDetailView.curPersonEditable>{{personDetailView.curPerson.lname}}</div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Suffix:</label><div class="col-xs-12 col-sm-6" ng-if=personDetailView.curPersonEditable><input tabindex=5 type=text restriction-field class="form-control input-sm" ng-model=personDetailView.curPerson.suffix></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!personDetailView.curPersonEditable>{{personDetailView.curPerson.suffix}}</div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.person_form.needsAttention(person_form.source_context)}"><label class="control-label col-xs-12 col-sm-3">Source Context:</label><div class="col-xs-12 col-sm-6" ng-if=personDetailView.curPersonEditable><select tabindex=6 restriction-field ng-init=personDetailView.curPerson.source_context_id class="form-control input-sm" id=source_context ng-model=personDetailView.curPerson.source_context_id ng-options="context.id as context.name for context in personDetailView.sourceContextArr" name=source_context required><option value=6>Select context</option></select><span class="form-control-feedback select-feedback" ng-show=personDetailView.curPerson.source_context_id.length ng-class="!ctrpbtn.person_form.needsAttention(person_form.source_context) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=person_form.source_context.$invalid>Source context is Required</span></div><div class="col-xs-12 col-sm-6 form-text" ng-if=!personDetailView.curPersonEditable>{{personDetailView.curSourceContextName}}</div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Source ID:</label><div class="col-xs-12 col-sm-6 form-text">{{personDetailView.curPerson.source_id}}</div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Source Status:</label><div class="col-xs-12 col-sm-6"><div ng-if=!personDetailView.curPersonEditable class=form-text>{{personDetailView.curSourceStatusName}}</div><div ng-if=personDetailView.curPersonEditable><select tabindex=7 ng-init=personDetailView.curPerson.source_status_id restriction-field class="form-control input-sm" id=source_status ng-model=personDetailView.curPerson.source_status_id ng-options="status.id as status.name for status in personDetailView.sourceStatusArr"></select></div></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': (person_form.email.$error && ctrpbtn.person_form.needsAttention(person_form.email) && person_form.phone.$error && ctrpbtn.person_form.needsAttention(person_form.phone))}"><div class=row><label class="control-label col-xs-12 col-sm-3">Email:</label><div class="col-xs-12 col-sm-3" ng-if=personDetailView.curPersonEditable><input tabindex=8 restriction-field class="form-control input-sm" name=email ng-model=personDetailView.curPerson.email type=email ng-required=!personDetailView.curPerson.phone> <span class=form-control-feedback ng-show=person_form.email.$viewValue.length ng-class="!(person_form.email.$error && ctrpbtn.person_form.needsAttention(person_form.email)) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span></div><div class="col-xs-12 col-sm-3 form-text" ng-if=!personDetailView.curPersonEditable>{{personDetailView.curPerson.email}}</div><label class="control-label col-xs-12 col-sm-1">Phone:</label><div class="col-xs-12 col-sm-2" ng-if=personDetailView.curPersonEditable><input tabindex=9 type=text restriction-field class="form-control input-sm" name=phone ng-model=personDetailView.curPerson.phone ng-required=!personDetailView.curPerson.email> <span ng-show=personDetailView.curPerson.phone.length class=form-control-feedback ng-class="!ctrpbtn.person_form.needsAttention(person_form.phone) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span></div><div class="col-xs-12 col-sm-2 form-text" ng-if=!personDetailView.curPersonEditable>{{personDetailView.curPerson.phone}}</div></div><div class=row ng-show="person_form.phone.$error && ctrpbtn.person_form.needsAttention(person_form.phone) && person_form.email.$error && ctrpbtn.person_form.needsAttention(person_form.email)" ng-class="{\'has-error\': (person_form.email.$error && ctrpbtn.person_form.needsAttention(person_form.email) && person_form.phone.$error && ctrpbtn.person_form.needsAttention(person_form.phone))}"><div class="col-xs-12 col-sm-3"></div><div class="col-xs-12 col-sm-6"><span class=help-block>Either Phone or Email is Required</span></div></div></div><div class=form-group ng-hide="personDetailView.curPerson.new || !personDetailView.curPerson.created_by"><label class="control-label col-xs-12 col-sm-3">Created By:</label><div class="col-xs-12 col-sm-6 form-text">{{personDetailView.curPerson.created_by}} ({{personDetailView.curPerson.created_at | date: \'dd-MMM-yyyy H:mm\'}})</div></div><div class=form-group ng-hide="personDetailView.curPerson.new || !personDetailView.curPerson.updated_by"><label class="control-label col-xs-12 col-sm-3">Updated By:</label><div class="col-xs-12 col-sm-6 form-text">{{personDetailView.curPerson.updated_by}} ({{personDetailView.curPerson.updated_at | date: \'dd-MMM-yyyy H:mm\'}})</div></div><div class=form-group ng-if=personDetailView.curPersonEditable><label class="control-label col-xs-12 col-sm-3">Add Affiliated Organization:</label><div class="col-xs-12 col-sm-9"><ctrp-org-adv-search-modal-button use-built-in-template=false allow-overwrite=false selected-orgs-array=personDetailView.orgsArrayReceiver></ctrp-org-adv-search-modal-button><div class="row animated-item top-offset-tiny" ng-show="personDetailView.savedSelection.length > 0"><input type=text ng-model=personDetailView.selectedOrgFilter restriction-field class="form-control input-sm" placeholder="Filter selected organizations"><table class="table table-bordered table-striped table-condensed"><thead><th width=6%>CTRP ID</th><th width=57%>Organization</th><th width=18%>Effective Date</th><th width=18%>Expiration Date</th><th width=1%></th></thead><tbody><tr ng-repeat="org in personDetailView.savedSelection | filter: {\'name\': personDetailView.selectedOrgFilter} track by $index" ng-class="org._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'"><td>{{org.id}}</td><td>{{org.name}}</td><td><div class="input-group add-on col-sm-12 date datepicker"><input tabindex=10 type=text class="form-control input-sm" uib-datepicker-popup={{personDetailView.dateFormat}} show-weeks=false ng-model=org.effective_date is-open=org.opened_effective datepicker-options=personDetailView.dateOptions ng-required=false close-text=Close ng-disabled=org._destroy> <span class=input-group-btn><button type=button restriction-field class="btn btn-default" ng-click="personDetailView.openCalendar($event, $index, \'effective\')" ng-disabled=org._destroy><i class="glyphicon glyphicon-calendar"></i></button></span></div></td><td><div class="input-group add-on col-sm-12 date datepicker"><input tabindex=11 type=text class="form-control input-sm" uib-datepicker-popup={{personDetailView.dateFormat}} show-weeks=false ng-model=org.expiration_date is-open=org.opened_expiration datepicker-options=personDetailView.dateOptions ng-required=false close-text=Close ng-disabled=org._destroy> <span class=input-group-btn><button type=button restriction-field class="btn btn-default" ng-click="personDetailView.openCalendar($event, $index, \'expiration\')" ng-disabled=org._destroy><i class="glyphicon glyphicon-calendar"></i></button></span></div></td><td><label restriction-field class="btn btn-default" ng-click=personDetailView.toggleSelection($index)><i ng-class="org._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div></div></div><div class="form-group no-bottom-margin" ng-show=personDetailView.curPersonEditable><div class="col-xs-12 col-sm-3"></div><div class="btn-toolbar col-xs-12 col-sm-9"><div class="btn-toolbar pull-right"><button type=button tabindex=12 restriction-field class="btn btn-warning" id=reset_btn ng-click=personDetailView.clearForm()><i class="glyphicon glyphicon-remove"></i> Reset</button> <button tabindex=13 type=submit restriction-field class="btn btn-primary" id=save_btn>Save</button></div><div class="btn-toolbar pull-left"><button tabindex=14 ng-hide=personDetailView.curPerson.new restriction-field class="btn btn-danger btn-no-left-margin" id=confirm_btn ng-click="personDetailView.confirmDelete(\'sm\')"><i class="glyphicon glyphicon-remove"></i> Delete This Person</button></div></div></div></div></md-tab-body></md-tab></md-tabs></form></div><div class="row top-offset-xs"></div></div></div>'),
e.put("app/po/person/person_list.html",'<div class=row><div class="col-xs-12 drop-shadow"><div class=row><h4>Search Persons <small>* for wild card (e.g. John*)</small></h4></div><div class=row><ctrp-advanced-person-search-form show-grid=true max-row-selectable=2 curation-mode=true></ctrp-advanced-person-search-form></div></div></div>'),e.put("app/po/person/person_search.html",'<div class=container><div class=row><strong>Examples of the ctrpPersonAdvSearchModalButton:</strong><ul><li>use-built-in-template: false (turn off the build in template for displaying selected persons)</li><li>max-row-selectable: maximum number of people that could be selected in the pop-up modal</li></ul></div><div class=row><ctrp-person-adv-search-modal-button max-row-selectable=1 use-built-in-template=true allow-overwrite=false></ctrp-person-adv-search-modal-button></div><div class="row animated-item" ng-show="selectedPersonsArray.length > 0"><table class="table table-bordered table-striped table-condensed"><thead><th>Remove</th><th>PO ID</th><th>Prefix</th><th>First Name</th><th>Last Name</th><th>Suffix</th><th>Email</th><th>Phone</th><th>Source Context</th><th>Source Status</th></thead><tbody><tr ng-repeat="person in selectedPersonsArray | filter: {\'name\': selectedPersonFilter} track by $index" class=animated-item ng-class="person._destroy == true ? \'deleted-text\' : \'\'"><td style="vertical-align: middle"><label class="btn btn-default" ng-click=toggleSelection($index)><i class=glyphicon ng-class="person._destroy == true ? \'glyphicon-ok-circle\' : \'glyphicon-remove-circle\'"></i></label></td><td>{{person.id}}</td><td>{{person.prefix}}</td><td>{{person.fname}}</td><td>{{person.lname}}</td><td>{{person.suffix}}</td><td>{{person.email}}</td><td>{{person.phone}}</td><td>{{person.source_context}}</td><td>{{person.source_status}}</td></tr></tbody></table></div><div class=row><ctrp-org-adv-search-modal-button max-row-selectable=1 use-built-in-template=true allow-overwrite=false></ctrp-org-adv-search-modal-button></div></div>'),e.put("app/pa/trial/registration/trialDetails.html",'<div class=row-fluid><div class="col-xs-12 drop-shadow"><div class=row><p></p><h4 ng-if=trialDetailView.curTrial.new>Register Trial</h4><h4 ng-if=!trialDetailView.curTrial.new>Edit Trial</h4><p></p></div><div class=row><p><button type=button class="btn btn-primary" ng-show=!trialDetailView.collapsed ng-click=trialDetailView.collapseAccordion()><i class="glyphicon glyphicon-minus"></i> Collapse All</button> <button type=button class="btn btn-primary" ng-show=trialDetailView.collapsed ng-click=trialDetailView.expandAccordion()><i class="glyphicon glyphicon-plus"></i> Expand All</button></p></div><div class=row><form class="form form-horizontal" role=form name=trial_form novalidate ctrp-submit=trialDetailView.updateTrial()><uib-accordion close-others=false><uib-accordion-group is-open=trialDetailView.accordions[0]><uib-accordion-heading>Trial Identifiers <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[0], \'glyphicon-chevron-right\': !trialDetailView.accordions[0]}"></i></uib-accordion-heading><div class="form-group required"><label class="control-label col-xs-12 col-sm-3">Study Source:</label><div class="col-xs-12 col-sm-6"><select class="form-control input-sm" id=study_source ng-model=trialDetailView.curTrial.study_source_id ng-options="studySource.id as studySource.name for studySource in trialDetailView.studySourceArr" disabled><option value>--</option></select></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.lead_protocol_id) || (trial_form.lead_protocol_id.$error.required && trialDetailView.showLpiError)}"><label class="control-label col-xs-12 col-sm-3">Lead Protocol Identifier:</label><div class="col-xs-12 col-sm-6"><input type=text restriction-field class="form-control input-sm" id=lead_protocol_id name=lead_protocol_id ng-model=trialDetailView.curTrial.lead_protocol_id required autofocus> <span class=form-control-feedback ng-show=trialDetailView.curTrial.lead_protocol_id.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.lead_protocol_id) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show="ctrpbtn.trial_form.needsAttention(trial_form.lead_protocol_id) || (trial_form.lead_protocol_id.$error.required && trialDetailView.showLpiError)">Lead Protocol Identifier is required</span></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Other Trial Identifier:</label><div class="col-xs-12 col-sm-6"><table class="table table-striped table-condensed"><thead><th>Protocol ID Origin</th><th>Protocol ID</th><th></th></thead><tbody><tr><td class=col-md-4><div><select restriction-field class="form-control input-sm" id=protocol_id_origin ng-model=trialDetailView.protocol_id_origin_id><option value>-Select an Origin-</option><option ng-repeat="origin in trialDetailView.protocolIdOriginArr" value={{origin.id}}>{{origin.name}}</option></select></div></td><td class=col-md-6><div><input restriction-field type=text class="form-control input-sm" id=protocol_id ng-model=trialDetailView.protocol_id></div></td><td class=col-md-2><div><button type=button restriction-field class="btn btn-primary" ng-click=trialDetailView.addOtherId()><i class="glyphicon glyphicon-plus"></i> Add</button></div></td></tr></tbody></table><table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedOtherIds.length > 0"><thead><th>Protocol ID Origin</th><th>Protocol ID</th><th></th></thead><tbody><tr ng-repeat="otherId in trialDetailView.addedOtherIds track by $index" ng-class="otherId._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'"><td class=col-md-4>{{otherId.protocol_id_origin_name}}</td><td class=col-md-6>{{otherId.protocol_id}}</td><td class=col-md-2 style="vertical-align: middle"><label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, \'other_id\')"><i ng-class="otherId._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[1]><uib-accordion-heading>Trial Details <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[1], \'glyphicon-chevron-right\': !trialDetailView.accordions[1]}"></i></uib-accordion-heading><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.official_title)}"><label class="control-label col-xs-12 col-sm-3">Official Title:</label><div class="col-xs-12 col-sm-6"><textarea restriction-field class="form-control input-sm" id=official_title name=official_title ng-model=trialDetailView.curTrial.official_title required>\n                                <span class=form-control-feedback ng-show=trialDetailView.curTrial.official_title.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.official_title) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span>\n                                <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.official_title)>\n                                    Official Title is required\n                                </span>\n                            </textarea></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.phase)}"><label class="control-label col-xs-12 col-sm-3">Phase:</label><div class="col-xs-12 col-sm-6"><select restriction-field class="form-control input-sm" id=phase name=phase ng-model=trialDetailView.curTrial.phase_id ng-options="phase.id as phase.name for phase in trialDetailView.phaseArr" required><option value>-Select a Phase-</option></select><span class=form-control-feedback ng-show=trialDetailView.curTrial.phase_id.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.phase) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.phase)>Phase is required</span></div></div><div class="form-group required"><label class="control-label col-xs-12 col-sm-3">Pilot?</label><div class="col-xs-12 col-sm-9"><label class=radio-inline><input type=radio restriction-field ng-model=trialDetailView.curTrial.pilot value=No> No</label> <label class=radio-inline><input type=radio restriction-field ng-model=trialDetailView.curTrial.pilot value=Yes> Yes</label></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.research_category)}"><label class="control-label col-xs-12 col-sm-3">Research Category:</label><div class="col-xs-12 col-sm-6"><select restriction-field class="form-control input-sm" id=research_category name=research_category ng-model=trialDetailView.curTrial.research_category_id ng-options="category.id as category.name for category in trialDetailView.researchCategoryArr" required><option value>-Select a Research Category-</option></select><span class=form-control-feedback ng-show=trialDetailView.curTrial.research_category_id.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.research_category) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.research_category)>Research Category is required</span></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.primary_purpose)}"><label class="control-label col-xs-12 col-sm-3">Primary Purpose:</label><div class="col-xs-12 col-sm-6"><select restriction-field class="form-control input-sm" id=primary_purpose name=primary_purpose ng-model=trialDetailView.curTrial.primary_purpose_id ng-options="primaryPurpose.id as primaryPurpose.name for primaryPurpose in trialDetailView.primaryPurposeArr" ng-change="trialDetailView.watchOption(\'primary_purpose\')" required><option value>-Select a Primary Purpose-</option></select><span class=form-control-feedback ng-show=trialDetailView.curTrial.primary_purpose_id.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.primary_purpose) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.primary_purpose)>Primary Purpose is required</span></div></div><div ng-show=trialDetailView.showPrimaryPurposeOther class=form-group><label class="control-label col-xs-12 col-sm-3">Describe "Other" Primary Purpose:</label><div class="col-xs-12 col-sm-6"><textarea restriction-field class="form-control input-sm" id=primary_purpose_other ng-model=trialDetailView.curTrial.primary_purpose_other>\n                            </textarea></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Secondary Purpose:</label><div class="col-xs-12 col-sm-6"><select restriction-field class="form-control input-sm" id=secondary_purpose name=secondary_purpose ng-model=trialDetailView.curTrial.secondary_purpose_id ng-options="secondaryPurpose.id as secondaryPurpose.name for secondaryPurpose in trialDetailView.secondaryPurposeArr" ng-change="trialDetailView.watchOption(\'secondary_purpose\')"><option value>-Select a Secondary Purpose-</option></select></div></div><div ng-show=trialDetailView.showSecondaryPurposeOther class=form-group><label class="control-label col-xs-12 col-sm-3">Describe "Other" Secondary Purpose:</label><div class="col-xs-12 col-sm-6"><textarea restriction-field class="form-control input-sm" id=secondary_purpose_other ng-model=trialDetailView.curTrial.secondary_purpose_other>\n                            </textarea></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.accrual_disease_term)}"><label class="control-label col-xs-12 col-sm-3">Accrual Disease Terminology:</label><div class="col-xs-12 col-sm-6"><select restriction-field class="form-control input-sm" id=accrual_disease_term name=accrual_disease_term ng-model=trialDetailView.curTrial.accrual_disease_term_id ng-options="term.id as term.name for term in trialDetailView.accrualDiseaseTermArr" required><option value>-Select an Accrual Disease Terminology-</option></select><span class=form-control-feedback ng-show=trialDetailView.curTrial.accrual_disease_term_id.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.accrual_disease_term) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.accrual_disease_term)>Accrual Disease Terminology is required</span></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[2]><uib-accordion-heading>Lead Organization/Principal Investigator <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[2], \'glyphicon-chevron-right\': !trialDetailView.accordions[2]}"></i></uib-accordion-heading><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.lead_org_name)}"><label class="control-label col-xs-12 col-sm-3">Lead Organization:</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" name=lead_org_name disabled ng-model=trialDetailView.selectedLoArray[0].name required> <span class=form-control-feedback ng-show=trialDetailView.selectedLoArray[0].name.length ng-class="!ctrpbtn.ctrpbtn.trial_form.needsAttention(trial_form.lead_org_name) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.lead_org_name)>Lead Organization is required</span></div><div class="col-xs-12 col-xs-3"><ctrp-org-adv-search-modal-button max-row-selectable=1 use-built-in-template=false selected-orgs-array=trialDetailView.selectedLoArray></ctrp-org-adv-search-modal-button></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.pi_name)}"><label class="control-label col-xs-12 col-sm-3">Principal Investigator:</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" disabled value="{{trialDetailView.selectedPiArray[0].fname + \' \' + (trialDetailView.selectedPiArray[0].mname ? trialDetailView.selectedPiArray[0].mname + \' \' : \'\') + trialDetailView.selectedPiArray[0].lname}}"> <input type=hidden name=pi_name ng-model=trialDetailView.selectedPiArray[0] required> <span class=form-control-feedback ng-show=trialDetailView.selectedPiArray[0].length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.pi_name) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.pi_name)>Principal Investigator is required</span></div><div class="col-xs-12 col-xs-3"><ctrp-person-adv-search-modal-button max-row-selectable=1 use-built-in-template=false selected-persons-array=trialDetailView.selectedPiArray></ctrp-person-adv-search-modal-button></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[3]><uib-accordion-heading>Sponsor/Responsible Party <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[3], \'glyphicon-chevron-right\': !trialDetailView.accordions[3]}"></i></uib-accordion-heading><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.sponsor_name)}"><label class="control-label col-xs-12 col-sm-3">Sponsor:</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" name=sponsor_name disabled ng-model=trialDetailView.selectedSponsorArray[0].name required> <span class=form-control-feedback ng-show=trialDetailView.selectedSponsorArray[0].name.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.sponsor_name) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.sponsor_name)>Sponsor is required</span></div><div class="col-xs-12 col-sm-3"><ctrp-org-adv-search-modal-button max-row-selectable=1 use-built-in-template=false selected-orgs-array=trialDetailView.selectedSponsorArray></ctrp-org-adv-search-modal-button></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.responsible_party)}"><label class="control-label col-xs-12 col-sm-3">Responsible Party:</label><div class="col-xs-12 col-sm-6"><select restriction-field class="form-control input-sm" id=responsible_party name=responsible_party ng-model=trialDetailView.curTrial.responsible_party_id ng-options="responsibleParty.id as responsibleParty.name for responsibleParty in trialDetailView.responsiblePartyArr" ng-change="trialDetailView.watchOption(\'responsible_party\')" required><option value>-Select a Responsible Party-</option></select><span class=form-control-feedback ng-show=trialDetailView.curTrial.responsible_party_id.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.responsible_party) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.responsible_party)>Responsible Party is required</span></div></div><div ng-show=trialDetailView.showInvestigator class=form-group><label class="control-label col-xs-12 col-sm-3">Investigator:</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" disabled value="{{trialDetailView.selectedInvArray[0].fname + \' \' + (trialDetailView.selectedInvArray[0].mname ? trialDetailView.selectedInvArray[0].mname + \' \' : \'\') + trialDetailView.selectedInvArray[0].lname}}"></div><div class="col-xs-12 col-sm-3" ng-show=trialDetailView.showInvSearchBtn><ctrp-person-adv-search-modal-button max-row-selectable=1 use-built-in-template=false selected-persons-array=trialDetailView.selectedInvArray></ctrp-person-adv-search-modal-button></div></div><div ng-show=trialDetailView.showInvestigator class=form-group><label class="control-label col-xs-12 col-sm-3">Investigator Title:</label><div class="col-xs-12 col-sm-6"><input type=text restriction-field class="form-control input-sm" id=investigator_title ng-model=trialDetailView.curTrial.investigator_title></div></div><div ng-show=trialDetailView.showInvestigator class=form-group><label class="control-label col-xs-12 col-sm-3">Investigator Affiliation:</label><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" disabled value={{trialDetailView.selectedIaArray[0].name}}></div><div class="col-xs-12 col-sm-3" ng-show=!trialDetailView.showInvSearchBtn><ctrp-org-adv-search-modal-button max-row-selectable=1 use-built-in-template=false selected-orgs-array=trialDetailView.selectedIaArray></ctrp-org-adv-search-modal-button></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[4]><uib-accordion-heading>Data Table 4 Information <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[4], \'glyphicon-chevron-right\': !trialDetailView.accordions[4]}"></i></uib-accordion-heading><div class=form-group><label class="control-label col-xs-12 col-sm-3">Data Table 4 Funding Source:</label><div class="col-xs-12 col-sm-9"><ctrp-org-adv-search-modal-button max-row-selectable=1 use-built-in-template=false selected-orgs-array=trialDetailView.selectedFsArray allow-overwrite=false></ctrp-org-adv-search-modal-button></div></div><div ng-repeat="fs in trialDetailView.addedFses track by $index" class=form-group><div class="col-xs-12 col-sm-3"></div><div class="col-xs-12 col-sm-6"><input type=text class="form-control input-sm" ng-class="fs._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'" disabled value={{fs.organization_name}}></div><label restriction-field class="col-xs-12 col-sm-1 btn btn-default" ng-click="trialDetailView.toggleSelection($index, \'funding_source\')"><i ng-class="fs._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Program code:</label><div class="col-xs-12 col-sm-6"><input type=text restriction-field class="form-control input-sm" id=program_code ng-model=trialDetailView.curTrial.program_code></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[5]><uib-accordion-heading>NIH Grant Information (for NIH funded Trials) <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[5], \'glyphicon-chevron-right\': !trialDetailView.accordions[5]}"></i></uib-accordion-heading><div class="form-group required"><label class="control-label col-xs-12 col-sm-3">Is this trial funded by an NCI grant?</label><div class="col-xs-12 col-sm-9"><label class=radio-inline><input type=radio restriction-field ng-model=trialDetailView.curTrial.grant_question value=Yes> Yes</label> <label class=radio-inline><input type=radio restriction-field ng-model=trialDetailView.curTrial.grant_question value=No> No</label></div></div><div class=form-group><div class=col-sm-12><table class="table table-striped table-condensed"><thead><th>Funding Mechanism</th><th>Institute Code</th><th>Serial Number</th><th>NCI Division/Program Code</th><th></th></thead><tbody><tr><td class=col-md-2><div><select restriction-field class="form-control input-sm" id=funding_mechanism ng-model=trialDetailView.funding_mechanism><option value>-Select-</option><option ng-repeat="mechanism in trialDetailView.fundingMechanismArr" value={{mechanism.code}}>{{mechanism.code}}</option></select></div></td><td class=col-md-2><div><select restriction-field class="form-control input-sm" id=institute_code ng-model=trialDetailView.institute_code><option value>-Select-</option><option ng-repeat="institute in trialDetailView.instituteCodeArr" value={{institute.code}}>{{institute.code}}</option></select></div></td><td class=col-md-3><div><input restriction-field class="form-control input-sm" id=serial_number ng-model=trialDetailView.serial_number></div></td><td class=col-md-4><div><select restriction-field class="form-control input-sm" id=nci ng-model=trialDetailView.nci><option value>-Select-</option><option ng-repeat="nci in trialDetailView.nciArr" value={{nci.code}}>{{nci.code}}</option></select></div></td><td class=col-md-1><div><button type=button restriction-field class="btn btn-primary" ng-click=trialDetailView.addGrant()><i class="glyphicon glyphicon-plus"></i> Add</button></div></td></tr></tbody></table><table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedGrants.length > 0"><thead><th>Funding Mechanism</th><th>Institute Code</th><th>Serial Number</th><th>NCI Division/Program Code</th><th></th></thead><tbody><tr ng-repeat="grant in trialDetailView.addedGrants track by $index" ng-class="grant._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'"><td class=col-md-2>{{grant.funding_mechanism}}</td><td class=col-md-2>{{grant.institute_code}}</td><td class=col-md-3>{{grant.serial_number}}</td><td class=col-md-4>{{grant.nci}}</td><td class=col-md-1 style="vertical-align: middle"><label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, \'grant\')"><i ng-class="grant._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[6]><uib-accordion-heading>Trial Status <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[6], \'glyphicon-chevron-right\': !trialDetailView.accordions[6]}"></i></uib-accordion-heading><div class=form-group><div class=col-sm-12><table class="table table-striped table-condensed"><thead><th>Status Date</th><th>Status</th><th>Why Study Stopped</th><th></th></thead><tbody><tr><td class=col-md-3><div class="input-group add-on date datepicker" date-date-format=yyyy-mm-dd><input type=text class="form-control input-sm" datepicker-popup={{trialDetailView.dateFormat}} ng-model=trialDetailView.status_date is-open=trialDetailView.status_date_opened datepicker-options=trialDetailView.dateOptions ng-required=false close-text=Close disabled> <span class=input-group-btn><button restriction-field type=button class="btn btn-default" ng-click="trialDetailView.openCalendar($event, \'status_date\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></td><td class=col-md-4><div><select restriction-field class="form-control input-sm" id=trial_status ng-model=trialDetailView.trial_status_id ng-change="trialDetailView.watchOption(\'trial_status\')"><option value>-Select a Trial Status-</option><option ng-repeat="trialStatus in trialDetailView.trialStatusArr" value={{trialStatus.id}}>{{trialStatus.name}}</option></select></div></td><td class=col-md-4><div><textarea style="resize: vertical;" class="form-control input-sm" id=why_stopped ng-model=trialDetailView.why_stopped ng-disabled=trialDetailView.why_stopped_disabled>\n                                            </textarea></div></td><td class=col-md-1><div><button type=button restriction-field class="btn btn-primary" ng-click=trialDetailView.addStatus()><i class="glyphicon glyphicon-plus"></i> Add</button></div></td></tr></tbody></table><table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedStatuses.length > 0"><thead><th>Status Date</th><th>Status</th><th>Why Study Stopped</th><th></th></thead><tbody><tr ng-repeat="status in trialDetailView.addedStatuses track by $index" ng-class="status._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'"><td class=col-md-3>{{status.status_date}}</td><td class=col-md-4>{{status.trial_status_name}}</td><td class=col-md-4>{{status.why_stopped}}</td><td class=col-md-1 style="vertical-align: middle"><label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, \'trial_status\')"><i ng-class="status._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[7]><uib-accordion-heading>Trial Dates <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[7], \'glyphicon-chevron-right\': !trialDetailView.accordions[7]}"></i></uib-accordion-heading><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.start_date) || ctrpbtn.trial_form.needsAttention(trial_form.start_date_qual)}"><label class="control-label col-xs-12 col-sm-3">Trial Start Date:</label><div class="col-xs-12 col-sm-3"><div class="input-group add-on date datepicker" date-date-format=yyyy-mm-dd><input type=text class="form-control input-sm" name=start_date datepicker-popup={{trialDetailView.dateFormat}} ng-model=trialDetailView.curTrial.start_date is-open=trialDetailView.start_date_opened datepicker-options=trialDetailView.dateOptions close-text=Close required disabled> <span class=input-group-btn><button restriction-field type=button class="btn btn-default" ng-click="trialDetailView.openCalendar($event, \'start_date\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div><span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.start_date)>Trial Start Date is required</span></div><div class="col-xs-12 col-sm-6"><label class=radio-inline><input type=radio name=start_date_qual restriction-field ng-model=trialDetailView.curTrial.start_date_qual value=Actual ng-required=!trialDetailView.curTrial.start_date_qual> Actual</label> <label class=radio-inline><input type=radio name=start_date_qual restriction-field ng-model=trialDetailView.curTrial.start_date_qual value=Anticipated ng-required=!trialDetailView.curTrial.start_date_qual> Anticipated</label> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.start_date_qual)>Trial Start Date Type is required</span></div></div><div class="form-group required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.primary_comp_date) || ctrpbtn.trial_form.needsAttention(trial_form.primary_comp_date_qual)}"><label class="control-label col-xs-12 col-sm-3">Primary Completion Date:</label><div class="col-xs-12 col-sm-3"><div class="input-group add-on date datepicker" date-date-format=yyyy-mm-dd><input type=text class="form-control input-sm" name=primary_comp_date datepicker-popup={{trialDetailView.dateFormat}} ng-model=trialDetailView.curTrial.primary_comp_date is-open=trialDetailView.primary_comp_date_opened datepicker-options=trialDetailView.dateOptions close-text=Close required disabled> <span class=input-group-btn><button restriction-field type=button class="btn btn-default" ng-click="trialDetailView.openCalendar($event, \'primary_comp_date\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div><span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.primary_comp_date)>Primary Completion Date is required</span></div><div class=col-sm-6><label class=radio-inline><input type=radio name=primary_comp_date_qual restriction-field ng-model=trialDetailView.curTrial.primary_comp_date_qual value=Actual ng-required=!trialDetailView.curTrial.primary_comp_date_qual> Actual</label> <label class=radio-inline><input type=radio name=primary_comp_date_qual restriction-field ng-model=trialDetailView.curTrial.primary_comp_date_qual value=Anticipated ng-required=!trialDetailView.curTrial.primary_comp_date_qual> Anticipated</label> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.primary_comp_date_qual)>Primary Completion Date Type is required</span></div></div><div class="form-group required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.comp_date) || ctrpbtn.trial_form.needsAttention(trial_form.comp_date_qual)}"><label class="control-label col-xs-12 col-sm-3">Completion Date:</label><div class="col-xs-12 col-sm-3"><div class="input-group add-on date datepicker" date-date-format=yyyy-mm-dd><input type=text class="form-control input-sm" name=comp_date datepicker-popup={{trialDetailView.dateFormat}} ng-model=trialDetailView.curTrial.comp_date is-open=trialDetailView.comp_date_opened datepicker-options=trialDetailView.dateOptions close-text=Close required disabled> <span class=input-group-btn><button restriction-field type=button class="btn btn-default" ng-click="trialDetailView.openCalendar($event, \'comp_date\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div><span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.comp_date)>Completion Date is required</span></div><div class="col-xs-12 col-sm-6"><label class=radio-inline><input type=radio name=comp_date_qual restriction-field ng-model=trialDetailView.curTrial.comp_date_qual value=Actual ng-required=!trialDetailView.curTrial.comp_date_qual> Actual</label> <label class=radio-inline><input type=radio name=comp_date_qual restriction-field ng-model=trialDetailView.curTrial.comp_date_qual value=Anticipated ng-required=!trialDetailView.curTrial.comp_date_qual> Anticipated</label> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.comp_date_qual)>Completion Date Type is required</span></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[8]><uib-accordion-heading>FDA IND/IDE Information for applicable trials <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[8], \'glyphicon-chevron-right\': !trialDetailView.accordions[8]}"></i></uib-accordion-heading><div class=form-group><div class=col-sm-12><table class="table table-striped table-condensed"><thead><th>IND/IDE Types</th><th>IND/IDE Number</th><th>IND/IDE Grantor</th><th>IND/IDE Holder Type</th><th>NIH Institution, NCI Division/Program Code (if applicable)</th><th></th></thead><tbody><tr><td class=col-md-2><div><select restriction-field class="form-control input-sm" id=ind_ide_type ng-model=trialDetailView.ind_ide_type ng-change="trialDetailView.watchOption(\'ind_ide_type\')"><option value>-Select-</option><option value=IND>IND</option><option value=IDE>IDE</option></select></div></td><td class=col-md-2><div><input restriction-field class="form-control input-sm" id=ind_ide_number ng-model=trialDetailView.ind_ide_number></div></td><td class=col-md-2><div><select restriction-field class="form-control input-sm" id=grantor ng-model=trialDetailView.grantor><option value>-Select-</option><option ng-repeat="grantor in trialDetailView.grantorArr" value={{grantor}}>{{grantor}}</option></select></div></td><td class=col-md-2><div><select restriction-field class="form-control input-sm" id=holder_type ng-model=trialDetailView.holder_type_id ng-change="trialDetailView.watchOption(\'holder_type\')"><option value>-Select-</option><option ng-repeat="holderType in trialDetailView.holderTypeArr" value={{holderType.id}}>{{holderType.name}}</option></select></div></td><td class=col-md-3><div><select restriction-field class="form-control input-sm" id=nih_nci ng-model=trialDetailView.nih_nci><option value>-Select-</option><option ng-repeat="nihNci in trialDetailView.nihNciArr" value={{nihNci.code}}>{{nihNci.code}}</option></select></div></td><td class=col-md-1><div><button type=button restriction-field class="btn btn-primary" ng-click=trialDetailView.addIndIde()><i class="glyphicon glyphicon-plus"></i> Add</button></div></td></tr></tbody></table><table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedIndIdes.length > 0"><thead><th>IND/IDE Types</th><th>IND/IDE Number</th><th>IND/IDE Grantor</th><th>IND/IDE Holder Type</th><th>NIH Institution, NCI Division/Program Code (if applicable)</th><th></th></thead><tbody><tr ng-repeat="indIde in trialDetailView.addedIndIdes track by $index" ng-class="indIde._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'"><td class=col-md-2>{{indIde.ind_ide_type}}</td><td class=col-md-2>{{indIde.ind_ide_number}}</td><td class=col-md-2>{{indIde.grantor}}</td><td class=col-md-2>{{indIde.holder_type_name}}</td><td class=col-md-3>{{indIde.nih_nci}}</td><td class=col-md-1 style="vertical-align: middle"><label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, \'ind_ide\')"><i ng-class="indIde._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[9]><uib-accordion-heading>Regulatory Information <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[9], \'glyphicon-chevron-right\': !trialDetailView.accordions[9]}"></i></uib-accordion-heading><div class=form-group><label class="control-label col-xs-12 col-sm-3">Trial Oversight Authority:</label><div class="col-xs-12 col-sm-6"><table class="table table-striped table-condensed"><thead><th>Country</th><th>Organization</th><th></th></thead><tbody><tr><td class=col-md-4><div><select restriction-field class="form-control input-sm" id=authority_country ng-model=trialDetailView.authority_country ng-change="trialDetailView.watchOption(\'authority_country\')"><option value>-Select a Country-</option><option ng-repeat="country in trialDetailView.countryArr track by $index" value={{country.name}} ng-selected="trialDetailView.curTrial.authority_country == country.name">{{country.name}}</option></select></div></td><td class=col-md-6><div><select restriction-field class="form-control input-sm" id=authority_org ng-model=trialDetailView.authority_org><option value>-Select an Organization-</option><option ng-repeat="org in trialDetailView.authorityOrgArr track by $index" value={{org}} ng-selected="trialDetailView.curTrial.authority_org == org">{{org}}</option></select></div></td><td class=col-md-2><div><button type=button restriction-field class="btn btn-primary" ng-click=trialDetailView.addAuthority()><i class="glyphicon glyphicon-plus"></i> Add</button></div></td></tr></tbody></table><table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedAuthorities.length > 0"><thead><th>Country</th><th>Organization</th><th></th></thead><tbody><tr ng-repeat="authority in trialDetailView.addedAuthorities track by $index" ng-class="authority._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'"><td class=col-md-4>{{authority.country}}</td><td class=col-md-6>{{authority.organization}}</td><td class=col-md-2 style="vertical-align: middle"><label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, \'authority\')"><i ng-class="authority._destroy == true ? \'glyphicon glyphicon-ok-circle\' : \'glyphicon glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.interventin_indicator)}"><label class="control-label col-xs-12 col-sm-3">FDA Regulated Intervention Indicator:</label><div class="col-xs-12 col-sm-9"><label class=radio-inline><input type=radio restriction-field name=interventin_indicator ng-model=trialDetailView.curTrial.intervention_indicator value=No ng-required=!trialDetailView.curTrial.intervention_indicator> No</label> <label class=radio-inline><input type=radio restriction-field name=interventin_indicator ng-model=trialDetailView.curTrial.intervention_indicator value=Yes ng-required=!trialDetailView.curTrial.intervention_indicator> Yes</label> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.interventin_indicator)>FDA Regulated Intervention Indicator is required</span></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.sec801_indicator)}"><label class="control-label col-xs-12 col-sm-3">Section 801 Indicator:</label><div class="col-xs-12 col-sm-9"><label class=radio-inline><input type=radio restriction-field name=sec801_indicator ng-model=trialDetailView.curTrial.sec801_indicator value=No ng-required=!trialDetailView.curTrial.sec801_indicator> No</label> <label class=radio-inline><input type=radio restriction-field name=sec801_indicator ng-model=trialDetailView.curTrial.sec801_indicator value=Yes ng-required=!trialDetailView.curTrial.sec801_indicator ng-disabled="trialDetailView.curTrial.intervention_indicator == \'No\'"> Yes</label> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.sec801_indicator)>Section 801 Indicator is required</span></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.data_monitor_indicator)}"><label class="control-label col-xs-12 col-sm-3">Data Monitoring Committee Appointed Indicator:</label><div class="col-xs-12 col-sm-9"><label class=radio-inline><input type=radio name=data_monitor_indicator restriction-field ng-model=trialDetailView.curTrial.data_monitor_indicator value=No ng-required=!trialDetailView.curTrial.data_monitor_indicator> No</label> <label class=radio-inline><input type=radio name=data_monitor_indicator restriction-field ng-model=trialDetailView.curTrial.data_monitor_indicator value=Yes ng-required=!trialDetailView.curTrial.data_monitor_indicator> Yes</label> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.data_monitor_indicator)>Data Monitoring Committee Appointed Indicator is required</span></div></div></uib-accordion-group><uib-accordion-group is-open=trialDetailView.accordions[10]><uib-accordion-heading>Trial Related Documents <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': trialDetailView.accordions[10], \'glyphicon-chevron-right\': !trialDetailView.accordions[10]}"></i></uib-accordion-heading><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.protocol_document)}"><label class="control-label col-xs-12 col-sm-3">Protocol Document:</label><div class="col-sm-9 form-file-upload"><input type=file restriction-field ngf-select ng-model=trialDetailView.protocol_document name=protocol_document ngf-max-size=10MB ng-required="trialDetailView.curTrial.new || (!trialDetailView.curTrial.new && trialDetailView.protocolDocNum === 0)"> <span class=form-control-feedback ng-show=trialDetailView.protocol_document.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.protocol_document) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.protocol_document)>Protocol Document is required</span></div></div><div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == \'Protocol Document\'" class=form-group><label class="control-label col-xs-12 col-sm-3"></label><div class="col-xs-12 col-sm-9"><a ng-class="document._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'" href=/ctrp/registry/trial_documents/download/{{document.id}}>{{document.file_name}}</a> <span restriction-field ng-click="trialDetailView.toggleSelection($index, \'document\')" class="btn glyphicon glyphicon-trash"></span></div></div><div class="form-group has-feedback required" ng-class="{\'has-error\': ctrpbtn.trial_form.needsAttention(trial_form.irb_approval)}"><label class="control-label col-xs-12 col-sm-3">IRB Approval:</label><div class="col-sm-9 form-file-upload"><input type=file restriction-field ngf-select ng-model=trialDetailView.irb_approval name=irb_approval ngf-max-size=10MB ng-required="trialDetailView.curTrial.new || (!trialDetailView.curTrial.new && trialDetailView.irbApprovalNum === 0)"> <span class=form-control-feedback ng-show=trialDetailView.irb_approval.length ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.irb_approval) ? \'glyphicon glyphicon-ok glyphicon-green\' : \'glyphicon glyphicon-exclamation-sign glyphicon-red\'"></span> <span class=help-block ng-show=ctrpbtn.trial_form.needsAttention(trial_form.irb_approval)>IRB Approval is required</span></div></div><div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == \'IRB Approval\'" class=form-group><label class="control-label col-xs-12 col-sm-3"></label><div class="col-xs-12 col-sm-9"><a ng-class="document._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'" href=/ctrp/registry/trial_documents/download/{{document.id}}>{{document.file_name}}</a> <span restriction-field ng-click="trialDetailView.toggleSelection($index, \'document\')" class="btn glyphicon glyphicon-trash"></span></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">List of Participating Sites:</label><div class="col-sm-9 form-file-upload"><input type=file restriction-field ngf-select ng-model=trialDetailView.participating_sites name=participating_sites ngf-max-size=10MB></div></div><div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == \'List of Participating Sites\'" class=form-group><label class="control-label col-xs-12 col-sm-3"></label><div class="col-xs-12 col-sm-9"><a ng-class="document._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'" href=/ctrp/registry/trial_documents/download/{{document.id}}>{{document.file_name}}</a> <span restriction-field ng-click="trialDetailView.toggleSelection($index, \'document\')" class="btn glyphicon glyphicon-trash"></span></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3">Informed Consent Document:</label><div class="col-sm-9 form-file-upload"><input type=file restriction-field ngf-select ng-model=trialDetailView.informed_consent name=informed_consent ngf-max-size=10MB></div></div><div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == \'Informed Consent\'" class=form-group><label class="control-label col-xs-12 col-sm-3"></label><div class="col-xs-12 col-sm-9"><a ng-class="document._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'" href=/ctrp/registry/trial_documents/download/{{document.id}}>{{document.file_name}}</a> <span restriction-field ng-click="trialDetailView.toggleSelection($index, \'document\')" class="btn glyphicon glyphicon-trash"></span></div></div><div ng-repeat="i in trialDetailView.getNumArr(trialDetailView.otherDocNum) track by $index"><div class=form-group><label class="control-label col-xs-12 col-sm-3">Other:</label><div class="col-sm-3 form-file-upload"><input type=file restriction-field ngf-select ng-model=trialDetailView.other_documents[$index] name=other_documents ngf-max-size=10MB></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3"></label><div class="col-xs-12 col-sm-6"><input type=text restriction-field class="form-control input-sm" ng-model=trialDetailView.other_document_subtypes[$index] placeholder="Please describe other document"></div></div></div><div class=form-group><label class="control-label col-xs-12 col-sm-3"></label><div class="col-xs-12 col-sm-9"><button type=button restriction-field class="btn btn-primary" ng-click=trialDetailView.addOtherDoc()><i class="glyphicon glyphicon-plus"></i> Add More ...</button></div></div><div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == \'Other Document\'" class=form-group><label class="control-label col-xs-12 col-sm-3"></label><div class="col-xs-12 col-sm-9"><a ng-class="document._destroy == true ? \'deleted-text animated-item\' : \'animated-item\'" href=/ctrp/registry/trial_documents/download/{{document.id}}>{{document.file_name}}</a> <span restriction-field ng-click="trialDetailView.toggleSelection($index, \'document\')" class="btn glyphicon glyphicon-trash"></span><br>{{document.document_subtype}}</div></div></uib-accordion-group></uib-accordion><div class=form-group ng-hide="trialDetailView.curTrial.new || !trialDetailView.curTrial.created_by"><label class="control-label col-xs-12 col-sm-3">Created By:</label><div class="col-xs-12 col-sm-6 form-text">{{trialDetailView.curTrial.created_by}} ({{trialDetailView.curTrial.created_at | date: \'dd-MMM-yyyy H:mm\'}})</div></div><div class=form-group ng-hide="trialDetailView.curTrial.new || !trialDetailView.curTrial.updated_by"><label class="control-label col-xs-12 col-sm-3">Updated By:</label><div class="col-xs-12 col-sm-6 form-text">{{trialDetailView.curTrial.updated_by}} ({{trialDetailView.curTrial.updated_at | date: \'dd-MMM-yyyy H:mm\'}})</div></div><div class="form-group no-bottom-margin"><div class="btn-toolbar col-xs-12"><button ng-show="trialDetailView.curTrial.new || trialDetailView.curTrial.is_draft" type=button restriction-field class="btn btn-primary pull-right" id=save_draft_btn ng-click=trialDetailView.saveDraft()>Save as Draft</button> <button type=submit restriction-field class="btn btn-primary pull-right" id=submit_btn>{{trial_form.$invalid ? \'Review\' : \'Submit\'}}</button> <button type=button restriction-field class="btn btn-warning pull-right" ng-click=trialDetailView.reload() ctrp-click-once><i class="glyphicon glyphicon-remove"></i> Reset</button></div></div></form></div><div class="row top-offset-xs"></div></div></div>'),
e.put("app/pa/trial/registration/trial_list.html",'<div class=row><div class="col-xs-12 drop-shadow"><div class=row><h4>Search Trials <small>* for wild card</small></h4></div><div class=row><form class="form form-horizontal" role=form><div class=row><div class="col-xs-12 col-sm-12 col-md-6"><div class=form-group><label for=protocol_id class="control-label col-xs-12 col-sm-3">Protocol ID:</label><div class="col-xs-12 col-sm-9"><input type=text id=protocol_id class="form-control input-sm" placeholder="Protocol ID" ng-model=trialView.searchParams.protocol_id auto-focus></div></div><div class=form-group><label for=phase class="control-label col-xs-12 col-sm-3">Phase:</label><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=phase ng-model=trialView.searchParams.phase><option value>-Select a Phase-</option><option ng-repeat="phase in trialView.phaseArr" value={{phase.code}}>{{phase.name}}</option></select></div></div><div class=form-group><label for=pilot class="control-label col-xs-12 col-sm-3">Pilot Trial?</label><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=pilot ng-model=trialView.searchParams.pilot><option value>-Select-</option><option value=No>No</option><option value=Yes>Yes</option></select></div></div><div class=form-group><label for=pilot class="control-label col-xs-12 col-sm-3">Organization Type?</label><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=org_type ng-model=trialView.searchParams.org_type><option value>-Select an Organization Type-</option><option value="Lead Organization">Lead Organization</option><option value=Sponsor>Sponsor</option></select></div></div><div class=form-group><label for=phase class="control-label col-xs-12 col-sm-3">Study Source:</label><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=study_source ng-model=trialView.searchParams.study_source><option value>-Select a Study Source-</option><option ng-repeat="studySource in trialView.studySourceArr" value={{studySource.code}}>{{studySource.name}}</option></select></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class=form-group><label for=official_title class="control-label col-xs-12 col-sm-3">Official Title:</label><div class="col-xs-12 col-sm-9"><input type=text id=official_title class="form-control input-sm" placeholder="Official Title" ng-model=trialView.searchParams.official_title></div></div><div class=form-group><label for=purpose class="control-label col-xs-12 col-sm-3">Purpose:</label><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=purpose ng-model=trialView.searchParams.purpose><option value>-Select a Purpose-</option><option ng-repeat="purpose in trialView.primaryPurposeArr" value={{purpose.code}}>{{purpose.name}}</option></select></div></div><div class=form-group><label for=official_title class="control-label col-xs-12 col-sm-3">Principal Investigator:</label><div class="col-xs-12 col-sm-9"><input type=text id=pi class="form-control input-sm" placeholder="Principal Investigator" ng-model=trialView.searchParams.pi></div></div><div class=form-group><label for=official_title class="control-label col-xs-12 col-sm-3">Organization:</label><div class="col-xs-12 col-sm-9"><input type=text id=org class="form-control input-sm" placeholder=Organization ng-model=trialView.searchParams.org></div></div></div></div><div class=row><div class=col-xs-12><div class=btn-toolbar><button type=submit class="btn btn-primary pull-right" id=submission_btn ng-click=trialView.searchTrials()><i class="glyphicon glyphicon-search"></i> Search</button> <button class="btn btn-warning pull-right" id=reset_btn ng-click=trialView.resetSearch()><i class="glyphicon glyphicon-remove"></i> Clear</button></div></div></div></form></div><div class=row ng-class="{\'top-offset-xs\': trialView.gridOptions.totalItems }"><div class=col-xs-12><div class=row ng-if="trialView.gridOptions.totalItems != null"><a href id=trial_search_results></a><p></p><h4>Trial Search Results: {{trialView.gridOptions.totalItems}} found</h4><p></p></div><div class="row animated-item" ng-if="trialView.gridOptions.data.length > 0"><div class=col-xs-12><div ui-grid=trialView.gridOptions ui-grid-pagination external-scopes=clickHandler class=grid></div></div></div></div></div><div class="row top-offset-xs"></div></div></div>'),e.put("app/modules/widgets/comment/comment-in-place-edit.html",'<form name=commentEditForm novalidate><md-input-container md-no-float ng-show=editMode><label ng-show="editMode && writeModeEnabled">Comment:</label> <textarea rows=1 cols=40 ng-model=model md-maxlength=4000 ng-maxlength=4000 auto-focus required></textarea></md-input-container><md-content><section layout=row layout-sm=column layout-align="center center" layout-wrap><md-button class=md-warn ng-click=cancelEdit() ng-show=editMode>Cancel</md-button><md-button md-no-ink class=md-primary ng-click=saveEdit() ng-disabled=!commentEditForm.$valid id=comment_edit_save_btn ng-show=editMode>Save</md-button></section></md-content></form><div ng-if="isEditable && writeModeEnabled"><span ng-mouseenter="showEdit = true" ng-mouseleave="showEdit = false"><span ng-hide=editMode ng-click=edit()>{{model}}</span> <a ng-show=showEdit ng-click=edit()>Edit</a></span></div><div ng-if="!isEditable || !writeModeEnabled"><span ng-mouseenter="showEdit = false" ng-mouseleave="showEdit = false"><span ng-hide=editMode>{{model}}</span></span></div>'),e.put("app/modules/widgets/comment/ctrp.widgets.comment-modal-template.html",'<md-dialog class=comment-modal flex=86><md-toolbar style="background-color: #4a4a4a"><div layout=row layout-align="start center" flex><ng-md-icon icon=close style="fill: red" size=24 ng-click=close()></ng-md-icon><span flex>Comments</span></div></md-toolbar><div id=toastr_message></div><md-dialog-content layout=column layout-padding><div ng-show=showCommentForm><form name=commentForm novalidate><md-input-container flex><label>Comment:</label><textarea columns=1 md-maxlength=4000 ng-maxlength=4000 ng-model=comment.content required></textarea></md-input-container><div class=form-group><div class="btn-toolbar col-xs-12 col-sm-9"><button type=submit class="btn btn-primary pull-right" ng-disabled=!commentForm.$valid id=comment_submit_btn ng-click=postComment(commentForm)><i class="glyphicon glyphicon-plus"></i> Submit</button> <button class="btn btn-warning pull-right" id=comment_reset_btn ng-click=toggleCommentFormShown()><i class="glyphicon glyphicon-arrow-up"></i> Close Form</button></div></div></form></div><div ng-show="commentList.length == 0"><strong>No comments yet</strong></div><div flex=33 class=md-3-line><div dir-paginate="comment in commentList | itemsPerPage: pagingOptions.pageSize" current-page=pagingOptions.currentPage pagination-id=comment><md-divider></md-divider><div class=md-list-item-text><div class=md-list-item-text><p class=md-caption><strong>#{{comment.index}} {{comment.username}}</strong> commented ({{comment.updated_at | date: "dd-MMM-yyyy H:mm"}}):</p><h5 class=md-body-1 in-place-edit=comment.content on-save="updateComment(comment.content, $index)" template=app/modules/widgets/comment/comment-in-place-edit.html is-editable={{comment.isEditable}}>{{comment.content}}, {{comment.isEditable}}</h5></div></div></div><dir-pagination-controls boundary-links=true pagination-id=comment></dir-pagination-controls></div></md-dialog-content><md-content flex><md-button ng-show=!showCommentForm ng-click=toggleCommentFormShown()><span flex><ng-md-icon icon=edit style="fill: blue" size=20 ng-click=close()></ng-md-icon>Write a comment</span></md-button></md-content></md-dialog>,'),e.put("app/modules/widgets/comment/ctrp.widgets.comment-panel-template.html",'<button class="btn btn-primary pull-right" ng-click=commentView.toggleRight() ng-show="buttonType !=\'icon\'"><ng-md-icon icon=comment style="fill: white"></ng-md-icon><span ng-if="commentView.commentList.length == 1">{{commentView.commentList.length}} Comment</span> <span ng-if="commentView.commentList.length > 1">{{commentView.commentList.length}} Comments</span> <span ng-if="commentView.commentList.length == 0">Comment</span></button><div class=sideNavBar><div layout=column class=relative layout-fill role=main><md-button class="md-fab md-fab-top-right" style="background-color: #007299" aria-label=Comment ng-click=commentView.toggleRight() ng-show="buttonType==\'icon\'"><ng-md-icon icon=comment></ng-md-icon><span flex ng-show="commentView.commentList.length > 0">{{commentView.commentList.length}}</span></md-button></div></div><md-sidenav side-nav-push-in layout=column class="md-sidenav-right md-white-frame-z5" md-component-id=right><md-toolbar style="background-color: #4a4a4a"><div layout=row layout-align="start center" flex><ng-md-icon icon=keyboard_arrow_right style="fill: red" size=24 ng-click=commentView.closeSideNav()></ng-md-icon><span flex>Comments</span></div></md-toolbar><div id=toastr_message></div><md-button restriction-field ng-show=!commentView.showCommentForm ng-click=commentView.toggleCommentFormShown()><span flex><ng-md-icon icon=edit style="fill: blue" size=20></ng-md-icon>Write a comment</span></md-button><md-content layout=column layout-padding><section ng-show=commentView.showCommentForm><form name=commentForm novalidate><div layout layout-sm=column></div><md-input-container flex><label>Comment:</label><textarea columns=1 md-maxlength=4000 ng-maxlength=4000 ng-model=commentView.comment.content required auto-focus></textarea></md-input-container><div class=form-group><div class="btn-toolbar col-xs-12 col-sm-9"><button type=submit class="btn btn-primary pull-right" ng-disabled=!commentForm.$valid id=comment_submit_btn ng-click=commentView.postComment(commentForm)><i class="glyphicon glyphicon-plus"></i> Submit</button> <button class="btn btn-warning pull-right" id=comment_reset_btn ng-click=commentView.toggleCommentFormShown()><i class="glyphicon glyphicon-arrow-up"></i> Close Form</button></div></div></form></section><section layout=row><br></section><div ng-show="commentView.commentList.length == 0"><strong>No comments yet</strong></div><div flex=33 class=md-3-line><div dir-paginate="comment in commentView.commentList | itemsPerPage: commentView.pagingOptions.pageSize" current-page=commentView.pagingOptions.currentPage pagination-id=comment><md-divider></md-divider><div class=md-list-item-text><div class=md-list-item-text><p class=md-caption><strong>#{{comment.index}} {{comment.username}}</strong> commented ({{comment.updated_at | date: "dd-MMM-yyyy H:mm"}}):</p><h5 class=md-body-1 in-place-edit=comment.content on-save="commentView.updateComment(comment.content, $index)" template=app/modules/widgets/comment/comment-in-place-edit.html is-editable={{comment.isEditable}}>{{comment.content}}, {{comment.isEditable}}</h5></div></div></div><dir-pagination-controls boundary-links=true pagination-id=comment></dir-pagination-controls></div></md-content></md-sidenav>'),e.put("app/po/organization/directives/advancedOrgSearchFormTemplate2.html",'<form class="form form-horizontal" role=form><div class=row ng-hide="searchWarningMessage==\'\'" ng-cloak><div class="alert alert-warning fade in"><a href class=close data-dismiss=alert>&times;</a> <strong>{{searchWarningMessage}}</strong></div></div><br><div class=row><div class="col-xs-12 col-md-6"><div class=form-group><div class="col-xs-12 col-sm-3"></div><div class="col-xs-12 col-sm-9"><div ng-class="searchParams.wc_search == true ? \'checkbox checkbox-info\' : \'checkbox checkbox-circle\'"><label for=wc_search><input type=checkbox id=wc_search ng-model=searchParams.wc_search> Exact Search</label></div></div></div><div class=form-group><label for=organization_name class="col-xs-12 col-sm-3 control-label">Name:</label><div class="col-xs-12 col-sm-5"><input type=text id=organization_name class="form-control input-sm" autocomplete=off placeholder="Organization Name" ng-model=searchParams.name auto-focus uib-typeahead="org for org in typeAheadNameSearch($viewValue)" ui-typeahead-loading=loadingOrganizations typeahead-min-length=3 typeahead-wait-ms=50 typeahead-no-results=noResults></div><div class="col-xs-12 col-sm-4"><div ng-class="searchParams.alias == true ? \'checkbox checkbox-info\' : \'checkbox checkbox-circle\'"><label for=alias_search><input type=checkbox id=alias_search ng-model=searchParams.alias> Search Alias</label></div></div></div><div class=form-group><label for=source_status class="control-label col-xs-12 col-sm-3">Source Status:</label><div ng-if="sourceStatuses.length > 1"><div class="col-xs-12 col-sm-3"><select class="form-control input-sm" id=source_status ng-model=searchParams.source_status><option value>Select a Status</option><option ng-repeat="status in sourceStatuses" value={{status.name}}>{{status.name}}</option></select></div></div><div ng-if="sourceStatuses.length === 1"><div class="col-xs-12 col-sm-3">{{sourceStatuses[0].name}}</div></div><label for=source_id class="control-label col-xs-12 col-sm-2">Source ID:</label><div class="col-xs-12 col-sm-4"><input type=text id=source_id class="form-control input-sm" placeholder="Source ID" ng-model=searchParams.source_id></div></div><div class=form-group><label for=city class="control-label col-xs-12 col-sm-3">City:</label><div class="col-xs-12 col-sm-9"><input type=text id=city class="form-control input-sm" placeholder=City ng-model=searchParams.city></div></div><div class=form-group><label for=country class="control-label col-xs-12 col-sm-3">Country:</label><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=country ng-model=searchParams.country ng-change=watchCountrySelection(searchParams.country)><option value selected>All Countries</option><option ng-repeat="country in countries" value={{country.name}}>{{country.name}}</option></select></div></div><div class=form-group><label for=state class="control-label col-xs-12 col-sm-3">State:</label><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=state ng-model=searchParams.state_province><option value>All States/Provinces</option><option ng-repeat="state in states track by state.name" value={{state.name}}>{{state.name}}</option></select></div></div><div class=form-group restriction-field=ROLE_CURATOR ignore-rw><label for=updated_by class="control-label col-xs-12 col-sm-3">Updated by:</label><div class="col-xs-12 col-sm-9"><input type=text class="form-control input-sm" id=updated_by ng-model=searchParams.updated_by placeholder=Username></div></div></div><div class="col-xs-12 col-md-6"><div class=form-group><label for=source_id class="control-label col-xs-12 col-sm-3">Source Context:</label><div ng-if="sourceContexts.length > 1"><div class="col-xs-12 col-sm-9"><select class="form-control input-sm" id=source_context ng-model=searchParams.source_context><option value ng-selected="searchParams.source_context==\'\'">All Contexts</option><option ng-repeat="context in sourceContexts" value={{context.name}}>{{context.name}}</option></select></div></div><div ng-if="sourceContexts.length == 1"><div class="col-xs-12 col-sm-9">{{sourceContexts[0].name}}</div></div></div><div class=form-group><label for=family_name class="control-label col-xs-12 col-sm-3">Family Name:</label><div class="col-xs-12 col-sm-9"><input type=text id=family_name class="form-control input-sm" placeholder="Family Name" ng-model=searchParams.family_name></div></div><div class=form-group><label for=postal_code class="control-label col-xs-12 col-sm-3">Postal Code:</label><div class="col-xs-12 col-sm-9"><input type=text id=postal_code class="form-control input-sm" placeholder="Postal Code" ng-model=searchParams.postal_code></div></div><div class=form-group><label for=phone class="control-label col-xs-12 col-sm-3">Phone:</label><div class="col-xs-12 col-sm-3"><input type=text id=phone class="form-control input-sm" placeholder=Phone ng-model=searchParams.phone></div><label for=email class="control-label col-xs-12 col-sm-2">Email:</label><div class="col-xs-12 col-sm-4"><input type=text id=email class="form-control input-sm" placeholder=Email ng-model=searchParams.email></div></div><div class=form-group restriction-field=ROLE_CURATOR ignore-rw><label for=start_date class="control-label col-xs-12 col-sm-3"><div class=dropdown><a href data-toggle=dropdown class=dropdown-toggle>Last Updated<b class=caret></b></a><ul class=dropdown-menu><li><a href ng-click="getDateRange(\'today\')">Today</a></li><li><a href ng-click="getDateRange(\'yesterday\')">Yesterday</a></li><li><a href ng-click="getDateRange(\'last7\')">Last 7 Days</a></li><li><a href ng-click="getDateRange(\'last30\')">Last 30 Days</a></li><li><a href ng-click="getDateRange(\'thisMonth\')">This Month</a></li><li><a href ng-click="getDateRange(\'lastMonth\')">Last Month</a></li><li><a href ng-click="getDateRange(\'clear\')">Clear</a></li></ul></div></label><div class="col-xs-12 col-sm-5"><div class="input-group add-on col-sm-12 date datepicker"><input type=text class="form-control input-sm" id=start_date name=startDate uib-datepicker-popup={{dateFormat}} show-weeks=false ng-model=searchParams.startDate is-open=startDateOpened datepicker-options=dateOptions ng-click="openCalendar($event, \'start\')" ng-required=false close-text=Close placeholder="Start Date"> <span class=input-group-btn><button type=button class="btn btn-default btn-calendar" ng-click="openCalendar($event, \'start\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-xs-12 col-sm-4"><div class="input-group add-on col-sm-12 date datepicker" ng-class="{\'has-error\': search_person_form.endDate.dateLaterThan && search_person_form.endDate.$dirty}"><input type=text class="form-control input-sm" id=end_date name=endDate uib-datepicker-popup={{dateFormat}} show-weeks=false ng-model=searchParams.endDate is-open=endDateOpened ng-click="openCalendar($event, \'end\')" datepicker-options=dateOptions date-later-than="{{searchParams.startDate| date: \'short\'}}" ng-required=false close-text=Close placeholder="End Date"> <span class=input-group-btn><button type=button class="btn btn-default btn-calendar" ng-click="openCalendar($event, \'end\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div><span ng-show=search_person_form.endDate.$error.dateLaterThan class="help-inline warning">End date should be no earlier than start date</span></div></div></div></div><div class=row><div class=col-xs-12><div class=btn-toolbar><button type=submit class="btn btn-primary pull-right" id=submission_btn ng-click="searchOrgs(\'fromStart\')"><i class="glyphicon glyphicon-search"></i> Search</button> <button class="btn btn-warning pull-right" id=reset_btn ng-click=resetSearch()><i class="glyphicon glyphicon-remove"></i> Clear</button></div></div></div></form><div class=row ng-class="{\'top-offset-xs\': gridOptions.totalItems != null }" ng-if="searchWarningMessage.length === 0"><div class=col-xs-12><div class=row ng-if="gridOptions.totalItems != null"><div class=col-xs-12><a href id=org_search_results></a><div ng-if="searchWarningMessage.length === 0"><p></p><h4>Organization Search Results: {{gridOptions.totalItems}} found</h4><p></p></div><div ng-if=!usedinmodal><h5 ng-show="gridOptions.totalItems > 0 && curationModeEnabled == true"><div class="alert alert-danger fade in" ng-show=curationReady><strong>Please confirm: {{nullifiedOrgName}} will be nullified</strong></div><button class=btn ng-click=commitNullification() ng-show=curationShown ng-disabled=!curationReady ng-class="curationReady ? \'btn-danger\' : \'btn-warning\'">Commit Nullification</button></h5></div></div></div><div class=row ng-hide="warningMessage==\'\'" ng-cloak><div class="alert alert-danger fade in"><a href class=close data-dismiss=alert>&times;</a> <strong>{{warningMessage}}</strong></div></div><div class="row animated-item" ng-if="gridOptions.data.length > 0"><div class=col-xs-12><div ui-grid=gridOptions ui-grid-pagination ui-grid-selection class=grid></div></div></div></div></div><div class="row top-offset-xs"></div>'),e.put("app/po/organization/directives/advancedOrgSearchModalButtonTemplate.html",'<div class=row><button type=button class="btn btn-primary" restriction-field id=org_search_modal ng-click="searchOrgs(\'lg\')"><i class="glyphicon glyphicon-search"></i> Search Organizations</button> <button ng-if=useBuiltInTemplate class="btn btn-danger" ng-click="batchSelect(\'removeAll\')" ng-show="savedSelection.length > 0"><i class="glyphicon glyphicon-remove"></i> Remove All Organizations</button></div><div ng-if=useBuiltInTemplate class="row animated-item top-offset-tiny" ng-show="savedSelection.length > 0"><table class="table table-bordered table-striped table-condensed"><thead><th width=10%>CTRP ID</th><th width=11%>Name</th><th width=10%>Source Context</th><th width=13%>Source ID</th><th width=14%>Source Status</th><th width=10%>City</th><th width=9%>State</th><th width=10%>Email</th><th width=13%>Phone</th><th width=1%></th></thead><tbody><tr ng-repeat="org in savedSelection track by $index" class=animated-item ng-class="org._destroy == true ? \'deleted-text\' : \'\'"><td>{{org.id}}</td><td>{{org.name}}</td><td>{{org.source_context}}</td><td>{{org.source_id}}</td><td>{{org.source_status}}</td><td>{{org.city}}</td><td>{{org.state_province}}</td><td>{{org.email}}</td><td>{{org.phone}}</td><td><label class="btn btn-default" ng-click=toggleSelection($index)><i class=glyphicon ng-class="org._destroy == true ? \'glyphicon-ok-circle\' : \'glyphicon-remove-circle\'"></i></label></td></tr></tbody></table></div>'),e.put("app/po/organization/directives/advanced_org_search_form_modal2.html",'<div id=adv-org-search-modal><div class=row><div class=col-sm-12><div class=modal-header><button type=button class=close data-dismiss=modal ng-click=advOrgSearchForm2ModalView.cancel()>&times;</button></div><div class=modal-body><div class=row><ctrp-advanced-org-search-form2 show-grid=true max-row-selectable=advOrgSearchForm2ModalView.maxRowSelectable curation-mode=false used-in-modal=true></ctrp-advanced-org-search-form2></div></div><div class=modal-footer><div class=col-xs-12><div class=btn-toolbar><button class="btn btn-primary pull-right" ng-click=advOrgSearchForm2ModalView.confirmSelection() ng-disabled="selectedOrgsArray.length == 0">Confirm Selection</button> <button class="btn btn-danger pull-right" ng-click=advOrgSearchForm2ModalView.cancel()><i class="glyphicon glyphicon-remove"></i> Close</button></div></div></div></div></div></div>'),e.put("app/po/person/directives/advancedPersonSearchFormTemplate.html",'<form class="form form-horizontal" role=form name=search_person_form novalidate><div class=row ng-hide="searchWarningMessage==\'\'" ng-cloak><div class="alert alert-warning fade in"><strong>{{searchWarningMessage}}</strong></div></div><div class=row><div class="col-xs-12 col-sm-12 col-md-6"><div class=form-group><div class="col-xs-12 col-sm-3"></div><div class="col-xs-12 col-sm-9"><div ng-class="searchParams.wc_search == true ? \'checkbox checkbox-info\' : \'checkbox checkbox-circle\'"><label for=wc_search><input type=checkbox id=wc_search ng-model=searchParams.wc_search> Exact Search</label></div></div></div><div class=form-group><label for=person_fname class="control-label col-xs-12 col-sm-3">First Name:</label><div class="col-xs-12 col-sm-3"><input type=text id=person_fname class="form-control input-sm" placeholder="First Name" ng-model=searchParams.fname auto-focus></div><label for=person_lname class="control-label col-xs-12 col-sm-3">Last Name:</label><div class="col-xs-12 col-sm-3"><input type=text id=person_lname class="form-control input-sm" placeholder="Last Name" ng-model=searchParams.lname></div></div><div class=form-group><label for=source_context class="control-label col-xs-12 col-sm-3">Source Context:</label><div ng-if="sourceContextArr.length > 1"><div class="col-xs-12 col-sm-3"><select class="form-control input-sm" id=source_context ng-model=searchParams.source_context><option value ng-selected="searchParams.source_context==\'\'">All Contexts</option><option ng-repeat="context in sourceContextArr" value={{context.name}}>{{context.name}}</option></select></div></div><div ng-if="sourceContextArr.length == 1"><div class="col-xs-12 col-sm-3">{{sourceContextArr[0].name}}</div></div><label for=source_id class="control-label col-xs-12 col-sm-3">Source ID:</label><div class="col-xs-12 col-sm-3"><input type=text id=source_id class="form-control input-sm" placeholder="Source ID" ng-model=searchParams.source_id></div></div><div class=form-group><label for=email class="control-label col-xs-12 col-sm-3">Email:</label><div class="col-xs-12 col-sm-9"><input type=text id=email class="form-control input-sm" placeholder=Email ng-model=searchParams.email></div></div><div class=form-group restriction-field=ROLE_CURATOR ignore-rw><label for=start_date class="control-label col-xs-12 col-sm-3"><div class=dropdown><a href data-toggle=dropdown class=dropdown-toggle>Last Updated<b class=caret></b></a><ul class=dropdown-menu><li><a href ng-click="getDateRange(\'today\')">Today</a></li><li><a href ng-click="getDateRange(\'yesterday\')">Yesterday</a></li><li><a href ng-click="getDateRange(\'last7\')">Last 7 Days</a></li><li><a href ng-click="getDateRange(\'last30\')">Last 30 Days</a></li><li><a href ng-click="getDateRange(\'thisMonth\')">This Month</a></li><li><a href ng-click="getDateRange(\'lastMonth\')">Last Month</a></li><li><a href ng-click="getDateRange(\'clear\')">Clear</a></li></ul></div></label><div class="col-xs-12 col-sm-5"><div class="input-group add-on col-sm-12 date datepicker"><input type=text class="form-control input-sm" id=start_date name=startDate uib-datepicker-popup={{dateFormat}} show-weeks=false ng-model=searchParams.startDate is-open=startDateOpened datepicker-options=dateOptions ng-click="openCalendar($event, \'start\')" ng-required=false close-text=Close placeholder="Start Date"> <span class=input-group-btn><button type=button class="btn btn-default btn-calendar" ng-click="openCalendar($event, \'start\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-xs-12 col-sm-4"><div class="input-group add-on col-sm-12 date datepicker" ng-class="{\'has-error\': search_person_form.endDate.dateLaterThan && search_person_form.endDate.$dirty}"><input type=text class="form-control input-sm" id=end_date name=endDate uib-datepicker-popup={{dateFormat}} show-weeks=false ng-model=searchParams.endDate is-open=endDateOpened ng-click="openCalendar($event, \'end\')" datepicker-options=dateOptions date-later-than="{{searchParams.startDate| date: \'short\'}}" ng-required=false close-text=Close placeholder="End Date"> <span class=input-group-btn><button type=button class="btn btn-default btn-calendar" ng-click="openCalendar($event, \'end\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div><span ng-show=search_person_form.endDate.$error.dateLaterThan class="help-inline warning">End date should be no earlier than start date</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class=form-group><label for=affiliation class="control-label col-sm-12 col-sm-3">Affiliation:</label><div class="col-sm-12 col-sm-9"><input type=text id=affiliation class="form-control input-sm" autocomplete=off placeholder="Organization Name" ng-model=searchParams.affiliated_org_name uib-typeahead="org for org in typeAheadNameSearch($viewValue)" typeahead-loading=loadingOrganizations typeahead-min-length=3 typeahead-wait-ms=50 typeahead-no-results=noResults></div></div><div class=form-group><label for=source_status class="control-label col-xs-12 col-sm-3">Source Status:</label><div ng-if="sourceStatusArr.length > 1"><div class="col-xs-12 col-sm-4"><select class="form-control input-sm" id=source_status ng-model=searchParams.source_status ng-options="status.name for status in sourceStatusArr"><option value>Select a Status</option></select></div></div><div ng-if="sourceStatusArr.length == 1"><div class="col-xs-12 col-sm-4">{{sourceStatusArr[0].name}}</div></div></div><div class=form-group><label for=phone class="control-label col-xs-12 col-sm-3">Phone:</label><div class="col-xs-12 col-sm-9"><input type=text id=phone class="form-control input-sm" placeholder=Phone ng-model=searchParams.phone></div></div><div class=form-group restriction-field=ROLE_CURATOR ignore-rw><label for=updated_by class="control-label col-xs-12 col-sm-3">Updated by:</label><div class="col-xs-12 col-sm-9"><input type=text class="form-control input-sm" id=updated_by ng-model=searchParams.updated_by placeholder=Username></div></div></div></div><div class=row><div class=col-xs-12><div class=btn-toolbar><button type=submit class="btn btn-primary pull-right" id=submission_btn ng-click="searchPeople(\'fromStart\')"><i class="glyphicon glyphicon-search"></i> Search</button> <button class="btn btn-warning pull-right" id=reset_btn ng-click=resetSearch()><i class="glyphicon glyphicon-remove"></i> Clear</button></div></div></div></form><div class=row ng-class="{\'top-offset-xs\': gridOptions.totalItems != null }" ng-if="searchWarningMessage.length === 0"><div class=col-xs-12><div class=row ng-if="gridOptions.totalItems != null"><div class=col-xs-12><a href id=people_search_results></a><div ng-if="searchWarningMessage.length === 0"><p></p><h4>People Search Results: {{gridOptions.totalItems}} found</h4><p></p></div><h5 ng-show="gridOptions.totalItems > 0 && curationModeEnabled == true"><div class="alert alert-danger fade in" ng-show=curationReady><strong>Please confirm: {{nullifiedPerson}} will be nullified</strong></div><button class=btn ng-click=commitNullification() ng-show=curationShown ng-disabled=!curationReady ng-class="curationReady ? \'btn-danger\' : \'btn-warning\'">Commit Nullification</button></h5></div></div><div class=row ng-hide="warningMessage==\'\'" ng-cloak><div class="alert alert-danger fade in"><a href class=close data-dismiss=alert>&times;</a> <strong>{{warningMessage}}</strong></div></div><div class="row animated-item" ng-if="gridOptions.data.length > 0"><div class=col-xs-12><div ui-grid=gridOptions ui-grid-pagination ui-grid-selection class=grid></div></div></div></div></div><div class="row top-offset-xs"></div>'),e.put("app/po/person/directives/advanced_person_search_form_modal.html",'<div id=adv-person-search-modal><div class=row><div class=col-sm-12><div class=modal-header><button type=button class=close data-dismiss=modal ng-click=advPersonSearchModalView.cancel()>&times;</button></div><div class=modal-body><div class=row><ctrp-advanced-person-search-form show-grid=true max-row-selectable=advPersonSearchModalView.maxRowSelectable curation-mode=false used-in-modal=true></ctrp-advanced-person-search-form></div></div><div class=modal-footer><div class=col-xs-12><div class=btn-toolbar><button class="btn btn-primary pull-right" ng-click=advPersonSearchModalView.confirmSelection() ng-disabled="selectedPersonsArray.length == 0">Confirm Selection</button> <button class="btn btn-danger pull-right" ng-click=advPersonSearchModalView.cancel()><i class="glyphicon glyphicon-remove"></i> Close</button></div></div></div></div></div></div>'),e.put("app/po/person/directives/personAdvSearchModalButtonTemplate.html",'<div class=row><button class="btn btn-primary" restriction-field id=person_search_modal ng-click="searchPerson(\'lg\')"><i class="glyphicon glyphicon-search"></i> Search Persons</button> <button ng-if=useBuiltInTemplate class="btn btn-danger" ng-click="batchSelect(\'removeAll\')" ng-show="savedSelection.length > 0"><i class="glyphicon glyphicon-remove"></i> Remove All Person(s)</button></div><div ng-if=useBuiltInTemplate class="row animated-item" ng-show="savedSelection.length > 0"><table class="table table-bordered table-striped table-condensed"><thead><th>Remove</th><th>PO ID</th><th>Prefix</th><th>First Name</th><th>Last Name</th><th>Suffix</th><th>Email</th><th>Phone</th><th>Source Context</th><th>Source Status</th></thead><tbody><tr ng-repeat="person in savedSelection track by $index" class=animated-item ng-class="person._destroy == true ? \'deleted-text\' : \'\'"><td style="vertical-align: middle"><label class="btn btn-default" ng-click=toggleSelection($index)><i class=glyphicon ng-class="person._destroy == true ? \'glyphicon-ok-circle\' : \'glyphicon-remove-circle\'"></i></label></td><td>{{person.id}}</td><td>{{person.prefix}}</td><td>{{person.fname}}</td><td>{{person.lname}}</td><td>{{person.suffix}}</td><td>{{person.email}}</td><td>{{person.phone}}</td><td>{{person.source_context}}</td><td>{{person.source_status}}</td></tr></tbody></table></div>');
}]);